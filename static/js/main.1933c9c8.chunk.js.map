{"version":3,"sources":["serviceWorker.js","modules/Selector.js","modules/SelectArea.js","modules/Help.js","modules/About.js","modules/Pie.js","modules/NolliMap.js","modules/TrafficMap.js","modules/helpers.js","modules/VisibilityMap2.js","modules/POIMap.js","modules/NaturalElements.js","modules/D3Layers.js","modules/Sidebar.js","modules/Maps.js","modules/ScrollToTop.js","index.js"],"names":["Boolean","window","location","hostname","match","Selector","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","updateWindowDimensions","setState","width","container","offsetWidth","height","offsetHeight","updateXY","handlerID","e","_ref","deltaX","deltaY","newX","state","mouseX","newY","mouseY","setXY","x","y","handleStart","_ref2","setDragging","handleStop","_ref3","handleDrag","_ref4","dragging","addEventListener","removeEventListener","_this2","divWidth","divHeight","react_default","a","createElement","className","ref","el","style","position","left","top","concat","react_draggable","onStart","bind","onDrag","onStop","Component","MAPBOX_TOKEN","MapSelection","resize","newViewport","viewport","newSelector","selector","innerWidth","sidebar","innerHeight","handleViewportChange","initialLocation","setLocation","clearInterval","interval","isdragging","objectSpread","transitionDuration","input","longitude","toFixed","latitude","zoom","mapRef","current","bounds","getMap","getBounds","selBounds","n","_ne","lat","s","_sw","w","lng","handleOnResult","event","handleGeocoderViewportChange","value","getDistance","lat1","lon1","lat2","lon2","φ1","Math","PI","φ2","Δφ","Δλ","sin","cos","atan2","sqrt","getBoundArea","newLng","parseFloat","document","getElementById","newLat","newZoom","changeInputValue","field","newInput","target","expandSidebar","foldSidebar","params","bearing","pitch","React","createRef","setInterval","_this3","_this$state","nlat","slat","wlng","elng","area","inner","sidebarStyle","esm","assign","onViewportChange","mapboxApiAccessToken","mapStyle","dist_default","onResult","showCompass","modules_Selector","src","process","alt","type","id","step","min","max","onChange","onClick","Link","to","right","withRouter","Help","About","Slice","_this$props","pie","innerRadius","outerRadius","cornerRadius","padAngle","styles","arc","d3","interpolate","map","slice","index","length","key","d","fill","transform","centroid","dy","color","tags","Pie","_this$props2","data","Pie_Slice","NolliMap","getBuildingCat","tag","cat","forEach","group","indexOf","showTooltip","bbox","getBBox","tooltip","info","hideTooltip","content","ways","relations","totalFootprint","footprintPro","floorPro","levels","building","shapes","members","element","pts","join","option","push","fillRule","stroke","strokeWidth","onMouseEnter","onMouseLeave","unshift","footprint","points","unbuilt","lengthratio","text","attr","charAt","toUpperCase","substr","toLowerCase","decodeURI","tooltipstyle","console","log","version","viewBox","modules_Pie","title","radius","TrafficMap","getWayCat","ratio","highway","strokeLinecap","strokeLinejoin","route","role","toString","cx","cy","r","toRad","Value","distSq","x1","y1","x2","y2","svgIntersections","require","intersect","svgShape","shape","VisibilityMap","updatePos","humans","setPos","setRegion","setArc","region","arcs","str","substring","split","num","array","i","abs","getArea","shaded","updateRegions","regions","changed","angle","parts","shift","intersections","buildings","closePt","close","point","setRegions","setArcs","prevProps","colors","human","handles","POIMap","selected","longLinks","shortLinks","link","node","shortLink","NaturalElements","getElementCat","water","waterway","natural","landuse","leisure","green","nodes","D3Layers","pixratio","getDirDistance","checkSingle","Array","isArray","getWayPoints","mapPix","b","c","addLoading","loading","resetLoading","updateStates","rawdata","result","xml2js","compact","spaces","osmNode","osm","osmWay","way","osmRelation","relation","_attributes","nodeTag","lon","k","v","wayNd","nd","wayTag","children","relationMember","member","relationTag","except","longLink","j","linkLengh","random","getOptions","selectedOption","options","setOption","addHuman","disabled","deleteHuman","newoptions","newhumans","newarcs","newregions","pop","POI Map","Nolli Map","Visibility","Traffic","Natural Elements","optionbar","maps","ovl","modules_POIMap","modules_NolliMap","VisibilityMap2","modules_TrafficMap","modules_NaturalElements","added","Sidebar","changeMap","addOverlay","stopPropagation","removeOverlay","handleUpdate","evt","updated","renderMenu","layers","record","menu","count","Maps","newlist","raw","axios","get","then","res","modules_Sidebar","modules_D3Layers","ScrollToTop","scrollTo","ReactDOM","render","BrowserRouter","modules_ScrollToTop","Route","exact","path","component","SelectArea","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.1933c9c8.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React, { Component } from \"react\";\nimport { DraggableCore }from 'react-draggable';\n\nclass Selector extends Component {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\tdragging: false,\n\t\t\tmouseX: this.props.x,\n\t\t\tmouseY: this.props.y\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t  this.updateWindowDimensions();\n\t  window.addEventListener('resize', this.updateWindowDimensions);\n\t}\n\n\tcomponentWillUnmount() {\n\t  window.removeEventListener('resize', this.updateWindowDimensions);\n\t}\n\n\tupdateWindowDimensions = () => {\n\t  this.setState({ \n\t  \twidth: this.container.offsetWidth,\n\t  \theight: this.container.offsetHeight\n\t  });\n\t}\n\t\n\tupdateXY = (handlerID, e, { deltaX, deltaY }) => {\n\t\tvar newX = this.state.mouseX;\n\t\tvar newY = this.state.mouseY;\n\n\t\tif (handlerID === '1') {\n\t\t\tnewX += deltaX;\n\t\t\tnewY += deltaY;\n\t\t}else if (handlerID === '2') {\n\t\t\tnewX -= deltaX;\n\t\t\tnewY += deltaY;\n\t\t}else if (handlerID === '3') {\n\t\t\tnewX += deltaX;\n\t\t\tnewY -= deltaY;\n\t\t}else if (handlerID === '4') {\n\t\t\tnewX -= deltaX;\n\t\t\tnewY -= deltaY;\n\t\t}\n\t\tif (newX >= 40 && newX <= this.state.width/2-40 && newY >= 60 && newY <= this.state.height/2-40){\n\t\t\tthis.props.setXY({x: newX, y: newY});\n\t\t}\n\n\t\tthis.setState({\n\t\t\tmouseX: newX,\n\t\t\tmouseY: newY\n\t\t})\n\t}\n\n\thandleStart = (handlerID, e, { deltaX, deltaY }) => {\n\t\tthis.props.setDragging(true);\n\t\tthis.updateXY(handlerID, e, { deltaX, deltaY });\n\t}\n\n\thandleStop = (handlerID, e, { deltaX, deltaY }) => {\n\t\tthis.props.setDragging(false);\n\t\tthis.updateXY(handlerID, e, { deltaX, deltaY });\n\t\tthis.setState({\n\t\t\tmouseX: this.props.x,\n\t\t\tmouseY: this.props.y\n\t\t})\n\t}\n\n\thandleDrag = (handlerID, e, { deltaX, deltaY }) => {\n\t\tthis.updateXY(handlerID, e, { deltaX, deltaY });\n\t}\n\n\trender() {\n\t\tconst divWidth = this.state.width;\n\t\tconst divHeight = this.state.height;\n\t\treturn (\n\t\t\t<div className='selector' ref={el => (this.container = el)}>\n\t\t\t\t<div className='shader'\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\tleft:0,\n\t\t\t\t\t\ttop:0,\n\t\t\t\t\t\theight: `${ divHeight }px`,\n\t\t\t\t\t\twidth: `${ this.props.x }px`\n\t\t\t\t\t}}\t\t\t\t\t\n\t\t\t\t/>\n\t\t\t\t<div className='shader'\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\tleft:`${ divWidth-this.props.x }px`,\n\t\t\t\t\t\ttop:0,\n\t\t\t\t\t\theight: `${ divHeight }px`,\n\t\t\t\t\t\twidth: `${ this.props.x }px`\n\t\t\t\t\t}}\t\t\t\t\t\n\t\t\t\t/>\n\t\t\t\t<div className='shader'\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\tleft:`${ this.props.x }px`,\n\t\t\t\t\t\ttop:0,\n\t\t\t\t\t\theight: `${ this.props.y }px`,\n\t\t\t\t\t\twidth: `${ divWidth-this.props.x*2 }px`\n\t\t\t\t\t}}\t\t\t\t\t\n\t\t\t\t/>\n\t\t\t\t<div className='shader'\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\tleft:`${ this.props.x }px`,\n\t\t\t\t\t\ttop:`${ divHeight-this.props.y }px`,\n\t\t\t\t\t\theight: `${ this.props.y }px`,\n\t\t\t\t\t\twidth: `${ divWidth-this.props.x*2 }px`\n\t\t\t\t\t}}\t\t\t\t\t\n\t\t\t\t/>\n\t\t      <DraggableCore\n\t\t        onStart={this.handleStart.bind(this, '1')}\n\t\t        onDrag={this.handleDrag.bind(this, '1')}\n\t\t        onStop={this.handleStop.bind(this, '1')}>\n\t\t        <div className=\"handler\" style={{top:this.props.y-6, left:this.props.x-6}}/>\n\t\t      </DraggableCore>\n\t\t      <DraggableCore\n\t\t        onStart={this.handleStart.bind(this, '2')}\n\t\t        onDrag={this.handleDrag.bind(this, '2')}\n\t\t        onStop={this.handleStop.bind(this, '2')}>\n\t\t        <div className=\"handler\" style={{top:this.props.y-6, left:divWidth-this.props.x-6}}/>\n\t\t      </DraggableCore>\n\t\t      <DraggableCore\n\t\t        onStart={this.handleStart.bind(this, '3')}\n\t\t        onDrag={this.handleDrag.bind(this, '3')}\n\t\t        onStop={this.handleStop.bind(this, '3')}>\n\t\t        <div className=\"handler\" style={{top:divHeight-this.props.y-6, left:this.props.x-6}}/>\n\t\t      </DraggableCore>\n\t\t      <DraggableCore\n\t\t        onStart={this.handleStart.bind(this, '4')}\n\t\t        onDrag={this.handleDrag.bind(this, '4')}\n\t\t        onStop={this.handleStop.bind(this, '4')}>\n\t\t        <div className=\"handler\" style={{top:divHeight-this.props.y-6, left:divWidth-this.props.x-6}}/>\n\t\t      </DraggableCore>\n\t\t\t</div>\n\t\t)\n\t}\n};\n\nexport default Selector;","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport ReactMapGL, {NavigationControl} from \"react-map-gl\";\nimport Geocoder from \"react-map-gl-geocoder\";\nimport {withRouter} from \"react-router\";\nimport Selector from './Selector';\nimport '../scss/selectarea.scss'\n\nconst MAPBOX_TOKEN =\"pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4M29iazA2Z2gycXA4N2pmbDZmangifQ.-g_vE53SD2WrJ6tFX7QHmA\";\n\nclass MapSelection extends Component {\n  \tconstructor(props: Props) {\n\t    super(props);\n\t    var latitude = 48.13832;\n\t    var longitude = 11.57440;\n\t    if (this.props.match.params.lat && this.props.match.params.lng){\n\t    \tlongitude = parseFloat(this.props.match.params.lng);\n\t    \tlatitude = parseFloat(this.props.match.params.lat);\n\t    }\n\t    this.state = {\n\t    \tviewport: {\n\t\t    \twidth: window.innerWidth-250,\n\t\t      \theight: window.innerHeight,\n\t\t      \tlongitude: longitude,\n\t\t      \tlatitude: latitude,\n\t\t      \tzoom: 15,\n\t\t\t\tbearing: 0,\n\t\t\t\tpitch: 0,    \t\n\t\t\t},\n\t\t\tinput: {\n\t\t\t\t\"longitude\": longitude.toFixed(4),\n\t\t\t\t\"latitude\": latitude.toFixed(4),\n\t\t\t\t\"zoom\": 15\n\t\t\t},\n\t    \tselector:{\n\t    \t\tx: (window.innerWidth-250)/4,\n\t    \t\ty: window.innerHeight/4\n\t    \t},\n\t    \tisdragging: false,\n\t    \tselBounds:{\n\t    \t\tn: 0,\n\t    \t\ts: 0,\n\t    \t\tw: 0,\n\t    \t\te: 0\n\t    \t},\n\t    \twidth: window.innerWidth-250,\n\t    \theight: window.innerHeight,\n\t    \tsidebar: false\n\t  \t};\n\t  \tthis.mapRef = React.createRef();\n\t};\n\n  \t\n\n  \tcomponentDidMount() {\n    \twindow.addEventListener(\"resize\", this.resize);\n  \t\tthis.resize();\n        this.interval = setInterval(() => this.initialLocation(), 1);\n  \t}\n\n  \tcomponentWillUnmount() {\n    \twindow.removeEventListener(\"resize\", this.resize);\n  \t}\n\n  \tresize = () => {\n\t\tvar newViewport = this.state.viewport;\n\t\tvar newSelector = this.state.selector;\n\t\tif (window.innerWidth>768){\n\t\t\tif (this.state.sidebar){\n\t\t\t\tthis.setState({sidebar:false});\n\t\t\t}\n\t\t\tnewViewport.width = window.innerWidth-250;\n\t\t\tnewViewport.height = window.innerHeight;\n\t\t}else{\n\t\t\tnewViewport.width = window.innerWidth;\n\t\t\tnewViewport.height = window.innerHeight-60;\n\t\t}\n\t\tnewSelector.x = newViewport.width/4;\n\t\tnewSelector.y = newViewport.height/4;\n\t\tthis.setState({\n\t\t\tviewport:newViewport,\n\t\t\tselector:newSelector,\n\t\t  \twidth: newViewport.width,\n\t\t  \theight: newViewport.height\n\t\t})\n    \tthis.handleViewportChange(newViewport);\n  \t}\n\n  \tinitialLocation = () =>{\n  \t\tthis.setLocation();\n  \t\tclearInterval(this.interval);\n  \t}\n  \thandleViewportChange = (viewport) => {\n  \t\tif (this.state.isdragging === false){\n\t    \tthis.setState({\n\t    \t\tviewport: { ...this.state.viewport, ...viewport, transitionDuration: 100 },\n\t    \t\tinput: {\n\t\t\t\t\t\"longitude\": viewport.longitude.toFixed(4),\n\t\t\t\t\t\"latitude\": viewport.latitude.toFixed(4),\n\t\t\t\t\t\"zoom\": viewport.zoom\n\t\t\t\t}\n\t    \t});\n\t    \tif (this.mapRef.current) {\n\t    \t\tconst myMap = this.mapRef.current.getMap();\n\t\t    \tconst bounds = myMap.getBounds();\n\t\t    \tthis.setState({selBounds:{\n\t\t    \t\tn: bounds._ne.lat,\n\t\t    \t\ts: bounds._sw.lat,\n\t\t\t\t\tw: bounds._sw.lng,\n\t\t    \t\te: bounds._ne.lng\n\t\t    \t}})\n\n\t    \t}\n    \t}\n  \t}\n\n  \thandleOnResult = (event) => {\n//    \tconsole.log(event.result);\n  \t}\n\n  \thandleGeocoderViewportChange = (viewport) => {\n    \tconst geocoderDefaultOverrides = { transitionDuration: 500 };\n\t    this.handleViewportChange({\n\t      \t...viewport,\n\t      \t...geocoderDefaultOverrides,\n\t    });\n\n  \t}\n\n  \tsetDragging = (value) => {\n  \t\tthis.setState({isdragging: value});\n  \t}\n\n  \tsetXY = (value) => {\n  \t\tthis.setState({selector: value});  \t\t\n  \t}\n\t\n\tgetDistance = (lat1, lon1, lat2, lon2) => {\n\t  \tvar R = 6371e3; // metres\n\t\tvar φ1 = lat1* Math.PI / 180;\n\t\tvar φ2 = lat2* Math.PI / 180;\n\t\tvar Δφ = (lat2-lat1)* Math.PI / 180;\n\t\tvar Δλ = (lon2-lon1)* Math.PI / 180;\n\n\t\tvar a = Math.sin(Δφ/2) * Math.sin(Δφ/2) +\n\t\t        Math.cos(φ1) * Math.cos(φ2) *\n\t\t        Math.sin(Δλ/2) * Math.sin(Δλ/2);\n\t\tvar c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n\n\t\treturn R * c;\n\t}\n\t\n\tgetBoundArea = (lat1, lat2, lon1, lon2) => {\n\t\treturn this.getDistance(lat1, lon1, lat1, lon2) * this.getDistance(lat1, lon1, lat2, lon1)\n\t}\n\n\tsetLocation = () =>{\n\t\tvar newLng = parseFloat(document.getElementById(\"longitude\").value);\n\t\tvar newLat = parseFloat(document.getElementById(\"latitude\").value);\n\t\tvar newZoom = parseFloat(document.getElementById(\"zoom\").value);\n    \tthis.handleViewportChange({\n    \t\tlongitude:newLng,\n    \t\tlatitude:newLat,\n    \t\tzoom:newZoom\n    \t});\t\t\n\t}\n\n\tchangeInputValue = (field, e) => {\n\t\tvar newInput = this.state.input;\n\t\tnewInput[field] = e.target.value;\n\t\tthis.setState({\n\t\t\tinput:newInput\n\t\t})\n\t}\n\n\texpandSidebar = () => {\n\t\tthis.setState({sidebar: true})\n\t}\n\n\tfoldSidebar = () => {\n\t\tthis.setState({sidebar: false})\n\t}\n\n  \trender() {\n    \tconst { viewport, selector, selBounds } = this.state;\n\t    const nlat = selBounds.n - selector.y/viewport.height*(selBounds.n-selBounds.s);\n\t    const slat = selBounds.s + selector.y/viewport.height*(selBounds.n-selBounds.s);\n\t    const wlng = selBounds.w + selector.x/this.state.width*(selBounds.e-selBounds.w);\n\t    const elng = selBounds.e - selector.x/this.state.width*(selBounds.e-selBounds.w);\n\t    const area = this.getBoundArea(nlat, slat, wlng, elng).toFixed(2);\n\t    var inner = 0;\n\t    if (area <= 4000000){inner = Math.sqrt(area/4000000)*210}else{inner = Math.sqrt(4000000/area)*210};\n\t    var sidebarStyle = {left: 0}\n\t    if (window.innerWidth<768 && !this.state.sidebar){sidebarStyle={left:-250}}\n\t    return (\n\t    \t<div className = 'content'>\n\n\t    \t<div className = 'select-wrapper' ref={el => (this.container = el)}>\n\t\t\t\t<ReactMapGL\n\t\t\t\t\tclassName='map'\n\t\t\t\t    ref={this.mapRef}\n\t\t\t\t    {...viewport}\n\t\t\t\t    onViewportChange={this.handleViewportChange}\n\t\t\t\t    mapboxApiAccessToken={MAPBOX_TOKEN}\n\t\t\t\t    mapStyle='mapbox://styles/mapbox/streets-v9'\n\t\t\t\t>\n\t\t\t\t\t<Geocoder\n\t\t\t\t\t    mapRef={this.mapRef}\n\t\t\t\t\t    onResult={this.handleOnResult}\n\t\t\t\t        onViewportChange={this.handleGeocoderViewportChange}\n\t\t\t\t        mapboxApiAccessToken={MAPBOX_TOKEN}\n\t\t\t\t        position=\"top-right\"\n\t\t\t\t    />\n\t\t\t        <div className='control'>\n\t\t\t\t        <NavigationControl \n\t\t\t\t        \tshowCompass={false}\n\t\t\t\t          \tonViewportChange={this.handleViewportChange} \n\t\t\t\t        />\n\t\t\t        </div>\n\t\t\t\t\t<Selector\n\t\t\t\t    \t{...selector}\n\t\t\t\t    \tsetDragging = {this.setDragging}\n\t\t\t\t    \tsetXY = {this.setXY}\n\t\t\t\t    />\n\n\t\t\t\t</ReactMapGL>\n\t\t    </div>\n\t\t\t<div className = \"sidebar-main-wrapper\" style={sidebarStyle}>\n\t\t\t\t<div className=\"footer-wrapper\">\n\t\t\t\t<img className = \"logo\" src={process.env.PUBLIC_URL + '/image/infomap-logo.svg'} alt=\"infomap\"/>\n\t\t\t    <div className = \"coordinates\">\n\t\t\t    \t<div className = \"parameter\">\n\t\t\t\t\t    Longitude:\n\t\t\t\t\t    <input type=\"number\" id=\"longitude\" step=\"0.0001\" min=\"-180\" max=\"180\" value={this.state.input[\"longitude\"]} onChange={(e)=>this.changeInputValue(\"longitude\", e)}/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className = \"parameter\">\n\t\t\t\t\t    Latitude:\n\t\t\t\t\t    <input type=\"number\" id=\"latitude\" step=\"0.0001\" min=\"-90\" max=\"90\" value={this.state.input[\"latitude\"]} onChange={(e)=>this.changeInputValue(\"latitude\", e)}/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className = \"parameter\">\n\t\t\t\t\t    Zoom:\n\t\t\t\t\t    <input type=\"number\" id=\"zoom\" step=\"0.0001\" min=\"-90\" max=\"90\" value={this.state.input[\"zoom\"]} onChange={(e)=>this.changeInputValue(\"zoom\", e)}/>\n\t\t\t\t\t</div>\n\t\t\t\t    <div className=\"button-secondary\" onClick={this.setLocation}>Go to location</div>\n\t\t\t    </div>\n\t\t    \t{area <= 4000000? \n\t\t\t\t\t<div className='area'>\n\t\t\t\t\t\t<div className=\"area-indicator\">\n\t\t\t\t\t\t\t<div className=\"area-indicator-fill\" style={{width:inner, height:inner, top:(210-inner)/2, left:(210-inner)/2}}></div>\n\t\t\t\t\t\t\t<div className=\"limit\">4 km&#178;</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"area-number\">Area: {area} m&#178;</div>\n\t\t\t\t\t    <Link to={`${process.env.PUBLIC_URL}/selected/${wlng}/${slat}/${elng}/${nlat}`}> \n\t\t\t\t\t\t\t<div className='button proceed-button'>Proceed to Analysis </div>\n\t\t\t\t    \t</Link>\n\t\t\t\t    </div>\n\t\t\t    :\n\t\t\t\t\t<div className='area'>\n\t\t\t\t\t\t<div className=\"area-indicator-exceed\">\n\t\t\t\t\t\t\t<div className=\"area-indicator-fill-exceed\" style={{width:inner, height:inner, top:(210-inner)/2, left:(210-inner)/2}}></div>\n\t\t\t\t\t\t\t<div className=\"limit-exceed\"style={{top:(210-inner)/2+8, right:(210-inner)/2+8}}>4 km&#178;</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"area-number\">Area: &#62; 4 km&#178;</div>\n\t\t\t\t\t\t<div className='button button-disabled proceed-button'>Proceed to Analysis </div>\n\t\t\t\t\t\t<div className='proceed-alert'> Selected area must be smaller than 4 km&#178; </div>\n\t\t\t\t\t</div>\n\t\t    \t}\n\t\t\t\t<div className='raw hide'>\n\t\t\t\t    <div>\n\t\t\t\t    \t<p>Viewport Coordinates:</p>\n\t\t\t\t    \t<p> {`n: ${selBounds.n} s: ${selBounds.s} w: ${selBounds.w} e: ${selBounds.e}`}</p>\n\t\t\t\t    </div>\n\t\t\t    \t<div>\n\t\t\t    \t\t<p>Selected Region Coordinates:</p>\n\t\t\t    \t\t<p> {`n: ${nlat} s: ${slat} w: ${wlng} e: ${elng}`}</p>\n\t\t\t    \t</div>\n\t\t\t    \t<div>\n\t\t\t    \t\t<p>Selected Region Area:</p>\n\t\t\t    \t\t<p> {area}</p>\n\t\t\t    \t</div>\n\t\t    \t</div>\n\t\t    \t<div className=\"push\"/>\n\t\t    \t</div>\n\t\t    \t<div className='sidebar-footer'>\n\t\t\t\t\t<div className='footer-tab'>About</div>\n\t\t\t\t\t<div className='footer-tab'>Help</div>\n\t\t\t\t</div>\n\t\t    </div>\n\n\t    \t<div className ='navbar'>\n\t\t\t\t<img className = \"icon\" src={process.env.PUBLIC_URL + '/image/icon/menu.svg'} onClick={this.expandSidebar} alt='menu'/>\n\t\t\t\t<img className = \"logo\" src={process.env.PUBLIC_URL + '/image/infomap-logo.svg'} alt='infomap'/>\n\t    \t</div>\n\t    \t<div className={this.state.sidebar?'mask':'hide'} onClick={this.foldSidebar}/>\n\n\t\t    </div>\n\t    );\n  \t}\n};\n\nexport default withRouter(MapSelection);","import React from \"react\";\n\nclass Help extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div>Help</div>\n\t\t\t\t{/*TODO*/}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Help;\n","import React from \"react\";\n\nclass About extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div>About</div>\n\t\t\t\t{/*TODO*/}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default About;\n","import React from \"react\";\nimport * as d3 from \"d3\";\n\nclass Slice extends React.Component {\n  render() {\n    let {pie, innerRadius, outerRadius, cornerRadius, padAngle, styles} = this.props;\n\n    let arc = d3\n      .arc()\n      .innerRadius(innerRadius)\n      .outerRadius(outerRadius)\n      .cornerRadius(cornerRadius)\n      .padAngle(padAngle);\n\n    let interpolate = d3.interpolateRgb(\"#eaaf79\", \"#bc3358\");\n\n    return pie.map((slice, index) => {\n      let sliceColor = interpolate(index / (pie.length - 1));\n      return (\n        <g  key={index}>\n          <path d={arc(slice)} fill={styles[index].fill}/>\n          <text transform={`translate(${arc.centroid(slice)[0]}, ${arc.centroid(slice)[1]})`} dy=\".35em\" color=\"grey\">\n            {this.props.tags[index]}\n          </text>\n        </g>\n      );\n    });\n  };\n}\n\nclass Pie extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  render() {\n    const height = 200;\n    const width = 200;\n    let {data, innerRadius, outerRadius, cornerRadius, padAngle, styles} = this.props;\n    let pie = d3.pie()(data);\n\n    return (\n      <svg height={height} width={width}>\n        <g transform={`translate(${width / 2},${height / 2})`}>\n          <Slice \n            innerRadius={innerRadius}\n            outerRadius={outerRadius}\n            cornerRadius={cornerRadius}\n            padAngle={padAngle}\n            styles = {styles}\n            pie={pie}\n            tags={this.props.tags} \n          />\n        </g>\n      </svg>\n    )\n  }\n}\nexport default Pie;","import React from \"react\";\nimport Pie from \"./Pie\";\n\nclass NolliMap extends React.Component {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\ttooltip: false,\n\t\t\tinfo: {},\n\t\t\tleft: true,\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t}\n\n\tgetBuildingCat = (tag) => {\n\t\tconst keys = [\n\t\t\t[\"apartments\",\"farm\", \"hotel\", \"house\", \"detached\", \"residential\", \"dormitory\", \"terrace\", \"houseboat\", \"bungalow\", \"static_caravan\", \"cabin\"],\n\t\t\t[\"commercial\", \"office\", \"industrial\", \"retail\", \"supermarket\", \"warehouse\", \"kiosk\"],\n\t\t\t[\"religious\", \"cathedral\", \"chapel\", \"church\", \"mosque\", \"temple\", \"synagogue\", \"shrine\"],\n\t\t\t[\"bakehouse\", \"kindergarten\", \"civic\", \"government\", \"hospital\", \"school\", \"stadium\", \"train_station\", \"transportation\", \"university\", \"grandstand\", \"public\", \"toilets\", \"service\", \"parking\", \"garages\", \"garage\", \"sports_hall\", \"bridge\", \"\tcarport\", \"hangar\"],\n\t\t\t[\"greenhouse\",\"pavilion\", \"farm_auxiliary\", \"barn\"]\n\t\t]\n\n\t\tvar cat = 5;\n\n\t\tkeys.forEach((group, index) => {\n\t\t\tif(group.indexOf(tag) !== -1){\n\t\t\t\tcat = index;\n\t\t\t}\n\t\t});\n\n\t\treturn cat;\n\t}\n\n\n\tshowTooltip = (tags, e) =>{\n\t\tvar bbox = e.target.getBBox();\n\t\tif ((bbox.x + bbox.width/2) >= (this.props.width/2)){\n\t\t\tthis.setState({left: true})\n\t\t} else {\n\t\t\tthis.setState({left: false})\n\t\t}\n\t\tthis.setState({\n\t\t\ttooltip: true,\n\t\t\tinfo: tags,\n\t\t})\n\n\t}\n\n\thideTooltip = () =>{\n\n\t\tthis.setState({\n\t\t\ttooltip: false,\n\t\t\tinfo: {}\n\t\t})\n\n\t}\n\n\trender() {\n\t\tlet content = [];\n\t\tvar {width, height, ways, relations} = this.props;\n\t\tvar info = this.state.info;\n\t\tvar totalFootprint = 0;\n\t\tvar footprintPro = [0,0,0,0,0,0];\n\t\tvar totalFloor = 0;\n\t\tvar floorPro = [0,0,0,0,0,0]\n\t\tconst styles = [\n\t\t\t{\n\t\t\t\tfill: \"#ad4a00\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfill: \"#7693d3\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfill: \"#0053cc\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfill: \"#cb00d1\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfill: \"#b6ff97\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfill: \"rgba(60, 60, 60)\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfill: \"rgba(52, 168, 0, .4)\"\n\t\t\t}\n\t\t];\n\n\t\tvar cat = -1\n\n\t    var levels = null;\n\t    var color = \"rgba(60, 60, 60)\";\n\n\t    for (var id in relations) {\n\n\t    \tif (relations[id].tag.building || relations[id].tag[\"buidling:part\"]){\n\t    \t\tvar shapes = '';\n\t    \t\tcolor = \"rgba(60,60,60)\";\n\t    \t\t\n\t    \t\trelations[id].members.forEach((element)=>{\n\t    \t\t\tif (element.type === 'way' && element.value) {\n\t\t    \t\t\tvar pts = element.value.map(e => e.join(',')).join(' ');\n\t\t    \t\t\tshapes += `M ${pts}`;\n\t\t    \t\t}\n\t    \t\t})\n\n\t    \t\tlevels = relations[id].tag[\"building:levels\"];\n\t\t    \tcat = this.getBuildingCat(relations[id].tag.building);\n\n\t    \t\tif (this.props.option === \"Height\"){\n\t    \t\t\tif (levels){\n\t\t    \t\t\tcolor = `rgba(0,0,255,${levels/10})`;\n\t\t\t    \t\tcontent.push(\n\t\t\t    \t\t\t<path d={shapes} fillRule=\"evenodd\" fill={color} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t    \t\t\t\t<title>{id}</title>\n\t\t\t    \t\t\t</path>\n\t\t\t    \t\t);\n\t\t    \t\t}else{\n\t\t\t    \t\tcontent.unshift(\n\t\t\t    \t\t\t<path d={shapes} fillRule=\"evenodd\" fill={color} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t    \t\t\t\t<title>{id}</title>\n\t\t\t    \t\t\t</path>\n\t\t\t    \t\t);\n\t\t    \t\t}\n\t\t    \t}else if (this.props.option === \"Program\"){\n\t\t\t    \tcontent.push(\n\t\t\t    \t\t<path d={shapes} fillRule=\"evenodd\" fill={styles[cat].fill} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t    \t\t\t<title>{id}</title>\n\t\t\t    \t\t</path>\n\t\t\t    \t);\n\t\t    \t}else if (this.props.option === \"None\"){\n\t\t\t    \tcontent.push(\n\t\t\t    \t\t<path d={shapes} fillRule=\"evenodd\" fill={color} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t    \t\t\t<title>{id}</title>\n\t\t\t    \t\t</path>\n\t\t\t    \t);\n\t\t    \t}\n\t    \t\ttotalFootprint += parseFloat(relations[id].tag.footprint);\n\t    \t\tfootprintPro[cat] += parseFloat(relations[id].tag.footprint);\n\t    \t\ttotalFloor += parseFloat(relations[id].tag.footprint) * levels;\n\t    \t\tfloorPro[cat] += parseFloat(relations[id].tag.footprint) * levels;\n\n\t\t\t}\n\n\t    };\n\n\n\t    for (id in ways) {\n\n\t    \tif (ways[id].tag.building){\n\n\t    \t\tvar pts = ways[id].points.map(e => e.join(',')).join(' ');\n\t\t    \tcolor = \"rgba(60,60,60)\";\n\t\t    \tlevels = ways[id].tag[\"building:levels\"];\n\t\t\t\tcat = this.getBuildingCat(ways[id].tag.building);\n\t    \t\tif (this.props.option === \"Height\"){\n\t    \t\t\tif (levels) {\n\t\t    \t\t\tcolor = `rgba(0,0,255,${levels/10})`;\n\t\t\t    \t\tcontent.push(\n\t\t\t    \t\t\t<polygon points={pts} fill={color} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, ways[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}/>\n\t\t\t    \t\t)\n\t\t    \t\t}else{\n\t\t\t    \t\tcontent.unshift(\n\t\t\t    \t\t\t<polygon points={pts} fill={color} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, ways[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}/>\n\t\t\t    \t\t)\t    \t\t\t\n\t\t    \t\t}\n\t\t    \t}else if (this.props.option === \"Program\"){\n\t\t    \t\tcontent.push(\n\t\t\t    \t\t<polygon points={pts} fill={styles[cat].fill} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, ways[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}/>\n\t\t\t    \t)\n\n\t\t    \t}else if (this.props.option === \"None\"){\n\t\t\t    \tcontent.push(\n\t\t\t    \t\t<polygon points={pts} fill={color} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, ways[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}/>\n\t\t\t    \t)\n\t\t    \t}\n\n\t    \t\ttotalFootprint += parseFloat(ways[id].tag.footprint);\n\t    \t\tfootprintPro[cat] += parseFloat(ways[id].tag.footprint);\n\t    \t\ttotalFloor += parseFloat(ways[id].tag.footprint) * levels;\n\t    \t\tfloorPro[cat] += parseFloat(ways[id].tag.footprint) * levels;\n\n\t\t\t}\n\t    };\n\n\t    var totalArea = this.props.width * this.props.height / this.props.lengthratio / this.props.lengthratio;\n\t    var unbuilt = totalArea - totalFootprint;\n\n\t\tvar text = [];\n\t\tfor (var key in info){\n\t\t\tif(!(key === \"building\" && info[key] === \"yes\")){\n\t\t\t\tvar attr = key.charAt(0).toUpperCase() + key.substr(1).toLowerCase();\n\t\t\t\ttext.push(\n\t\t\t\t\t<div className=\"tooltip-info\" key={key}><span className=\"tooltip-key\">{attr}: </span>{info[key]} {attr === \"Footprint\"? decodeURI(\"m%C2%B2\"):\"\"}</div>\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\n\t\tvar tooltipstyle = {};\n\n\t\tif (this.state.left){\n\t\t\ttooltipstyle = {\n\t\t\t\ttop: \"0\",\n\t\t\t\tleft: \"0\"\n\t\t\t}\n\t\t}else{\n\t\t\ttooltipstyle = {\n\t\t\t\ttop: \"0\",\n\t\t\t\tright: \"0\"\n\t\t\t}\n\t\t}\n\n\t\tvar radius = 60;\n\t\tconsole.log(footprintPro);\n\n\t\treturn(\n\t\t\t<div className=\"nollimap\">\n\t\t\t\t<svg version=\"1.1\" viewBox={`0 0 ${width} ${height}`}>\n\t\t\t\t\t{content}\n\t\t\t\t</svg>\n\t\t\t\t{totalFootprint != 0?\n\t\t\t\t\t<div className=\"charts\">\n\t\t\t\t\t\t<Pie \n\t\t\t\t\t\t\ttitle={\"Building footprint\"}\n\t\t\t\t\t\t\ttags={[\"Built\", \"Unbuilt\"]}\n\t\t\t\t\t\t\theight = {0}\n\t\t\t\t\t\t    innerRadius={radius * .35}\n\t\t\t\t\t\t    outerRadius={radius}\n\t\t\t\t\t\t    cornerRadius={2}\n\t\t\t\t\t\t    padAngle={.02}\n\t\t\t\t\t\t    data={[totalFootprint, unbuilt]} \n\t\t\t\t\t\t    styles={[{fill:\"rgba(60, 60, 60)\"},{fill:\"rgba(200, 200, 200)\"}]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Pie \n\t\t\t\t\t\t\ttitle={\"Total floor area by program\"}\n\t\t\t\t\t\t\ttags={[\"Residential\", \"Commercial\", \"Religious\", \"Civic\", \"Others\", \"Unknown\"]}\n\t\t\t\t\t\t\theight = {0}\n\t\t\t\t\t\t    innerRadius={radius * .35}\n\t\t\t\t\t\t    outerRadius={radius}\n\t\t\t\t\t\t    cornerRadius={2}\n\t\t\t\t\t\t    padAngle={.02}\n\t\t\t\t\t\t    data={footprintPro} \n\t\t\t\t\t\t    styles={styles}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t:\n\t\t\t\t\t<div/>\n\t\t\t\t}\n\t\t\t\t<div className={this.state.tooltip? \"tooltip\":\"hide\"} style={tooltipstyle}>\n\t\t\t\t\t<div className=\"tooltip-title\">Building Details</div>\n\t\t\t\t\t{text}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n\n}\n\nexport default NolliMap","import React from \"react\";\n\nclass TrafficMap extends React.Component {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\ttooltip: false,\n\t\t\tinfo: {},\n\t\t\tleft: true,\n\t\t}\n\t}\n\n\tshowTooltip = (tags, e) =>{\n\t\tvar bbox = e.target.getBBox();\n\t\tif ((bbox.x + bbox.width/2) >= (this.props.width/2)){\n\t\t\tthis.setState({left: true})\n\t\t} else {\n\t\t\tthis.setState({left: false})\n\t\t}\n\t\tthis.setState({\n\t\t\ttooltip: true,\n\t\t\tinfo: tags,\n\t\t})\n\n\t}\n\n\thideTooltip = () =>{\n\n\t\tthis.setState({\n\t\t\ttooltip: false,\n\t\t\tinfo: {}\n\t\t})\n\n\t}\n\n\tgetWayCat = (tag) => {\n\t\tconst keys = [\n\t\t\t[\"motorway\",\"trunk\", \"motorway_link\", \"trunk_link\"],\n\t\t\t[\"primary\", \"primary_link\"],\n\t\t\t[\"secondary\", \"tertiary\", \"secondary_link\", \"tertiary_link\", \"raceway\"],\n\t\t\t[\"unclassified\", \"residential\", \"living_street\", \"road\", \"escape\"],\n\t\t\t[\"service\",\"pedestrian\", \"track\", \"bus_guideway\", \"footway\", \"bridleway\", \"steps\", \"path\", \"cycleway\"]\n\t\t]\n\n\t\tvar cat = 5;\n\n\t\tkeys.forEach((group, index) => {\n\t\t\tif(group.indexOf(tag) !== -1){\n\t\t\t\tcat = index;\n\t\t\t}\n\t\t});\n\n\t\treturn cat;\n\t}\n\n\trender() {\n\t\tlet content = [[], [], [], [], [], []];\n\t\tvar {width, height, ways, relations} = this.props;\n\t\tvar ratio = this.props.lengthratio;\n\t\tvar info = this.state.info;\n\n\t\tconst styles = [\n\t\t\t{\n\t\t\t\tcolor: \"#b5451a\",\n\t\t\t\tstrokeWidth: \"16\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolor: \"#f15c22\",\n\t\t\t\tstrokeWidth: \"10\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolor: \"#f47d4e\",\n\t\t\t\tstrokeWidth: \"8\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolor: \"#f79d7a\",\n\t\t\t\tstrokeWidth: \"5\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolor: \"#f9bea7\",\n\t\t\t\tstrokeWidth: \"2\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolor: \"#fcded3\",\n\t\t\t\tstrokeWidth:\"4\"\n\t\t\t}\n\t\t];\n\n\t\tvar cat = -1;\n\t\tvar style = {};\n\n\t    for (var id in ways) {\n\n\t    \tif (ways[id].tag.highway && (this.props.option === \"Roads\" || this.props.option === \"Both\")){\n\t    \t\tvar pts = ways[id].points.map(e => e.join(',')).join(' ');\n\t    \t\tcat = this.getWayCat(ways[id].tag.highway);\n\t    \t\tstyle = styles[cat];\n\t\t    \tcontent[5-cat].push(\n\t\t\t    \t<path d={`M ${pts}`} fill=\"none\" stroke={style.color} strokeWidth={style.strokeWidth * ratio} strokeLinecap=\"round\" strokeLinejoin=\"round\" key={id+\"w\"} onMouseEnter={this.showTooltip.bind(this, ways[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t\t\t    <title>{id}</title>\n\t\t\t\t\t</path>\n\t\t    \t)\n\t\t\t}\n\t    };\n\n\t    for (id in relations) {\n\t    \tif (relations[id].tag.route && (this.props.option === \"Public Transport\" || this.props.option === \"Both\")){\n\t    \t\trelations[id].members.forEach((element, index)=>{\n\t    \t\t\tif (element.type === 'way' && element.value) {\n\t\t    \t\t\tvar pts = element.value.map(e => e.join(',')).join(' ');\n\t\t    \t\t\tif (element.role === 'platform'){\n\t\t\t\t\t    \tcontent.push(\n\t\t\t\t\t    \t\t<path d={`M ${pts}`} fill=\"red\" stroke=\"red\" strokeWidth=\"1\" key={index.toString()+id} onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t\t\t    \t\t\t<title>{id}</title>\n\t\t\t\t\t    \t\t</path>\n\t\t\t\t\t    \t)\n\n\t\t    \t\t\t}else{\n\t\t\t\t\t    \tcontent.push(\n\t\t\t\t\t    \t\t<path d={`M ${pts}`} fill=\"none\" stroke=\"red\" strokeWidth=\"1\" key={index.toString()+id} onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t\t\t    \t\t\t<title>{id}</title>\n\t\t\t\t\t    \t\t</path>\n\t\t\t\t\t    \t)\n\t\t\t\t\t    }\n\t\t    \t\t}else if(element.type === 'node' && element.value){\n\t\t    \t\t\tvar radius = 50;\n\t\t    \t\t\tif (relations[id].tag.route === \"subway\" || relations[id].tag.route === \"train\"){radius = 100}\n\t\t\t\t    \tcontent.push(\n\t\t\t\t    \t\t<g key={index.toString()+id}>\n\t\t\t    \t\t\t\t<circle cx={element.value[0]} cy={element.value[1]} r={radius*ratio} fill=\"rgba(255,90,90,.1)\" onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t\t\t    \t\t\t<title>{id}</title>\n\t\t\t\t\t    \t\t</circle> \n\t\t\t    \t\t\t\t<circle cx={element.value[0]} cy={element.value[1]} r=\"2\" fill=\"#803535\" onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t\t\t    \t\t\t<title>{id}</title>\n\t\t\t\t\t    \t\t</circle> \n\t\t\t\t    \t\t</g>\n\t\t\t\t    \t)    \t\t\t\n\t\t    \t\t}\n\t    \t\t})\n\t\t\t}else if(relations[id].tag.highway && (this.props.option === \"Roads\" || this.props.option === \"Both\")){\n\t    \t\tvar shapes = '';\n\t    \t\trelations[id].members.forEach((element)=>{\n\t    \t\t\tif (element.type === 'way' && element.value) {\n\t\t    \t\t\tvar pts = element.value.map(e => e.join(',')).join(' ');\n\t\t    \t\t\tshapes += `M ${pts}`;\n\t\t    \t\t}\n\t    \t\t})\n\t    \t\tcat = this.getWayCat(relations[id].tag.highway);\n\t    \t\tstyle = styles[cat];\n\t\t    \tcontent[5-cat].push(\n\t\t    \t\t<path d={shapes} fillRule=\"evenodd\" fill={style.color} stroke=\"none\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t    \t\t\t<title>{id}</title>\n\t\t    \t\t</path>\n\t\t    \t)\n\n\t\t\t}\n\t    };\n\n\t\tvar text = [];\n\t\tfor (var key in info){\n\t\t\tvar attr = key.charAt(0).toUpperCase() + key.substr(1).toLowerCase();\n\t\t\ttext.push(\n\t\t\t\t<div className=\"tooltip-info\" key={key}><span className=\"tooltip-key\">{attr}: </span>{info[key]} {attr === \"Footprint\"? decodeURI(\"m%C2%B2\"):\"\"}</div>\n\t\t\t)\n\t\t}\n\n\t\tvar tooltipstyle = {};\n\n\t\tif (this.state.left){\n\t\t\ttooltipstyle = {\n\t\t\t\ttop: \"0\",\n\t\t\t\tleft: \"0\"\n\t\t\t}\n\t\t}else{\n\t\t\ttooltipstyle = {\n\t\t\t\ttop: \"0\",\n\t\t\t\tright: \"0\"\n\t\t\t}\n\t\t}\n\n\t\treturn(\n\t\t\t<div className=\"nollimap\">\n\t\t\t\t<svg version=\"1.1\" viewBox={`0 0 ${width} ${height}`} style = {{width: this.state.width}}>\n\t\t\t\t\t{content}\n\t\t\t\t</svg>\n\t\t\t\t<div className={this.state.tooltip? \"tooltip\":\"hide\"} style={tooltipstyle}>\n\t\t\t\t\t<div className=\"tooltip-title\">Route Details</div>\n\t\t\t\t\t{text}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n\n}\n\nexport default TrafficMap","export function toRad(Value) {\n    /** Converts numeric degrees to radians */\n    return Value * Math.PI / 180;\n}\n\nexport function distSq(x1, y1, x2, y2){\n    return (x2-x1)*(x2-x1) + (y2-y1)*(y2-y1);\n}\n\nexport function\tgetArea(array) {\n\tvar x = array;\n\tvar a = 0;\n\tif (x.length < 3) return 0;\n\tfor (var i = 0; i < (x.length-1); i += 1) {\n\t    a += x[i][0] * x[i+1][1] - x[i+1][0] * x[i][1];\n\t}\n\treturn Math.abs(a * 1.0 / 2);\n}\n\nexport function getDistance(lat1, lon1, lat2, lon2) {\n\tvar R = 6371e3; // metres\n\tvar φ1 = lat1* Math.PI / 180;\n\tvar φ2 = lat2* Math.PI / 180;\n\tvar Δφ = (lat2-lat1)* Math.PI / 180;\n\tvar Δλ = (lon2-lon1)* Math.PI / 180;\n\n\tvar a = Math.sin(Δφ/2) * Math.sin(Δφ/2) +\n\t\tMath.cos(φ1) * Math.cos(φ2) *\n\t\tMath.sin(Δλ/2) * Math.sin(Δλ/2);\n\tvar c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n\n\treturn R * c;\n}\n\nexport function getBoundArea(lat1, lat2, lon1, lon2) {\n\treturn getDistance(lat1, lon1, lat1, lon2) * getDistance(lat1, lon1, lat2, lon1)\n}\n\n\n","import React from \"react\";\nimport { DraggableCore }from 'react-draggable';\nimport {toRad, distSq, getArea} from \"./helpers\";\n\nvar svgIntersections = require('svg-intersections');\nvar intersect = svgIntersections.intersect;\nvar svgShape = svgIntersections.shape;\n\nclass VisibilityMap extends React.Component {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t    this.angle = 2;\n\n\t\tvar buildings = \"\";\n\t\tvar {ways, relations} = this.props;\n\n\t    for (var id in relations) {\n\n\t    \tif (relations[id].tag.building || relations[id].tag[\"buidling:part\"]){\n\t    \t\tvar shapes = '';\n\t    \t\t\n\t    \t\trelations[id].members.forEach((element)=>{\n\t    \t\t\tif (element.type === 'way' && element.value) {\n\t\t    \t\t\tvar pts = element.value.map(e => e.join(',')).join(' ');\n\t\t    \t\t\tshapes += `M ${pts}`;\n\t\t    \t\t}\n\t    \t\t})\n\n\t\t\t    buildings += shapes;\n\t\t    }\n\t    };\n\n\n\t    for (id in ways) {\n\n\t    \tif (ways[id].tag.building){\n\n\t    \t\tvar pts = ways[id].points.map(e => e.join(',')).join(' ');\n\t\t\t    buildings += `M ${pts}`;\n\t\t\t}\n\t    };\n\n\t    buildings += `M 0,0 0,${this.props.height} ${this.props.width},${this.props.height} ${this.props.width},0 Z`\n\n\t    this.buildings = buildings;\n\t    for (var key in this.props.regions){\n\t    \tif(this.props.regions[key] === \"\"){this.props.setRegion(key, `M${this.props.humans[key][0]/this.props.ratio},${this.props.humans[key][1]/this.props.ratio} `)};\n\t    }\n\t    this.state = {\n\t\t\ttooltip: 0,\n\t\t\tshaded: \"\",\n\t\t\tinfo: \"\",\n\t\t\tleft: true,\n\t\t}\n\n\t}\n\n    componentDidMount() {\n        this.interval = setInterval(() => this.updateRegions(), 5);\n    }\n\n    componentWillUnmount() {\n        clearInterval(this.interval);\n    }\n\n    componentDidUpdate(prevProps) {\n    \tif (prevProps.ratio !== this.props.ratio){\n    \t\tfor (var key in this.props.humans){\n    \t\t\tthis.props.setPos(key, [this.props.humans[key][0]*this.props.ratio/prevProps.ratio, this.props.humans[key][1]*this.props.ratio/prevProps.ratio])\n    \t\t}\n    \t}\n    }\n\n    updatePos = (key, e, { deltaX, deltaY }) => {\n\t\tvar newX = (this.props.humans[key][0] + deltaX)/this.props.ratio;\n\t\tvar newY = (this.props.humans[key][1] + deltaY)/this.props.ratio;\n\t\tif (newX > 5 && newX < (this.props.width-5) && newY > 5 && newY < (this.props.height-5)){\n\t\t\tthis.props.setPos(key, [this.props.humans[key][0] + deltaX, this.props.humans[key][1] + deltaY]);\n\t\t}\n\n    }\n\n\thandleStart = (key, e, { deltaX, deltaY }) => {\n\t\tthis.updatePos(key, e, { deltaX, deltaY });\n\t    this.props.setRegion(key, '');\n\t    this.props.setArc(key, -1)\n\t}\n\n\thandleDrag = (key, e, { deltaX, deltaY }) => {\n\t\tthis.updatePos(key, e, { deltaX, deltaY })\n\t}\n\n\thandleStop = (key, e, { deltaX, deltaY }) => {\n\t\tthis.updatePos(key, e, { deltaX, deltaY })\t    \n\t\tthis.props.setRegion(key, `M${this.props.humans[key][0]/this.props.ratio},${this.props.humans[key][1]/this.props.ratio} `);\n\t    this.props.setArc(key, 0)\n\t}\n\n\tshowTooltip = (region, index, e) =>{\n\t\tvar bbox = e.target.getBBox();\n\t\tif ((bbox.x + bbox.width/2) >= (this.props.width/2)){\n\t\t\tthis.setState({left: true})\n\t\t} else {\n\t\t\tthis.setState({left: false})\n\t\t}\n\t\tif (this.props.arcs[index]>=360){\n\t\t\tvar str = region.substring(1, region.length-2).split(\" \");\n\t\t\tvar pts = [];\n\t\t\tvar num = [];\n\t\t\tstr.forEach((substr) => {\n\t\t\t\tnum = substr.split(\",\");\n\t\t\t\tpts.push([parseFloat(num[0]), parseFloat(num[1])]);\n\t\t\t});\n\t\t\tvar area = getArea(pts) / this.props.lengthratio / this.props.lengthratio;\n\t\t\tthis.setState({\n\t\t\t\ttooltip: true,\n\t\t\t\tinfo: `Visible Area: ${area.toFixed(2)} ` + decodeURI(\"m%C2%B2\"),\n\t\t\t\tshaded: region,\n\t\t\t})\n\t\t}else{\t\t\tthis.setState({\n\t\t\t\ttooltip: true,\n\t\t\t\tinfo: \"Calculating area...\",\n\t\t\t})\n\t\t}\n\n\n\t}\n\n\thideTooltip = () =>{\n\n\t\tthis.setState({\n\t\t\ttooltip: false,\n\t\t\tinfo: \"\",\n\t\t\tshaded: \"\",\n\t\t})\n\n\t}\n\n\n\n\tupdateRegions = () => {\n\t\tvar regions = this.props.regions;\n\t\tvar arcs = this.props.arcs;\n\t\tvar changed = false;\n\t\tfor (var key in arcs){\n\t\t\tif (arcs[key]<360 && arcs[key] !== -1){\n\t\t\t\tchanged = true;\n\t\t\t\tvar arc = arcs[key];\n\t\t\t\tvar region = regions[key];\n\t\t\t\tif (region === \"\"){region = `M${this.props.humans[key][0]/this.props.ratio},${this.props.humans[key][1]/this.props.ratio} `}\n\t\t\t\tif (arc + this.angle >=360){\n\t\t\t\t\tvar parts = region.split(\" \");\n\t\t\t\t\tparts.shift();\n\t\t\t\t\tregion = \"M\" + parts.join(\" \") + \"Z\";\n\t\t\t\t}else{\n\t\t\t\t\tvar width = this.props.width;\n\t\t\t\t\tvar height = this.props.height;\n\t\t\t\t\tvar radius = Math.max(width, height);\n\t\t\t\t\tvar x = this.props.humans[key][0]/this.props.ratio;\n\t\t\t\t\tvar y = this.props.humans[key][1]/this.props.ratio;\n\t\t\t\t\tvar intersections = intersect(  \n\t\t\t\t\t\tsvgShape(\"line\", { x1: x + radius * Math.sin(toRad(arc)), y1: y + radius * Math.cos(toRad(arc)), x2: x, y2: y }),\n\t\t\t\t\t\tsvgShape(\"path\", {d:this.buildings})  \n\t\t\t\t\t);\n\n\t\t\t\t\t//var closePt = {x: x + radius * Math.sin(toRad(arc)), y: y + radius * Math.cos(toRad(arc))};\n\t\t\t\t\tvar closePt = intersections.points[0];\n\t\t\t\t\tvar close = distSq(0, 0, width, height);\n\t\t\t\t\tif (closePt){close = distSq(x, y, closePt.x, closePt.y)}\n\n\t\t\t\t\tintersections.points.forEach((point) => {\n\t\t\t\t\t\tif (distSq(x, y, point.x, point.y) < close){\n\t\t\t\t\t\t\tclose = distSq(x, y, point.x, point.y);\n\t\t\t\t\t\t\tclosePt = point;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\tregion = region + `${closePt.x},${closePt.y} `\n\t\t\t\t}\n\t\t\t\tregions[key] = region;\n\t\t\t\tarcs[key] = arc + this.angle;\n\t\t\t}\n\t\t}\n\t\tif(changed){\n\t\t\tthis.props.setRegions(regions);\n\t\t\tthis.props.setArcs(arcs);\n\t\t}\n\t}\n\n\trender() {\n\t\tvar colors = [\"rgba(0, 255, 255, .4)\", \"rgba(255, 139, 0, .4)\", \"rgba(0, 139, 255, .2)\", \"rgba(139, 255, 0, .2)\", \"rgba(255, 0, 139, .2)\", \"rgba(0, 255, 139, .2\"]\n\t\tvar regions = this.props.regions.map((region, index) => <path d={region} fill={colors[0]} stroke=\"red\" strokeWidth=\"1\" key={index} onMouseEnter={this.showTooltip.bind(this, region, index)} onMouseLeave={this.hideTooltip.bind(this)}/>);\n\t\tvar humans = this.props.humans.map((human, index) => <circle cx={human[0]/this.props.ratio} cy={human[1]/this.props.ratio} r=\"3\" fill = \"red\" key={index}/>)\n\t\tvar handles = this.props.humans.map((human, index) => \t\t\t\t\n\t\t\t<DraggableCore\n\t\t\t    onStart={this.handleStart.bind(this, index)}\n\t\t\t    onDrag={this.handleDrag.bind(this, index)}\n\t\t\t    onStop={this.handleStop.bind(this, index)}\n\t\t\t    key={index}>\n\t\t    \t<div className=\"human\" style={{top:human[1]-15, left:human[0]-15}}>\n\t\t    \t</div>\n\t\t    </DraggableCore>\n\t\t)\n\n\t\tvar tooltipstyle = {};\n\n\t\tif (this.state.left){\n\t\t\ttooltipstyle = {\n\t\t\t\ttop: \"0\",\n\t\t\t\tleft: \"0\"\n\t\t\t}\n\t\t}else{\n\t\t\ttooltipstyle = {\n\t\t\t\ttop: \"0\",\n\t\t\t\tright: \"0\"\n\t\t\t}\n\t\t}\n\n\t\treturn(\n\t\t\t<div className=\"visibilitymap\">\n\t\t\t\t<svg version=\"1.1\" viewBox={`0 0 ${this.props.width} ${this.props.height}`} ref={el => (this.container = el)}>\n\t\t\t\t\t<path d={this.state.shaded} fill=\"#7693D3\" stroke=\"none\"/>\n\t\t\t\t\t<path d={this.buildings} fillRule=\"evenodd\" fill=\"rgba(0, 0, 0, .05)\" stroke=\"rgba(60, 60, 60)\" strokeWidth=\".5\"/>\n\t\t\t\t\t<g>\n\t\t\t\t\t{regions}\n\t\t\t\t\t</g>\n\t\t\t\t\t{humans}\n\t\t\t\t</svg>\n\t\t\t\t{handles}\n\t\t\t\t<div className={this.state.tooltip? \"tooltip\":\"hide\"} style={tooltipstyle}>\n\t\t\t\t\t<div className=\"tooltip-title\">{this.state.info}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n\n};\n\nexport default VisibilityMap;","import React from \"react\";\n\nclass POIMap extends React.Component {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\ttooltip: false,\n\t\t\tinfo: {},\n\t\t\tleft: true,\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t}\n\n\n\tshowTooltip = (tags, e) =>{\n\t\tvar bbox = e.target.getBBox();\n\t\tif ((bbox.x + bbox.width/2) >= (this.props.width/2)){\n\t\t\tthis.setState({left: true})\n\t\t} else {\n\t\t\tthis.setState({left: false})\n\t\t}\n\t\tthis.setState({\n\t\t\ttooltip: true,\n\t\t\tinfo: tags,\n\t\t})\n\n\t}\n\n\thideTooltip = () =>{\n\n\t\tthis.setState({\n\t\t\ttooltip: false,\n\t\t\tinfo: {}\n\t\t})\n\n\t}\n\n\trender() {\n\t\tlet content = [];\n\t\tvar {width, height} = this.props;\n\t\tvar selected = this.props.selected;\n\t\tvar longLinks = this.props.longLinks;\n\t\tvar shortLinks = this.props.shortLinks;\n\t\tvar info = this.state.info;\n\t\t\n\t\tif(this.props.option === \"Short Links\"){\n\t\t\tcontent.push(shortLinks.map((link) => <line x1={link.x1} y1={link.y1} x2={link.x2} y2={link.y2} stroke=\"rgba(205, 0, 255, .3)\" strokeWidth=\".5\"key={`${link.x1} ${link.y1} ${link.x2} ${link.y2}`}/>));\n\t\t}\n\t\tif(this.props.option === \"Long Links\"){\n\t\t\tcontent.push(longLinks.map((link) => <line x1={link.x1} y1={link.y1} x2={link.x2} y2={link.y2} stroke=\"rgba(205, 0, 255, .3)\" strokeWidth=\".5\"key={`${link.x1} ${link.y1} ${link.x2} ${link.y2}`}/>));\n\t\t}\n\t\t\n\t\tcontent.push(selected.map((node) => <circle cx={node.x} cy={node.y} r={2+node.shortLink/20*this.props.lengthratio} fill=\"blue\" key={`${node.x} ${node.y}`} onMouseEnter={this.showTooltip.bind(this, node.tag)} onMouseLeave={this.hideTooltip.bind(this)}/>));\n\t\t\n\t\tvar text = [];\n\t\tfor (var key in info){\n\t\t\tif(!(key === \"building\" && info[key] === \"yes\")){\n\t\t\t\tvar attr = key.charAt(0).toUpperCase() + key.substr(1).toLowerCase();\n\t\t\t\ttext.push(\n\t\t\t\t\t<div className=\"tooltip-info\" key={key}><span className=\"tooltip-key\">{attr}: </span>{info[key]} {attr === \"Footprint\"? decodeURI(\"m%C2%B2\"):\"\"}</div>\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\n\t\tvar tooltipstyle = {};\n\n\t\tif (this.state.left){\n\t\t\ttooltipstyle = {\n\t\t\t\ttop: \"0\",\n\t\t\t\tleft: \"0\"\n\t\t\t}\n\t\t}else{\n\t\t\ttooltipstyle = {\n\t\t\t\ttop: \"0\",\n\t\t\t\tright: \"0\"\n\t\t\t}\n\t\t}\n\t\treturn(\n\t\t\t<div className=\"nollimap\">\n\t\t\t\t<svg version=\"1.1\" viewBox={`0 0 ${width} ${height}`} style = {{width: this.state.width}}>\n\t\t\t\t\t{content}\n\t\t\t\t</svg>\n\t\t\t\t<div className={this.state.tooltip? \"tooltip\":\"hide\"} style={tooltipstyle}>\n\t\t\t\t\t<div className=\"tooltip-title\">Node Details</div>\n\t\t\t\t\t{text}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n\n}\n\nexport default POIMap","import React from \"react\";\n\nclass NaturalElements extends React.Component {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\ttooltip: false,\n\t\t\tinfo: {},\n\t\t\tleft: true,\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t}\n\n\tgetElementCat = (tag) => {\n\t\t\n\t\tconst water = {\n\t\t\t\"water\": [],\n\t\t\t\"waterway\":[\"riverbank\"],\n\t\t\t\"natural\": [\"water\", \"wetland\", \"glacier\", \"bay\", \"strait\"],\n\t\t\t\"landuse\": [\"basin\", \"reservoir\"],\n\t\t\t\"leisure\": [\"water_park\", \"swimming_pool\", \"swimming_area\", \"marina\", \"fishing\"]\n\t\t}\n\n\t\tconst green = {\n\t\t\t\"natural\":[\"wood\", \"tree_row\", \"scrub\", \"heath\", \"moor\", \"grassland\"],\n\t\t\t\"landuse\":[\"allotments\", \"farmland\", \"farmyard\", \"forest\", \"grass\", \"greenfield\", \"greenhouse_horticulture\", \"meadow\", \"orchard\", \"plant_nursery\", \"recreation_ground\", \"village_green\", \"vineyard\"],\n\t\t\t\"leisure\":[\"park\", \"garden\", \"golf_course\", \"dog_park\", \"pitch\", \"track\"]\n\t\t}\n\n\t\tfor (var key in water) {\n\t\t\tif(water[key].indexOf(tag[key]) != -1 || tag[key] != null && water[key].length === 0){\n\t\t\t\treturn \"water\";\n\t\t\t}\n\t\t};\n\n\t\tfor (key in green) {\n\t\t\tif(green[key].indexOf(tag[key]) != -1 || tag[key] && green[key].length === 0){\n\t\t\t\treturn \"green\";\n\t\t\t}\n\t\t};\n\n\t\treturn \"none\";\n\t}\n\n\n\tshowTooltip = (tags, e) =>{\n\t\tvar bbox = e.target.getBBox();\n\t\tif ((bbox.x + bbox.width/2) >= (this.props.width/2)){\n\t\t\tthis.setState({left: true})\n\t\t} else {\n\t\t\tthis.setState({left: false})\n\t\t}\n\t\tthis.setState({\n\t\t\ttooltip: true,\n\t\t\tinfo: tags,\n\t\t})\n\n\t}\n\n\thideTooltip = () =>{\n\n\t\tthis.setState({\n\t\t\ttooltip: false,\n\t\t\tinfo: {}\n\t\t})\n\n\t}\n\n\trender() {\n\t\tlet content = [];\n\t\tvar {width, height, nodes, ways, relations} = this.props;\n\t\tvar info = this.state.info;\n\t\tconst styles = [\n\t\t\t{\n\t\t\t\tfill: \"#7693d3\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfill: \"rgba(52, 168, 0, .4)\"\n\t\t\t}\n\t\t];\n\n\t\tvar cat = \"none\";\n\t\tvar style = -1;\n\n\t    for (var id in relations) {\n\t\t\tcat = this.getElementCat(relations[id].tag);\n\t\t\tstyle = -1;\n\t\t\tif (cat === \"water\"){style = 0}else if (cat === \"green\"){style = 1}\n\t\t\tif (style != -1){\n\t    \t\tvar shapes = '';\n\t    \t\trelations[id].members.forEach((element)=>{\n\t    \t\t\tif (element.type === 'way' && element.value) {\n\t\t    \t\t\tvar pts = element.value.map(e => e.join(',')).join(' ');\n\t\t    \t\t\tshapes += `M ${pts}`;\n\t\t    \t\t}\n\t    \t\t})\n\t    \t\tif (cat === \"water\"){\n\t\t\t    \tcontent.push(\n\t\t\t    \t\t<path d={shapes} fillRule=\"evenodd\" fill={styles[style].fill} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t    \t\t\t<title>{id}</title>\n\t\t\t    \t\t</path>\n\t\t\t    \t);\n\t\t\t    }else{\n\t\t\t    \tcontent.unshift(\n\t\t\t    \t\t<path d={shapes} fillRule=\"evenodd\" fill={styles[style].fill} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t    \t\t\t<title>{id}</title>\n\t\t\t    \t\t</path>\n\t\t\t    \t);\n\t\t\t    }\n\t\t\t}\n\t    };\n\n\n\t    for (id in ways) {\n\t\t\tcat = this.getElementCat(ways[id].tag);\n\t\t\tstyle = -1;\n\t\t\tif (cat === \"water\"){style = 0}else if (cat === \"green\"){style = 1}\n\t\t\tif (style != -1){\n\t\t\t\tvar pts = ways[id].points.map(e => e.join(',')).join(' ');\n\t\t\t\tif (cat === \"water\"){\n\t\t\t    \tcontent.push(\n\t\t\t    \t\t<polygon points={pts} fill={styles[style].fill} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, ways[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}/>\n\t\t\t    \t)\n\t\t\t    }else{\n\t\t\t    \tcontent.unshift(\n\t\t\t    \t\t<polygon points={pts} fill={styles[style].fill} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, ways[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}/>\n\t\t\t    \t)\t\t\t    \t\n\t\t\t    }\n\t\t\t}\n\t    };\n\n\t\tvar text = [];\n\t\tfor (var key in info){\n\t\t\tif(!(key === \"building\" && info[key] === \"yes\")){\n\t\t\t\tvar attr = key.charAt(0).toUpperCase() + key.substr(1).toLowerCase();\n\t\t\t\ttext.push(\n\t\t\t\t\t<div className=\"tooltip-info\" key={key}><span className=\"tooltip-key\">{attr}: </span>{info[key]} {attr === \"Footprint\"? decodeURI(\"m%C2%B2\"):\"\"}</div>\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\n\t\tvar tooltipstyle = {};\n\n\t\tif (this.state.left){\n\t\t\ttooltipstyle = {\n\t\t\t\ttop: \"0\",\n\t\t\t\tleft: \"0\"\n\t\t\t}\n\t\t}else{\n\t\t\ttooltipstyle = {\n\t\t\t\ttop: \"0\",\n\t\t\t\tright: \"0\"\n\t\t\t}\n\t\t}\n\t\treturn(\n\t\t\t<div className=\"nollimap\">\n\t\t\t\t<svg version=\"1.1\" viewBox={`0 0 ${width} ${height}`} style = {{width: this.state.width}}>\n\t\t\t\t\t{content}\n\t\t\t\t</svg>\n\t\t\t\t<div className={this.state.tooltip? \"tooltip\":\"hide\"} style={tooltipstyle}>\n\t\t\t\t\t<div className=\"tooltip-title\">Details</div>\n\t\t\t\t\t{text}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n\n}\n\nexport default NaturalElements;","import React from \"react\";\nimport '../scss/analysis.scss';\nimport NolliMap from \"./NolliMap\";\nimport TrafficMap from \"./TrafficMap\";\nimport VisibilityMap from \"./VisibilityMap2\";\nimport POIMap from \"./POIMap\";\nimport NaturalElements from \"./NaturalElements\";\nimport {distSq} from \"./helpers\";\n\nclass D3Layers extends React.Component {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tloading: 0,\n\t\t\twidth: 1000,\n\t\t\theight: 0,\n\t\t\tnodes: {},\n\t\t\tways: {},\n\t\t\trelations: {},\n\t\t\thumans: [[500,250]],\n\t\t\tarcs:[0],\n\t\t\tregions:[\"\"],\n\t\t\toptions : {\n\t\t\t\t\"POI Map\": \"Short Links\",\n\t\t\t\t\"Nolli Map\": \"None\",\n\t\t\t\t\"Visibility\": \"Both\",\n\t\t\t\t\"Traffic\": \"Both\",\n\t\t\t\t\"Natural Elements\": \"\",\n\t\t\t},\n\t\t\tpixratio: 1,\n\t\t}\n\t}\n\t\n\tcomponentDidMount() {\n\t\tthis.updateStates();\n    \twindow.addEventListener(\"resize\", this.resize);\n\t}\n\n  \tcomponentWillUnmount() {\n    \twindow.removeEventListener(\"resize\", this.resize);\n  \t}\n\n\tcomponentDidUpdate(prevProps) {\n\t\tif(this.props.rawdata !== prevProps.rawdata){\n\t\t\tthis.resetLoading();\n\t\t\tthis.updateStates();\n\t\t}\n\t}\n\n\tresize = () => {\n\t\tthis.setState({\n\t\t\tpixratio: this.container.offsetWidth/this.state.width\n\t\t});\n\t}\n\n\tgetDistance = (lat1, lon1, lat2, lon2) => {\n\t  \tvar R = 6371e3; // metres\n\t\tvar φ1 = lat1* Math.PI / 180;\n\t\tvar φ2 = lat2* Math.PI / 180;\n\t\tvar Δφ = (lat2-lat1)* Math.PI / 180;\n\t\tvar Δλ = (lon2-lon1)* Math.PI / 180;\n\n\t\tvar a = Math.sin(Δφ/2) * Math.sin(Δφ/2) +\n\t\t        Math.cos(φ1) * Math.cos(φ2) *\n\t\t        Math.sin(Δλ/2) * Math.sin(Δλ/2);\n\t\tvar c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n\n\t\treturn R * c;\n\t}\n\n\tgetDirDistance = (lat1, lon1, lat2, lon2) => {\n\t\tif (lat2 <= lat1 && lon2 >= lon1) {\n\t\t\treturn this.getDistance(lat1, lon1, lat2, lon2);\n\t\t}else{\n\t\t\treturn -this.getDistance(lat1, lon1, lat2, lon2);\n\t\t}\n\t}\n\t\n\tgetBoundArea = (lat1, lat2, lon1, lon2) => {\n\t\treturn this.getDistance(lat1, lon1, lat1, lon2) * this.getDistance(lat1, lon1, lat2, lon1)\n\t}\n\n\tcheckSingle = (data) => {\n\t\tif (Array.isArray(data)){\n\t\t\treturn data;\n\t\t}else if(data){\n\t\t\treturn [data];\n\t\t}else{\n\t\t\treturn [];\n\t\t}\n\t}\n\n\tgetWayPoints = (data) => {\n\t\tvar pts = '';\n\t\tdata.forEach((node) =>{\n\t\t\tpts += `${node.x},${node.y} `\n\t    })\n\t    return pts;\n\t}\n\n\tmapPix = (x, a, b, c, d) => {\n\t\treturn c + (x-a) * (d-c) / (b-a)\n\t}\n\n\tgetArea(array) {\n\t    var x = array;\n\t    var a = 0;\n\t    if (x.length < 3) return 0;\n\t    for (var i = 0; i < (x.length-1); i += 1) {\n\t        a += x[i][0] * x[i+1][1] - x[i+1][0] * x[i][1];\n\t    }\n\t    return Math.abs(a * 1.0 / 2);\n\t}\n\n\taddLoading = (value) => {\n\t\tthis.setState({\n\t\t\tloading: this.state.loading + value\n\t\t})\n\t}\n\n\tresetLoading = () => {\n\t\tthis.setState({\n\t\t\tloading: 0\n\t\t})\n\t}\n\n\tupdateStates = () => {\n\t\t\tconst {nlat, slat, wlng, elng, rawdata} = this.props;\n\t\t\tconst width = this.state.width\n\t\t\tconst ratio = width/this.getDistance(nlat, wlng, nlat, elng);\n\t\t\tconst height = this.getDistance(nlat, wlng, slat, wlng)*ratio;\n\t\t\tvar nodes = {};\n\t\t\tvar ways = {};\n\t\t\tvar relations = {};\n\n\t\t\tif (rawdata){\n\t\t\t\tvar convert = require('xml-js');\n\t\t\t\tvar result = convert.xml2js(rawdata, {compact: true, spaces: 4});\n\n\t\t\t\tvar osmNode = this.checkSingle(result.osm.node);\n\t\t\t\tvar osmWay = this.checkSingle(result.osm.way);\n\t\t\t\tvar osmRelation = this.checkSingle(result.osm.relation);\n\t\t\t\t\n\t\t\t\tosmNode.forEach((element) => {\n\t\t\t\t\tvar id = element._attributes.id;\n\t\t\t\t\tvar nodeTag = this.checkSingle(element.tag);\n\n\t\t\t\t\tnodes[id] = {element: element};\n\t\t\t\t\tnodes[id].x = this.mapPix(element._attributes.lon, wlng, elng, 0, width);\n\t\t\t\t\tnodes[id].y = this.mapPix(element._attributes.lat, nlat, slat, 0, height);\n\t\t\t\t\tnodes[id].tag = {};\n\t\t\t\t\tnodeTag.forEach((tag) => {\n\t\t\t\t\t\tnodes[id].tag[tag._attributes.k] = tag._attributes.v\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tosmWay.forEach((element) => {\n\t\t\t\t\tvar id = element._attributes.id;\n\t\t\t\t\tvar wayNd = this.checkSingle(element.nd);\n\t\t\t\t\tvar wayTag = this.checkSingle(element.tag);\n\n\t\t\t\t\tways[id] = {element: element};\n\t\t\t\t\tways[id].children = [];\n\t\t\t\t\tways[id].points = []\n\t\t\t\t\tways[id].tag = {};\n\t\t\t\t\twayNd.forEach((nd) => {\n\t\t\t\t\t\tways[id].children.push(nodes[nd._attributes.ref]);\n\t\t\t\t\t\tways[id].points.push([nodes[nd._attributes.ref].x, nodes[nd._attributes.ref].y]);\n\t\t\t\t\t});\n\t\t\t\t\twayTag.forEach((tag) => {\n\t\t\t\t\t\tways[id].tag[tag._attributes.k] = tag._attributes.v;\n\t\t\t\t\t});\n\n\t\t\t\t\tif (ways[id].tag.building){\n\t\t\t\t\t\tvar area = \tthis.getArea(ways[id].points) / ratio / ratio;\n\t\t\t\t\t\tways[id].footprint = area;\n\t\t\t\t\t\tways[id].tag.footprint = area.toFixed(2)\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tosmRelation.forEach((element) => {\n\t\t\t\t\tvar id = element._attributes.id;\n\t\t\t\t\tvar relationMember = this.checkSingle(element.member);\n\t\t\t\t\tvar relationTag = this.checkSingle(element.tag);\n\n\t\t\t\t\trelations[id] = {element: element};\n\t\t\t\t\trelations[id].members = []\n\t\t\t\t\trelations[id].tag = {};\n\t\t\t\t\trelationMember.forEach((member) => {\n\t\t\t\t\t\tif (member._attributes.type === 'way' && ways[member._attributes.ref]){\n\t\t\t\t\t\t\trelations[id].members.push({type: 'way', value: ways[member._attributes.ref].points, role: member._attributes.role});\n\t\t\t\t\t\t}else if (member._attributes.type === 'node' && nodes[member._attributes.ref]){\n\t\t\t\t\t\t\trelations[id].members.push({type: 'node', value: [nodes[member._attributes.ref].x, nodes[member._attributes.ref].y], role: member._attributes.role});\n\t\t\t\t\t\t}else if (member._attributes.type === 'relation' && relations[member._attributes.ref]){\n\t\t\t\t\t\t\trelations[id].members.push({type:'relation', value: relations[member._attributes.ref].members, role: member._attributes.role});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\trelationTag.forEach((tag) => {\n\t\t\t\t\t\trelations[id].tag[tag._attributes.k] = tag._attributes.v;\n\t\t\t\t\t});\n\t    \t\t\tif (relations[id].tag.building || relations[id].tag[\"buidling:part\"]){\n\t    \t\t\t\tvar area = 0;\n\t\t\t\t\t\trelations[id].members.forEach((member) => {\n\t\t\t\t\t\t\tif (member.role === \"outer\"){\n\t\t\t\t\t\t\t\tarea += this.getArea(member.value);\n\t\t\t\t\t\t\t}else if (member.role === \"outer\"){\n\t\t\t\t\t\t\t\tarea -= this.getArea(member.value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tarea = area / ratio / ratio;\n\t\t\t\t\t\trelations[id].footprint = area;\t\t\t\t\t\t\n\t\t\t\t\t\trelations[id].tag.footprint = area.toFixed(2);\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tvar selected = [];\n\t\t\tvar shortLinks = [];\n\t\t\tvar longLinks = []\n\t\t\tvar except = [\"waste_basket\", \"waste_disposal\", \"waste_transfer_station\", \"recycling\"]\n\n\t    \tfor (var id in nodes) {\n\t    \t\tif (nodes[id].tag[\"amenity\"] != null && except.indexOf(nodes[id].tag[\"amenity\"]) === -1){\n\t    \t\t\tnodes[id].longLink = 0;\n\t    \t\t\tnodes[id].shortLink = 0;\n\t\t\t\t\tselected.push(nodes[id]);\n\t\t\t\t}\n\t    \t};\n\n\t    \tfor (var i=0; i<selected.length; i++) {\n\t    \t\tfor (var j = i+1; j<selected.length; j++){\n\t    \t\t\tvar linkLengh = Math.sqrt(distSq(selected[i].x, selected[i].y, selected[j].x, selected[j].y))/ratio;\n\t\t\t\t\tif( linkLengh <= 150){\n\t\t\t\t\t\tselected[i].longLink ++;\n\t\t\t\t\t\tselected[j].longLink ++;\n\t\t\t\t\t\tlongLinks.push({\n\t\t\t\t\t\t\tx1:selected[i].x, \n\t\t\t\t\t\t\ty1:selected[i].y, \n\t\t\t\t\t\t\tx2:selected[j].x, \n\t\t\t\t\t\t\ty2:selected[j].y\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif(linkLengh <= 100){\n\t\t\t\t\t\t\tselected[i].shortLink ++;\n\t\t\t\t\t\t\tselected[j].shortLink ++;\n\t\t\t\t\t\t\tshortLinks.push({\n\t\t\t\t\t\t\t\tx1:selected[i].x, \n\t\t\t\t\t\t\t\ty1:selected[i].y, \n\t\t\t\t\t\t\t\tx2:selected[j].x, \n\t\t\t\t\t\t\t\ty2:selected[j].y\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t    \t\t}\n\t    \t}\n\n\t\n\t\t\tthis.ratio = ratio;\n\t\t\tthis.selected = selected;\n\t\t\tthis.longLinks = longLinks;\n\t\t\tthis.shortLinks = shortLinks;\n\n\t\t\tthis.setState({\n\t\t\t\theight: height,\n\t\t\t\tnodes: nodes,\n\t\t\t\tways: ways,\n\t\t\t\trelations: relations,\n\t\t\t\thumans: [[Math.random() * width * this.container.offsetWidth/width, Math.random() * height * this.container.offsetWidth/width]],\n\t\t\t\tpixratio:this.container.offsetWidth/width,\n\t\t\t});\n\t\t\t\n\t\t\tthis.addLoading(50);\n\n\t}\n\n\tgetOptions = () => {\n\t\tvar data = require(\"./map-options.json\")[this.props.selected];\n\t\tvar selectedOption = this.state.options[this.props.selected];\n\t\tvar content = [];\n\t\tif (data) {\n\t\t\tcontent.push(\n\t\t\t\t<div className=\"options-title\" key=\"title\">\n\t\t\t\t\t{data.title}\n\t\t\t\t</div>\n\t\t\t)\n\t\t\tdata.options.forEach((option) => {\n\t\t\t\tcontent.push(\n\t\t\t\t\t<div className={option === selectedOption? \"options-item selected\" : \"options-item\"} onClick={()=>{this.setOption(option)}} key={option}>\n\t\t\t\t\t\t{option}\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t})\n\t\t}\n\t\tif (this.props.selected === \"Visibility\"){\n\t\t\tcontent.push(\n\t\t\t\t<div className=\"options-title\" key=\"title\">\n\t\t\t\t\tYou can add up to 5 viewing points:\n\t\t\t\t</div>\n\t\t\t)\n\t\t\tcontent.push(\n\t\t\t\t<button className=\"options-button\" onClick={this.addHuman} key=\"add\" disabled={this.state.arcs.length >= 5}>\n\t\t\t\t\tAdd a Point\n\t\t\t\t</button>\n\t\t\t)\n\t\t\tcontent.push(\n\t\t\t\t<button className=\"options-button\" onClick={this.deleteHuman} key=\"delete\" disabled={this.state.arcs.length <= 1}>\n\t\t\t\t\tDelete a Point\n\t\t\t\t</button>\n\t\t\t)\n\t\t}\n\t\treturn content;\n\t}\n\n\tsetOption = (option) => {\n\t\tvar newoptions = this.state.options;\n\t\tnewoptions[this.props.selected] = option;\n\t\tthis.setState({options:newoptions});\n\t}\n\n\tsetPos = (num, position) => {\n\t\tvar newhumans = this.state.humans;\n\t\tnewhumans[num] = position\n\t\tthis.setState({humans: newhumans});\n\t}\n\n\tsetArc = (num, value) => {\n\t\tvar newarcs = this.state.arcs;\n\t\tnewarcs[num] = value\n\t\tthis.setState({arc: newarcs});\n\t}\n\n\tsetRegion = (num, value) => {\n\t\tvar newregions = this.state.regions\n\t\tnewregions[num] = value\n\t\tthis.setState({regions: newregions});\n\t}\n\n\tsetArcs = (value) => {\n\t\tthis.setState({arc: value});\n\t}\n\n\tsetRegions = (value) => {\n\t\tthis.setState({regions: value});\n\t}\n\n\taddHuman = () => {\n\t\tvar newhumans = this.state.humans;\n\t\tvar newarcs = this.state.arcs;\n\t\tvar newregions = this.state.regions;\n\t\tnewhumans.push([Math.random() * this.state.width * this.state.pixratio, Math.random() * this.state.height * this.state.pixratio]);\n\t\tnewarcs.push(0);\n\t\tnewregions.push(\"\");\n\t\tthis.setState({\n\t\t\thumans: newhumans,\n\t\t\tarcs: newarcs,\n\t\t\tregions: newregions,\n\t\t});\n\t}\n\n\tdeleteHuman = () => {\n\t\tvar newhumans = this.state.humans;\n\t\tvar newarcs = this.state.arcs;\n\t\tvar newregions = this.state.regions;\n\t\tnewhumans.pop();\n\t\tnewarcs.pop();\n\t\tnewregions.pop();\n\t\tthis.setState({\n\t\t\thumans: newhumans,\n\t\t\tarcs: newarcs,\n\t\t\tregions: newregions,\n\t\t});\n\t}\n\n\trender() {\n\t\tvar optionbar = this.getOptions();\n\t\tvar {ways, nodes, relations, width, height} = this.state;\n\t\tvar maps = {};\n\t\tvar ovl = [];\n\n\t\tmaps[\"POI Map\"] = \n\t\t\t<POIMap\n\t\t\t\tnodes = {nodes}\n\t\t\t\tways = {ways}\n\t\t\t\trelations = {relations}\n\t\t\t\twidth = {width}\n\t\t\t\theight = {height}\n\t\t\t\tgetWayPoints = {this.getWayPoints}\n\t\t\t\taddLoading = {this.addLoading}\n\t\t\t\tnlat = {this.props.nlat}\n\t\t\t\tslat = {this.props.slat}\n\t\t\t\twlng = {this.props.wlng}\n\t\t\t\telng = {this.props.elng}\n\t\t\t\toption = {this.state.options[\"POI Map\"]}\n\t\t\t\tkey = \"POI Map\"\n\t\t\t\tlengthratio = {this.ratio}\n\t\t\t\tselected = {this.selected}\n\t\t\t\tlongLinks = {this.longLinks}\n\t\t\t\tshortLinks = {this.shortLinks}\n\t\t\t/>;\n\n\t\tmaps[\"Nolli Map\"] = \n\t\t\t<NolliMap\n\t\t\t\tnodes = {nodes}\n\t\t\t\tways = {ways}\n\t\t\t\trelations = {relations}\n\t\t\t\twidth = {width}\n\t\t\t\theight = {height}\n\t\t\t\tgetWayPoints = {this.getWayPoints}\n\t\t\t\taddLoading = {this.addLoading}\n\t\t\t\tnlat = {this.props.nlat}\n\t\t\t\tslat = {this.props.slat}\n\t\t\t\twlng = {this.props.wlng}\n\t\t\t\telng = {this.props.elng}\n\t\t\t\toption = {this.state.options[\"Nolli Map\"]}\n\t\t\t\tlengthratio = {this.ratio}\n\t\t\t\tkey = \"Nolli Map\"\n\t\t\t/>;\n\n\t\tmaps[\"Visibility\"] = \n\t\t\t<VisibilityMap\n\t\t\t\tnodes = {nodes}\n\t\t\t\tways = {ways}\n\t\t\t\trelations = {relations}\n\t\t\t\twidth = {width}\n\t\t\t\theight = {height}\n\t\t\t\thumans = {this.state.humans}\n\t\t\t\tarcs = {this.state.arcs}\n\t\t\t\tregions = {this.state.regions}\n\t\t\t\tsetPos = {this.setPos}\n\t\t\t\tsetArc = {this.setArc}\n\t\t\t\tsetRegion = {this.setRegion}\n\t\t\t\tsetArcs = {this.setArcs}\n\t\t\t\tsetRegions = {this.setRegions}\n\t\t\t\taddLoading = {this.addLoading}\n\t\t\t\tnlat = {this.props.nlat}\n\t\t\t\tslat = {this.props.slat}\n\t\t\t\twlng = {this.props.wlng}\n\t\t\t\telng = {this.props.elng}\n\t\t\t\tkey = \"Visibility\"\n\t\t\t\toption = {this.state.options[\"Traffic\"]}\n\t\t\t\tratio = {this.state.pixratio}\n\t\t\t\tlengthratio = {this.ratio}\n\t\t\t/>;\n\n\t\tmaps[\"Traffic\"] = \n\t\t\t<TrafficMap\n\t\t\t\tnodes = {nodes}\n\t\t\t\tways = {ways}\n\t\t\t\trelations = {relations}\n\t\t\t\twidth = {width}\n\t\t\t\theight = {height}\n\t\t\t\tgetWayPoints = {this.getWayPoints}\n\t\t\t\taddLoading = {this.addLoading}\n\t\t\t\tnlat = {this.props.nlat}\n\t\t\t\tslat = {this.props.slat}\n\t\t\t\twlng = {this.props.wlng}\n\t\t\t\telng = {this.props.elng}\n\t\t\t\tkey = \"Traffic\"\n\t\t\t\toption = {this.state.options[\"Traffic\"]}\n\t\t\t\tlengthratio = {this.ratio}\n\t\t\t/>;\n\n\t\tmaps[\"Natural Elements\"] = \n\t\t\t<NaturalElements\n\t\t\t\tnodes = {nodes}\n\t\t\t\tways = {ways}\n\t\t\t\trelations = {relations}\n\t\t\t\twidth = {width}\n\t\t\t\theight = {height}\n\t\t\t\tgetWayPoints = {this.getWayPoints}\n\t\t\t\taddLoading = {this.addLoading}\n\t\t\t\tnlat = {this.props.nlat}\n\t\t\t\tslat = {this.props.slat}\n\t\t\t\twlng = {this.props.wlng}\n\t\t\t\telng = {this.props.elng}\n\t\t\t\toption = {this.state.options[\"Natural Elements\"]}\n\t\t\t\tkey = \"Natural Elements\"\n\t\t\t/>;\n\n\t\tfor (var key in this.props.added){\n\t\t\tif (this.props.added[key]){\n\t\t\t\tovl.unshift(maps[key]);\n\t\t\t}\n\t\t}\n\n\n\t\treturn(\n\t\t\t<div className=\"maps-wrapper\" ref={el => (this.container = el)}>\n\t\t\t\t<div className=\"options\">\n\t\t\t\t\t{optionbar}\n\t\t\t\t</div>\n\t\t\t\t<div style={{width:\"100%\", height:`${this.state.height*this.state.pixratio + 200}px`}}/>\n\n\t\t\t\t<div className={this.state.loading === 100?\"hide\":\"loading\"}>\n\t\t\t\t\t<svg version=\"1.1\" x=\"0px\" y=\"0px\"viewBox=\"0 0 110 110\">\n\t\t\t\t\t\t<path id=\"r5\" d=\"M37.2,39.9l5,8.7l19.1-11c1-0.6,1.3-1.8,0.7-2.7l-5-8.7l-19.1,11\n\t\t\t\t\t\t\tC37,37.8,36.6,39,37.2,39.9z\"/>\n\t\t\t\t\t\t<path id=\"r3\" d=\"M108,70.6c1-0.6,1.3-1.8,0.7-2.7l-31-53.7l-17.3,10l5,8.7c1.7,2.9,0.7,6.5-2.2,8.2\n\t\t\t\t\t\t\tl-19.1,11l4,6.9l12.1-7c2.9-1.7,6.5-0.7,8.2,2.2l17,29.4L108,70.6z\"/>\n\t\t\t\t\t\t<path id=\"r7\" d=\"M62.3,55.5l-12.1,7l18,31.2l13.9-8L65,56.2C64.5,55.2,63.3,54.9,62.3,55.5z\"/>\n\t\t\t\t\t\t<rect id=\"r6\" x=\"16.6\" y=\"60.5\" transform=\"matrix(0.866 -0.5 0.5 0.866 -28.17 23.9398)\" width=\"28\" height=\"8\"/>\n\t\t\t\t\t\t<path id=\"r1\" d=\"M58.4,20.8l17.3-10l-5-8.7c-0.6-1-1.8-1.3-2.7-0.7l-15.6,9L58.4,20.8z\"/>\n\t\t\t\t\t\t<path id=\"r2\" d=\"M42.2,108.6l22.5-13l-18-31.2l-24.2,14l17,29.4C40,108.9,41.2,109.2,42.2,108.6z\"/>\n\t\t\t\t\t\t<path id=\"r4\" d=\"M2.2,39.4c-1,0.6-1.3,1.8-0.7,2.7l13,22.5l24.2-14l-5-8.7c-1.7-2.9-0.7-6.5,2.2-8.2\n\t\t\t\t\t\t\tl19.1-11l-6-10.4L2.2,39.4z\"/>\n\t\t\t\t\t</svg>\n\t\t\t\t\tLoading\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t{this.props.selected === \"Overlay\"?\n\t\t\t\t\tovl\n\t\t\t\t\t:\n\t\t\t\t\tmaps[this.props.selected]\n\t\t\t\t}\n\n\t\t\t</div>\n\t\t)\n\t}\n\n}\n\nexport default D3Layers;","import React from \"react\";\nimport {withRouter} from \"react-router\";\nimport { Link } from \"react-router-dom\";\nimport '../scss/sidebar.scss'\n\nclass Sidebar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    \tmenu: this.props.layers,\n    \tadded: this.props.added,\n    \tselected: this.props.selected,\n    }\n  };\n\n  changeMap = (key) => {\n    this.props.foldSidebar();\n  \tthis.props.changeMap(key);\n  }\n\n  addOverlay = (e, title) => {\n  \te.stopPropagation();\n  \tthis.props.addOverlay(title);\n  }\n\n  removeOverlay = (e, title) => {\n  \te.stopPropagation();\n  \tthis.props.removeOverlay(title);\n  }\n\n  handleUpdate = (evt, updated) => {\n    console.log(evt); // tslint:disable-line\n    console.log(updated);\n  } // tslint:disable-line\n\n  renderMenu = () => {\n    const {layers, added, selected} = this.props;\n\n    let content = [];\n    layers.forEach((record, index) => {\n      content.push(\n\t\t      <div className={record === selected?\"menu-item selected\":\"menu-item\"} key={`${record}`} onClick={() => this.changeMap(record)}>\n            <img className = \"menu-icon\" src={`${process.env.PUBLIC_URL}/image/icon/${record}.svg`} alt='menu'/>\n\t\t      \t<div className = \"menu-title\">\n\t\t        \t{record}\n\t\t        </div>\n\t\t        {added[record]?\n              <img className = \"check-box\" src={`${process.env.PUBLIC_URL}/image/icon/check.svg`} onClick={(e) => this.removeOverlay(e, record)} alt='add'/>\n    \t\t\t\t:\n              <img className = \"check-box\" src={`${process.env.PUBLIC_URL}/image/icon/uncheck.svg`} onClick={(e) => this.addOverlay(e, record)} alt='delete'/>\n    \t\t\t\t}\n\t\t      </div>\n      );\n    });\n    return content;\n  }\n\n  render() {\n\tvar content = this.renderMenu();\n    var count = 0;\n    for (var key in this.props.added){\n      if (this.props.added[key]){count ++};\n    }\n    return (\n      <div className=\"menu\" style={this.props.style}>\n        <div className=\"footer-wrapper\">\n          <img className = \"logo\" src={process.env.PUBLIC_URL + '/image/infomap-logo.svg'} alt='infomap'/>\n      \t\t<Link to={`${process.env.PUBLIC_URL}/${this.props.longitude}/${this.props.latitude}`}>\n      \t\t\t<div className = \"back\">\n              <img className = \"back-icon\" src={process.env.PUBLIC_URL + '/image/icon/back.svg'} alt='back'/>\n              Change Location\n            </div>\n      \t\t</Link>\n      \t\t{content}\n          <div className='divider'/>\n          <div className={this.props.selected === \"Overlay\"?\"menu-item selected\":\"menu-item\"} onClick={() => this.changeMap(\"Overlay\")}>\n            <img className = \"menu-icon\" src={`${process.env.PUBLIC_URL}/image/icon/Overlay.svg`} alt='menu'/>\n  \t      \t<div className = \"menu-title\">\n  \t        \tOverlay\n  \t        </div>\n            <div className = \"number\">{count}</div>\n          </div>\n          <div className=\"push\"/>\n        </div>\n        <div className='sidebar-footer'>\n          <div className='footer-tab'>About</div>\n          <div className='footer-tab'>Help</div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Sidebar);","import React from \"react\";\nimport axios from 'axios';\nimport D3Layers from \"./D3Layers\";\nimport Sidebar from \"./Sidebar\";\nimport '../scss/maps.scss';\n\nclass Maps extends React.Component {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\traw: null,\n\t\t\tlayers:[\"POI Map\", \"Nolli Map\", \"Visibility\", \"Traffic\", \"Natural Elements\"],\n\t\t\tadded:{\n\t\t\t\t\"POI Map\": true,\n\t\t\t\t\"Nolli Map\": true,\n\t\t\t\t\"Visibility\": false,\n\t\t\t\t\"Traffic\": false,\n\t\t\t\t\"Natural Elements\":false\n\t\t\t},\n\t\t\tselected:\"Nolli Map\",\n\t\t\tsidebar:false,\n\t\t\twidth: window.innerWidth\n\t\t}\n\t\tthis.bounds = this.props.match.params;\n\t}\n\n\tcomponentDidMount() { \n\t    axios.get(`https://api.openstreetmap.org/api/0.6/map?bbox=${this.bounds.wlng},${this.bounds.slat},${this.bounds.elng},${this.bounds.nlat}`)\n\t      \t.then(res => {\n\t        \tif(res.data){\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\traw: res.data,\n\t\t\t\t\t})\n\t        \t};\n\t      \t});\n    \twindow.addEventListener(\"resize\", this.resize);\n\t}\n\n  \tcomponentWillUnmount() {\n    \twindow.removeEventListener(\"resize\", this.resize);\n  \t}\n\n  \tresize = () => {\n  \t\tthis.setState({width:window.innerWidth});\n\t\tif (window.innerWidth>768){\n\t\t\tthis.setState({sidebar:false});\n\t\t}\n  \t}\n\n\tchangeMap = (key) => {\n\t\tthis.setState({\n\t\t\tselected: key\n\t\t})\n\t}\n\n\taddOverlay = (title) => {\n\t\tconst newlist = this.state.added;\n\t\tnewlist[title] = true;\n\t\tthis.setState({\n\t\t  added: newlist,\n\t\t})\t\n\t}\n\n\tremoveOverlay = (title) => {\n\t\tconst newlist = this.state.added;\n\t\tnewlist[title] = false;\n\t\tthis.setState({\n\t\t  added: newlist,\n\t\t})\t\n\t}\t\n\n\texpandSidebar = () => {\n\t\tthis.setState({sidebar: true})\n\t}\n\n\tfoldSidebar = () => {\n\t\tthis.setState({sidebar: false})\n\t}\n\n\t\n\trender() {\t\n\t\tvar longitude = (parseFloat(this.bounds.wlng) + parseFloat(this.bounds.elng))/2;\n\t\tvar latitude = (parseFloat(this.bounds.nlat) + parseFloat(this.bounds.slat))/2;\n\t    var sidebarStyle = {left: 0}\n\t    if (window.innerWidth<768 && !this.state.sidebar){sidebarStyle={left:-250}};\n\t\treturn (\n\t\t\t<div className=\"maps\">\n\t\t\t\t<Sidebar\n\t\t\t\t\tstyle={sidebarStyle}\n\t\t\t\t\tlayers = {this.state.layers}\n\t\t\t\t\tadded = {this.state.added}\n\t\t\t\t\tselected = {this.state.selected}\n\t\t\t\t\tchangeMap = {this.changeMap}\n\t\t\t\t\taddOverlay = {this.addOverlay}\n\t\t\t\t\tremoveOverlay = {this.removeOverlay}\n\t\t\t\t\tfoldSidebar = {this.foldSidebar}\n\t\t\t\t\tlongitude = {longitude}\n\t\t\t\t\tlatitude = {latitude}\n\t\t\t\t/>\n\t\t\t\t<div className=\"map-display\">\n\t\t\t\t\t<D3Layers\n\t\t\t\t\t\tlayers = {this.state.layers}\n\t\t\t\t\t\tadded = {this.state.added}\n\t\t\t\t\t\tselected = {this.state.selected}\n\t\t\t\t\t\t{...this.props.match.params}\n\t\t\t\t\t\trawdata = {this.state.raw}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className ='navbar'>\n\t\t\t\t\t<img className = \"icon\" src={process.env.PUBLIC_URL + '/image/icon/menu.svg'} onClick={this.expandSidebar} alt='menu'/>\n\t\t\t\t\t<img className = \"logo\" src={process.env.PUBLIC_URL + '/image/infomap-logo.svg'} alt='infomap'/>\n\t\t    \t</div>\n\t\t    \t<div className={this.state.sidebar?'mask':'hide'} onClick={this.foldSidebar}/>\n\n\t\t\t\t<div className=\"raw hide\">\n\t\t\t\t\t<div>{`n: ${this.bounds.nlat} s: ${this.bounds.slat} w: ${this.bounds.wlng} e: ${this.bounds.elng}`}</div>\n\t\t\t\t\t<div>API address: {`https://api.openstreetmap.org/api/0.6/map?bbox=${this.bounds.wlng},${this.bounds.slat},${this.bounds.elng},${this.bounds.nlat}`}</div>\n\t\t\t\t</div>\n\t\t    </div>\n\t\t);\n\t}\n}\n\nexport default Maps;\n","import React from 'react';\nimport { withRouter } from \"react-router\";\n\nclass ScrollToTop extends React.Component {\n  componentDidUpdate(prevProps) {\n    if (this.props.location !== prevProps.location) {\n      window.scrollTo(0, 0);\n    }\n  }\n\n  render() {\n    return this.props.children;\n  }\n}\n\nexport default withRouter(ScrollToTop);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router, Route, Switch, Redirect } from 'react-router-dom';\nimport * as serviceWorker from './serviceWorker';\nimport SelectArea from './modules/SelectArea';\nimport Help from './modules/Help';\nimport About from './modules/About';\nimport Maps from './modules/Maps';\nimport ScrollToTop from './modules/ScrollToTop';\nimport './scss/base.scss';\nimport 'mapbox-gl/dist/mapbox-gl.css'\n\n\nReactDOM.render((\n<Router>\n\t<ScrollToTop>\n\t\t\t<Route exact path = {process.env.PUBLIC_URL + '/'} component = {SelectArea} />\n\t\t\t<Route exact path = {process.env.PUBLIC_URL + '/:lng/:lat'} component = {SelectArea} />\n\t\t\t<Route exact path = {process.env.PUBLIC_URL + '/help'} component = {Help} />\n\t\t\t<Route exact path = {process.env.PUBLIC_URL + '/about'} component = {About} />\n\t\t\t<Route exact path = {process.env.PUBLIC_URL + '/selected/:wlng/:slat/:elng/:nlat'} component = {Maps}/>\n\t</ScrollToTop>\n</Router>\n), document.getElementById('root'));\n\nserviceWorker.unregister();\n"],"sourceRoot":""}