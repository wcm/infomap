{"version":3,"sources":["serviceWorker.js","modules/Header.js","modules/Selector.js","modules/SelectArea.js","modules/Help.js","modules/About.js","modules/NolliMap.js","modules/TrafficMap.js","modules/helpers.js","modules/VisibilityMap2.js","modules/POIMap.js","modules/NaturalElements.js","modules/D3Layers.js","modules/Sidebar.js","modules/Maps.js","modules/ScrollToTop.js","modules/MapsDemo.js","modules/Footer.js","index.js"],"names":["Boolean","window","location","hostname","match","React","Component","Selector","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","updateWindowDimensions","setState","width","container","offsetWidth","height","offsetHeight","updateXY","handlerID","e","_ref","deltaX","deltaY","newX","state","mouseX","newY","mouseY","setXY","x","y","handleStart","_ref2","setDragging","handleStop","_ref3","handleDrag","_ref4","dragging","addEventListener","removeEventListener","_this2","divWidth","divHeight","react_default","a","createElement","className","ref","el","style","position","left","top","concat","react_draggable","onStart","bind","onDrag","onStop","MAPBOX_TOKEN","MapSelection","resize","newViewport","viewport","newSelector","selector","innerWidth","sidebar","innerHeight","console","log","handleViewportChange","initialLocation","setLocation","clearInterval","interval","isdragging","objectSpread","transitionDuration","input","longitude","toFixed","latitude","zoom","mapRef","current","bounds","getMap","getBounds","selBounds","n","_ne","lat","s","_sw","w","lng","handleOnResult","event","result","handleGeocoderViewportChange","value","getDistance","lat1","lon1","lat2","lon2","φ1","Math","PI","φ2","Δφ","Δλ","sin","cos","atan2","sqrt","getBoundArea","newLng","parseFloat","document","getElementById","newLat","newZoom","changeInputValue","field","newInput","target","expandSidebar","foldSidebar","params","bearing","pitch","createRef","setInterval","_this3","_this$state","nlat","slat","wlng","elng","area","inner","sidebarStyle","esm","assign","onViewportChange","mapboxApiAccessToken","mapStyle","dist_default","onResult","showCompass","modules_Selector","src","process","type","id","step","min","max","onChange","onClick","Link","to","right","withRouter","Help","About","NolliMap","getBuildingCat","tag","cat","forEach","group","index","indexOf","showTooltip","tags","bbox","getBBox","tooltip","info","hideTooltip","content","_this$props","ways","nodes","relations","styles","fill","levels","color","building","shapes","members","element","pts","map","join","option","push","d","fillRule","stroke","strokeWidth","key","onMouseEnter","onMouseLeave","unshift","points","text","attr","charAt","toUpperCase","substr","toLowerCase","decodeURI","tooltipstyle","version","viewBox","TrafficMap","getWayCat","ratio","lengthratio","highway","strokeLinecap","strokeLinejoin","route","role","toString","radius","cx","cy","r","toRad","Value","distSq","x1","y1","x2","y2","svgIntersections","require","intersect","svgShape","shape","VisibilityMap","updatePos","humans","setPos","setRegion","setArc","region","arcs","str","substring","length","split","num","array","i","abs","getArea","shaded","updateRegions","regions","changed","arc","angle","parts","shift","intersections","buildings","closePt","close","point","setRegions","setArcs","prevProps","colors","human","handles","POIMap","selected","longLinks","shortLinks","link","node","shortLink","NaturalElements","getElementCat","water","waterway","natural","landuse","leisure","green","D3Layers","pixratio","getDirDistance","checkSingle","data","Array","isArray","getWayPoints","mapPix","b","c","addLoading","loading","resetLoading","updateStates","rawdata","xml2js","compact","spaces","osmNode","osm","osmWay","way","osmRelation","relation","_attributes","nodeTag","lon","k","v","wayNd","nd","wayTag","children","footprint","relationMember","member","relationTag","except","longLink","j","linkLengh","random","getOptions","selectedOption","options","title","setOption","addHuman","disabled","deleteHuman","newoptions","newhumans","newarcs","newregions","pop","POI Map","Nolli Map","Visibility","Traffic","Natural Elements","optionbar","maps","ovl","modules_POIMap","modules_NolliMap","VisibilityMap2","modules_TrafficMap","modules_NaturalElements","added","transform","Sidebar","changeMap","addOverlay","stopPropagation","removeOverlay","handleUpdate","evt","updated","renderMenu","layers","record","menu","count","Maps","newlist","raw","axios","get","then","res","modules_Sidebar","modules_D3Layers","ScrollToTop","scrollTo","ReactDOM","render","BrowserRouter","modules_ScrollToTop","Route","exact","path","component","SelectArea","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.d141d80a.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport { NavLink, Link } from \"react-router-dom\";\nimport \"../scss/navbar.scss\";\n\nclass Header extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<div className = 'navbar-wrapper'>\n\t\t\t\t<div className = 'navbar-logo'><Link to = {process.env.PUBLIC_URL + '/'}><img style={{height: 40}} src={process.env.PUBLIC_URL + '/image/logo.svg'} alt='Infomap Logo' /></Link></div>\n\t\t\t\t<div className = 'navbar-tabs'>\n\t\t\t\t\t<NavLink className = 'navbar-tabitem' activeClassName = 'navbar-tabitem-active' to = {process.env.PUBLIC_URL + '/about'}>About</NavLink>\n\t\t\t\t\t<NavLink className = 'navbar-tabitem'activeClassName = 'navbar-tabitem-active' to = {process.env.PUBLIC_URL + '/help'}>Help</NavLink>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Header;\n","import React, { Component } from \"react\";\nimport { render } from \"react-dom\";\nimport Draggable, { DraggableCore }from 'react-draggable';\n\nclass Selector extends Component {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\tdragging: false,\n\t\t\tmouseX: this.props.x,\n\t\t\tmouseY: this.props.y\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t  this.updateWindowDimensions();\n\t  window.addEventListener('resize', this.updateWindowDimensions);\n\t}\n\n\tcomponentWillUnmount() {\n\t  window.removeEventListener('resize', this.updateWindowDimensions);\n\t}\n\n\tupdateWindowDimensions = () => {\n\t  this.setState({ \n\t  \twidth: this.container.offsetWidth,\n\t  \theight: this.container.offsetHeight\n\t  });\n\t}\n\t\n\tupdateXY = (handlerID, e, { deltaX, deltaY }) => {\n\t\tvar newX = this.state.mouseX;\n\t\tvar newY = this.state.mouseY;\n\n\t\tif (handlerID === '1') {\n\t\t\tnewX += deltaX;\n\t\t\tnewY += deltaY;\n\t\t}else if (handlerID === '2') {\n\t\t\tnewX -= deltaX;\n\t\t\tnewY += deltaY;\n\t\t}else if (handlerID === '3') {\n\t\t\tnewX += deltaX;\n\t\t\tnewY -= deltaY;\n\t\t}else if (handlerID === '4') {\n\t\t\tnewX -= deltaX;\n\t\t\tnewY -= deltaY;\n\t\t}\n\t\tif (newX >= 40 && newX <= this.state.width/2-40 && newY >= 60 && newY <= this.state.height/2-40){\n\t\t\tthis.props.setXY({x: newX, y: newY});\n\t\t}\n\n\t\tthis.setState({\n\t\t\tmouseX: newX,\n\t\t\tmouseY: newY\n\t\t})\n\t}\n\n\thandleStart = (handlerID, e, { deltaX, deltaY }) => {\n\t\tthis.props.setDragging(true);\n\t\tthis.updateXY(handlerID, e, { deltaX, deltaY });\n\t}\n\n\thandleStop = (handlerID, e, { deltaX, deltaY }) => {\n\t\tthis.props.setDragging(false);\n\t\tthis.updateXY(handlerID, e, { deltaX, deltaY });\n\t\tthis.setState({\n\t\t\tmouseX: this.props.x,\n\t\t\tmouseY: this.props.y\n\t\t})\n\t}\n\n\thandleDrag = (handlerID, e, { deltaX, deltaY }) => {\n\t\tthis.updateXY(handlerID, e, { deltaX, deltaY });\n\t}\n\n\trender() {\n\t\tconst divWidth = this.state.width;\n\t\tconst divHeight = this.state.height;\n\t\treturn (\n\t\t\t<div className='selector' ref={el => (this.container = el)}>\n\t\t\t\t<div className='shader'\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\tleft:0,\n\t\t\t\t\t\ttop:0,\n\t\t\t\t\t\theight: `${ divHeight }px`,\n\t\t\t\t\t\twidth: `${ this.props.x }px`\n\t\t\t\t\t}}\t\t\t\t\t\n\t\t\t\t/>\n\t\t\t\t<div className='shader'\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\tleft:`${ divWidth-this.props.x }px`,\n\t\t\t\t\t\ttop:0,\n\t\t\t\t\t\theight: `${ divHeight }px`,\n\t\t\t\t\t\twidth: `${ this.props.x }px`\n\t\t\t\t\t}}\t\t\t\t\t\n\t\t\t\t/>\n\t\t\t\t<div className='shader'\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\tleft:`${ this.props.x }px`,\n\t\t\t\t\t\ttop:0,\n\t\t\t\t\t\theight: `${ this.props.y }px`,\n\t\t\t\t\t\twidth: `${ divWidth-this.props.x*2 }px`\n\t\t\t\t\t}}\t\t\t\t\t\n\t\t\t\t/>\n\t\t\t\t<div className='shader'\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\tleft:`${ this.props.x }px`,\n\t\t\t\t\t\ttop:`${ divHeight-this.props.y }px`,\n\t\t\t\t\t\theight: `${ this.props.y }px`,\n\t\t\t\t\t\twidth: `${ divWidth-this.props.x*2 }px`\n\t\t\t\t\t}}\t\t\t\t\t\n\t\t\t\t/>\n\t\t      <DraggableCore\n\t\t        onStart={this.handleStart.bind(this, '1')}\n\t\t        onDrag={this.handleDrag.bind(this, '1')}\n\t\t        onStop={this.handleStop.bind(this, '1')}>\n\t\t        <div className=\"handler\" style={{top:this.props.y-6, left:this.props.x-6}}/>\n\t\t      </DraggableCore>\n\t\t      <DraggableCore\n\t\t        onStart={this.handleStart.bind(this, '2')}\n\t\t        onDrag={this.handleDrag.bind(this, '2')}\n\t\t        onStop={this.handleStop.bind(this, '2')}>\n\t\t        <div className=\"handler\" style={{top:this.props.y-6, left:divWidth-this.props.x-6}}/>\n\t\t      </DraggableCore>\n\t\t      <DraggableCore\n\t\t        onStart={this.handleStart.bind(this, '3')}\n\t\t        onDrag={this.handleDrag.bind(this, '3')}\n\t\t        onStop={this.handleStop.bind(this, '3')}>\n\t\t        <div className=\"handler\" style={{top:divHeight-this.props.y-6, left:this.props.x-6}}/>\n\t\t      </DraggableCore>\n\t\t      <DraggableCore\n\t\t        onStart={this.handleStart.bind(this, '4')}\n\t\t        onDrag={this.handleDrag.bind(this, '4')}\n\t\t        onStop={this.handleStop.bind(this, '4')}>\n\t\t        <div className=\"handler\" style={{top:divHeight-this.props.y-6, left:divWidth-this.props.x-6}}/>\n\t\t      </DraggableCore>\n\t\t\t</div>\n\t\t)\n\t}\n};\n\nexport default Selector;","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport ReactMapGL, {NavigationControl} from \"react-map-gl\";\nimport Geocoder from \"react-map-gl-geocoder\";\nimport {withRouter} from \"react-router\";\nimport Selector from './Selector';\nimport '../scss/selectarea.scss'\n\nconst MAPBOX_TOKEN =\"pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4M29iazA2Z2gycXA4N2pmbDZmangifQ.-g_vE53SD2WrJ6tFX7QHmA\";\n\nclass MapSelection extends Component {\n  \tconstructor(props: Props) {\n\t    super(props);\n\t    var latitude = 48.13832;\n\t    var longitude = 11.57440;\n\t    if (this.props.match.params.latitude && this.props.match.params.longitude){\n\t    \tlatitude = parseFloat(this.props.match.params.latitude);\n\t    \tlongitude = parseFloat(this.props.match.params.longitude);\n\t    }\n\t    this.state = {\n\t    \tviewport: {\n\t\t    \twidth: window.innerWidth-250,\n\t\t      \theight: window.innerHeight,\n\t\t      \tlongitude: longitude,\n\t\t      \tlatitude: latitude,\n\t\t      \tzoom: 15,\n\t\t\t\tbearing: 0,\n\t\t\t\tpitch: 0,    \t\n\t\t\t},\n\t\t\tinput: {\n\t\t\t\t\"longitude\": longitude.toFixed(4),\n\t\t\t\t\"latitude\": latitude.toFixed(4),\n\t\t\t\t\"zoom\": 15\n\t\t\t},\n\t    \tselector:{\n\t    \t\tx: (window.innerWidth-250)/4,\n\t    \t\ty: window.innerHeight/4\n\t    \t},\n\t    \tisdragging: false,\n\t    \tselBounds:{\n\t    \t\tn: 0,\n\t    \t\ts: 0,\n\t    \t\tw: 0,\n\t    \t\te: 0\n\t    \t},\n\t    \twidth: window.innerWidth-250,\n\t    \theight: window.innerHeight,\n\t    \tsidebar: false\n\t  \t};\n\t  \tthis.mapRef = React.createRef();\n\t};\n\n  \t\n\n  \tcomponentDidMount() {\n    \twindow.addEventListener(\"resize\", this.resize);\n  \t\tthis.resize();\n        this.interval = setInterval(() => this.initialLocation(), 1);\n  \t}\n\n  \tcomponentWillUnmount() {\n    \twindow.removeEventListener(\"resize\", this.resize);\n  \t}\n\n  \tresize = () => {\n\t\tvar newViewport = this.state.viewport;\n\t\tvar newSelector = this.state.selector;\n\t\tif (window.innerWidth>768){\n\t\t\tif (this.state.sidebar){\n\t\t\t\tthis.setState({sidebar:false});\n\t\t\t}\n\t\t\tnewViewport.width = window.innerWidth-250;\n\t\t\tnewViewport.height = window.innerHeight;\n\t\t}else{\n\t\t\tnewViewport.width = window.innerWidth;\n\t\t\tnewViewport.height = window.innerHeight-60;\n\t\t}\n\t\tnewSelector.x = newViewport.width/4;\n\t\tnewSelector.y = newViewport.height/4;\n\t\tthis.setState({\n\t\t\tviewport:newViewport,\n\t\t\tselector:newSelector,\n\t\t  \twidth: newViewport.width,\n\t\t  \theight: newViewport.height\n\t\t})\n\t\tconsole.log(newViewport);\n    \tthis.handleViewportChange(newViewport);\n  \t}\n\n  \tinitialLocation = () =>{\n  \t\tthis.setLocation();\n  \t\tclearInterval(this.interval);\n  \t}\n  \thandleViewportChange = (viewport) => {\n  \t\tif (this.state.isdragging === false){\n\t    \tthis.setState({\n\t    \t\tviewport: { ...this.state.viewport, ...viewport, transitionDuration: 100 },\n\t    \t\tinput: {\n\t\t\t\t\t\"longitude\": viewport.longitude.toFixed(4),\n\t\t\t\t\t\"latitude\": viewport.latitude.toFixed(4),\n\t\t\t\t\t\"zoom\": viewport.zoom\n\t\t\t\t}\n\t    \t});\n\t    \tif (this.mapRef.current) {\n\t    \t\tconst myMap = this.mapRef.current.getMap();\n\t\t    \tconst bounds = myMap.getBounds();\n\t\t    \tthis.setState({selBounds:{\n\t\t    \t\tn: bounds._ne.lat,\n\t\t    \t\ts: bounds._sw.lat,\n\t\t\t\t\tw: bounds._sw.lng,\n\t\t    \t\te: bounds._ne.lng\n\t\t    \t}})\n\n\t    \t}\n    \t}\n  \t}\n\n  \thandleOnResult = (event) => {\n    \tconsole.log(event.result);\n  \t}\n\n  \thandleGeocoderViewportChange = (viewport) => {\n    \tconst geocoderDefaultOverrides = { transitionDuration: 500 };\n\t    this.handleViewportChange({\n\t      \t...viewport,\n\t      \t...geocoderDefaultOverrides,\n\t    });\n\n  \t}\n\n  \tsetDragging = (value) => {\n  \t\tthis.setState({isdragging: value});\n  \t}\n\n  \tsetXY = (value) => {\n  \t\tthis.setState({selector: value});  \t\t\n  \t}\n\t\n\tgetDistance = (lat1, lon1, lat2, lon2) => {\n\t  \tvar R = 6371e3; // metres\n\t\tvar φ1 = lat1* Math.PI / 180;\n\t\tvar φ2 = lat2* Math.PI / 180;\n\t\tvar Δφ = (lat2-lat1)* Math.PI / 180;\n\t\tvar Δλ = (lon2-lon1)* Math.PI / 180;\n\n\t\tvar a = Math.sin(Δφ/2) * Math.sin(Δφ/2) +\n\t\t        Math.cos(φ1) * Math.cos(φ2) *\n\t\t        Math.sin(Δλ/2) * Math.sin(Δλ/2);\n\t\tvar c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n\n\t\treturn R * c;\n\t}\n\t\n\tgetBoundArea = (lat1, lat2, lon1, lon2) => {\n\t\treturn this.getDistance(lat1, lon1, lat1, lon2) * this.getDistance(lat1, lon1, lat2, lon1)\n\t}\n\n\tsetLocation = () =>{\n\t\tvar newLng = parseFloat(document.getElementById(\"longitude\").value);\n\t\tvar newLat = parseFloat(document.getElementById(\"latitude\").value);\n\t\tvar newZoom = parseFloat(document.getElementById(\"zoom\").value);\n    \tthis.handleViewportChange({\n    \t\tlongitude:newLng,\n    \t\tlatitude:newLat,\n    \t\tzoom:newZoom\n    \t});\t\t\n\t}\n\n\tchangeInputValue = (field, e) => {\n\t\tvar newInput = this.state.input;\n\t\tnewInput[field] = e.target.value;\n\t\tthis.setState({\n\t\t\tinput:newInput\n\t\t})\n\t}\n\n\texpandSidebar = () => {\n\t\tthis.setState({sidebar: true})\n\t}\n\n\tfoldSidebar = () => {\n\t\tthis.setState({sidebar: false})\n\t}\n\n  \trender() {\n    \tconst { viewport, selector, selBounds } = this.state;\n\t    const nlat = selBounds.n - selector.y/viewport.height*(selBounds.n-selBounds.s);\n\t    const slat = selBounds.s + selector.y/viewport.height*(selBounds.n-selBounds.s);\n\t    const wlng = selBounds.w + selector.x/this.state.width*(selBounds.e-selBounds.w);\n\t    const elng = selBounds.e - selector.x/this.state.width*(selBounds.e-selBounds.w);\n\t    const area = this.getBoundArea(nlat, slat, wlng, elng).toFixed(2);\n\t    var inner = 0;\n\t    if (area <= 4000000){inner = Math.sqrt(area/4000000)*210}else{inner = Math.sqrt(4000000/area)*210};\n\t    var sidebarStyle = {left: 0}\n\t    if (window.innerWidth<768 && !this.state.sidebar){sidebarStyle={left:-250}}\n\t    return (\n\t    \t<div className = 'content'>\n\n\t    \t<div className = 'select-wrapper' ref={el => (this.container = el)}>\n\t\t\t\t<ReactMapGL\n\t\t\t\t\tclassName='map'\n\t\t\t\t    ref={this.mapRef}\n\t\t\t\t    {...viewport}\n\t\t\t\t    onViewportChange={this.handleViewportChange}\n\t\t\t\t    mapboxApiAccessToken={MAPBOX_TOKEN}\n\t\t\t\t    mapStyle='mapbox://styles/mapbox/streets-v9'\n\t\t\t\t>\n\t\t\t\t\t<Geocoder\n\t\t\t\t\t    mapRef={this.mapRef}\n\t\t\t\t\t    onResult={this.handleOnResult}\n\t\t\t\t        onViewportChange={this.handleGeocoderViewportChange}\n\t\t\t\t        mapboxApiAccessToken={MAPBOX_TOKEN}\n\t\t\t\t        position=\"top-right\"\n\t\t\t\t    />\n\t\t\t        <div className='control'>\n\t\t\t\t        <NavigationControl \n\t\t\t\t        \tshowCompass={false}\n\t\t\t\t          \tonViewportChange={this.handleViewportChange} \n\t\t\t\t        />\n\t\t\t        </div>\n\t\t\t\t\t<Selector\n\t\t\t\t    \t{...selector}\n\t\t\t\t    \tsetDragging = {this.setDragging}\n\t\t\t\t    \tsetXY = {this.setXY}\n\t\t\t\t    />\n\n\t\t\t\t</ReactMapGL>\n\t\t    </div>\n\t\t\t<div className = \"sidebar-main-wrapper\" style={sidebarStyle}>\n\t\t\t\t<div className=\"footer-wrapper\">\n\t\t\t\t<img className = \"logo\" src={process.env.PUBLIC_URL + '/image/infomap-logo.svg'}/>\n\t\t\t    <div className = \"coordinates\">\n\t\t\t    \t<div className = \"parameter\">\n\t\t\t\t\t    Longitude:\n\t\t\t\t\t    <input type=\"number\" id=\"longitude\" step=\"0.0001\" min=\"-180\" max=\"180\" value={this.state.input[\"longitude\"]} onChange={(e)=>this.changeInputValue(\"longitude\", e)}/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className = \"parameter\">\n\t\t\t\t\t    Latitude:\n\t\t\t\t\t    <input type=\"number\" id=\"latitude\" step=\"0.0001\" min=\"-90\" max=\"90\" value={this.state.input[\"latitude\"]} onChange={(e)=>this.changeInputValue(\"latitude\", e)}/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className = \"parameter\">\n\t\t\t\t\t    Zoom:\n\t\t\t\t\t    <input type=\"number\" id=\"zoom\" step=\"0.0001\" min=\"-90\" max=\"90\" value={this.state.input[\"zoom\"]} onChange={(e)=>this.changeInputValue(\"zoom\", e)}/>\n\t\t\t\t\t</div>\n\t\t\t\t    <div className=\"button-secondary\" onClick={this.setLocation}>Go to location</div>\n\t\t\t    </div>\n\t\t    \t{area <= 4000000? \n\t\t\t\t\t<div className='area'>\n\t\t\t\t\t\t<div className=\"area-indicator\">\n\t\t\t\t\t\t\t<div className=\"area-indicator-fill\" style={{width:inner, height:inner, top:(210-inner)/2, left:(210-inner)/2}}></div>\n\t\t\t\t\t\t\t<div className=\"limit\">4 km&#178;</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"area-number\">Area: {area} m&#178;</div>\n\t\t\t\t\t    <Link to={`${process.env.PUBLIC_URL}/selected/${wlng}/${slat}/${elng}/${nlat}`}> \n\t\t\t\t\t\t\t<div className='button proceed-button'>Proceed to Analysis </div>\n\t\t\t\t    \t</Link>\n\t\t\t\t    </div>\n\t\t\t    :\n\t\t\t\t\t<div className='area'>\n\t\t\t\t\t\t<div className=\"area-indicator-exceed\">\n\t\t\t\t\t\t\t<div className=\"area-indicator-fill-exceed\" style={{width:inner, height:inner, top:(210-inner)/2, left:(210-inner)/2}}></div>\n\t\t\t\t\t\t\t<div className=\"limit-exceed\"style={{top:(210-inner)/2+8, right:(210-inner)/2+8}}>4 km&#178;</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"area-number\">Area: &#62; 4 km&#178;</div>\n\t\t\t\t\t\t<div className='button button-disabled proceed-button'>Proceed to Analysis </div>\n\t\t\t\t\t\t<div className='proceed-alert'> Selected area must be smaller than 4 km&#178; </div>\n\t\t\t\t\t</div>\n\t\t    \t}\n\t\t\t\t<div className='raw hide'>\n\t\t\t\t    <div>\n\t\t\t\t    \t<p>Viewport Coordinates:</p>\n\t\t\t\t    \t<p> {`n: ${selBounds.n} s: ${selBounds.s} w: ${selBounds.w} e: ${selBounds.e}`}</p>\n\t\t\t\t    </div>\n\t\t\t    \t<div>\n\t\t\t    \t\t<p>Selected Region Coordinates:</p>\n\t\t\t    \t\t<p> {`n: ${nlat} s: ${slat} w: ${wlng} e: ${elng}`}</p>\n\t\t\t    \t</div>\n\t\t\t    \t<div>\n\t\t\t    \t\t<p>Selected Region Area:</p>\n\t\t\t    \t\t<p> {area}</p>\n\t\t\t    \t</div>\n\t\t    \t</div>\n\t\t    \t<div className=\"push\"/>\n\t\t    \t</div>\n\t\t    \t<div className='sidebar-footer'>\n\t\t\t\t\t<div className='footer-tab'>About</div>\n\t\t\t\t\t<div className='footer-tab'>Help</div>\n\t\t\t\t</div>\n\t\t    </div>\n\n\t    \t<div className ='navbar'>\n\t\t\t\t<img className = \"icon\" src={process.env.PUBLIC_URL + '/image/icon/menu.svg'} onClick={this.expandSidebar}/>\n\t\t\t\t<img className = \"logo\" src={process.env.PUBLIC_URL + '/image/infomap-logo.svg'}/>\n\t    \t</div>\n\t    \t<div className={this.state.sidebar?'mask':'hide'} onClick={this.foldSidebar}/>\n\n\t\t    </div>\n\t    );\n  \t}\n};\n\nexport default withRouter(MapSelection);","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nclass Help extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div>Help</div>\n\t\t\t\t{/*TODO*/}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Help;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nclass About extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div>About</div>\n\t\t\t\t{/*TODO*/}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default About;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nclass NolliMap extends React.Component {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\ttooltip: false,\n\t\t\tinfo: {},\n\t\t\tleft: true,\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t}\n\n\tgetBuildingCat = (tag) => {\n\t\tconst keys = [\n\t\t\t[\"apartments\",\"farm\", \"hotel\", \"house\", \"detached\", \"residential\", \"dormitory\", \"terrace\", \"houseboat\", \"bungalow\", \"static_caravan\", \"cabin\"],\n\t\t\t[\"commercial\", \"office\", \"industrial\", \"retail\", \"supermarket\", \"warehouse\", \"kiosk\"],\n\t\t\t[\"religious\", \"cathedral\", \"chapel\", \"church\", \"mosque\", \"temple\", \"synagogue\", \"shrine\"],\n\t\t\t[\"bakehouse\", \"kindergarten\", \"civic\", \"government\", \"hospital\", \"school\", \"stadium\", \"train_station\", \"transportation\", \"university\", \"grandstand\", \"public\", \"toilets\", \"service\", \"parking\", \"garages\", \"garage\", \"sports_hall\", \"bridge\", \"\tcarport\", \"hangar\"],\n\t\t\t[\"greenhouse\",\"pavilion\", \"farm_auxiliary\", \"barn\"]\n\t\t]\n\n\t\tvar cat = 5;\n\n\t\tkeys.forEach((group, index) => {\n\t\t\tif(group.indexOf(tag) !== -1){\n\t\t\t\tcat = index;\n\t\t\t}\n\t\t});\n\n\t\treturn cat;\n\t}\n\n\n\tshowTooltip = (tags, e) =>{\n\t\tvar bbox = e.target.getBBox();\n\t\tif ((bbox.x + bbox.width/2) >= (this.props.width/2)){\n\t\t\tthis.setState({left: true})\n\t\t} else {\n\t\t\tthis.setState({left: false})\n\t\t}\n\t\tthis.setState({\n\t\t\ttooltip: true,\n\t\t\tinfo: tags,\n\t\t})\n\n\t}\n\n\thideTooltip = () =>{\n\n\t\tthis.setState({\n\t\t\ttooltip: false,\n\t\t\tinfo: {}\n\t\t})\n\n\t}\n\n\trender() {\n\t\tlet content = [];\n\t\tvar {width, height, nodes, ways, relations} = this.props;\n\t\tvar info = this.state.info;\n\t\tconst styles = [\n\t\t\t{\n\t\t\t\tfill: \"#ad4a00\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfill: \"#7693d3\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfill: \"#0053cc\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfill: \"#cb00d1\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfill: \"#b6ff97\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfill: \"rgba(60, 60, 60)\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfill: \"rgba(52, 168, 0, .4)\"\n\t\t\t}\n\t\t];\n\n\t\tvar cat = -1\n\n\t    var levels = null;\n\t    var color = \"rgba(60, 60, 60)\";\n\n\t    for (var id in relations) {\n\n\t    \tif (relations[id].tag.building || relations[id].tag[\"buidling:part\"]){\n\t    \t\tvar shapes = '';\n\t    \t\tcolor = \"rgba(60,60,60)\";\n\t    \t\t\n\t    \t\trelations[id].members.forEach((element)=>{\n\t    \t\t\tif (element.type === 'way' && element.value) {\n\t\t    \t\t\tvar pts = element.value.map(e => e.join(',')).join(' ');\n\t\t    \t\t\tshapes += `M ${pts}`;\n\t\t    \t\t}\n\t    \t\t})\n\n\t    \t\tif (this.props.option === \"Height\"){\n\t    \t\t\tlevels = relations[id].tag[\"building:levels\"];\n\t    \t\t\tif (levels){\n\t\t    \t\t\tcolor = `rgba(0,0,255,${levels/10})`;\n\t\t\t    \t\tcontent.push(\n\t\t\t    \t\t\t<path d={shapes} fillRule=\"evenodd\" fill={color} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t    \t\t\t\t<title>{id}</title>\n\t\t\t    \t\t\t</path>\n\t\t\t    \t\t);\n\t\t    \t\t}else{\n\t\t\t    \t\tcontent.unshift(\n\t\t\t    \t\t\t<path d={shapes} fillRule=\"evenodd\" fill={color} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t    \t\t\t\t<title>{id}</title>\n\t\t\t    \t\t\t</path>\n\t\t\t    \t\t);\n\t\t    \t\t}\n\t\t    \t}else if (this.props.option === \"Program\"){\n\t\t    \t\tcat = this.getBuildingCat(relations[id].tag.building);\n\t\t\t    \tcontent.push(\n\t\t\t    \t\t<path d={shapes} fillRule=\"evenodd\" fill={styles[cat].fill} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t    \t\t\t<title>{id}</title>\n\t\t\t    \t\t</path>\n\t\t\t    \t);\n\t\t    \t}else if (this.props.option === \"None\"){\n\t\t\t    \tcontent.push(\n\t\t\t    \t\t<path d={shapes} fillRule=\"evenodd\" fill={color} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t    \t\t\t<title>{id}</title>\n\t\t\t    \t\t</path>\n\t\t\t    \t);\n\t\t    \t}\n\t\t\t}\n\n\t    };\n\n\n\t    for (id in ways) {\n\n\t    \tif (ways[id].tag.building){\n\n\t    \t\tvar pts = ways[id].points.map(e => e.join(',')).join(' ');\n\t\t    \tcolor = \"rgba(60,60,60)\";\n\t    \t\tif (this.props.option === \"Height\"){\n\t\t    \t\tlevels = ways[id].tag[\"building:levels\"];\n\t    \t\t\tif (levels) {\n\t\t    \t\t\tcolor = `rgba(0,0,255,${levels/10})`;\n\t\t\t    \t\tcontent.push(\n\t\t\t    \t\t\t<polygon points={pts} fill={color} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, ways[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}/>\n\t\t\t    \t\t)\n\t\t    \t\t}else{\n\t\t\t    \t\tcontent.unshift(\n\t\t\t    \t\t\t<polygon points={pts} fill={color} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, ways[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}/>\n\t\t\t    \t\t)\t    \t\t\t\n\t\t    \t\t}\n\t\t    \t}else if (this.props.option === \"Program\"){\n\t\t\t\t\tcat = this.getBuildingCat(ways[id].tag.building);\n\t\t    \t\tcontent.push(\n\t\t\t    \t\t<polygon points={pts} fill={styles[cat].fill} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, ways[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}/>\n\t\t\t    \t)\n\n\t\t    \t}else if (this.props.option === \"None\"){\n\t\t\t    \tcontent.push(\n\t\t\t    \t\t<polygon points={pts} fill={color} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, ways[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}/>\n\t\t\t    \t)\n\t\t    \t}\n\t\t\t}\n\t    };\n\n/*\t    for (var id in nodes) {\n\t    \tif (nodes[id].tag != {}){\n\t\t\t\tcontent.push(\n\t\t\t\t\t<circle cx={nodes[id].x} cy={nodes[id].y} r=\"2\" fill=\"red\" key={id}/>\n\t\t\t\t)\n\t\t\t}\n\t    };\n*/\n\t\tvar text = [];\n\t\tfor (var key in info){\n\t\t\tif(!(key === \"building\" && info[key] === \"yes\")){\n\t\t\t\tvar attr = key.charAt(0).toUpperCase() + key.substr(1).toLowerCase();\n\t\t\t\ttext.push(\n\t\t\t\t\t<div className=\"tooltip-info\" key={key}><span className=\"tooltip-key\">{attr}: </span>{info[key]} {attr === \"Footprint\"? decodeURI(\"m%C2%B2\"):\"\"}</div>\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\n\t\tvar tooltipstyle = {};\n\n\t\tif (this.state.left){\n\t\t\ttooltipstyle = {\n\t\t\t\ttop: \"0\",\n\t\t\t\tleft: \"0\"\n\t\t\t}\n\t\t}else{\n\t\t\ttooltipstyle = {\n\t\t\t\ttop: \"0\",\n\t\t\t\tright: \"0\"\n\t\t\t}\n\t\t}\n\t\treturn(\n\t\t\t<div className=\"nollimap\">\n\t\t\t\t<svg version=\"1.1\" viewBox={`0 0 ${width} ${height}`} style = {{width: this.state.width}}>\n\t\t\t\t\t{content}\n\t\t\t\t</svg>\n\t\t\t\t<div className={this.state.tooltip? \"tooltip\":\"hide\"} style={tooltipstyle}>\n\t\t\t\t\t<div className=\"tooltip-title\">Building Details</div>\n\t\t\t\t\t{text}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n\n}\n\nexport default NolliMap","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nclass TrafficMap extends React.Component {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\ttooltip: false,\n\t\t\tinfo: {},\n\t\t\tleft: true,\n\t\t}\n\t}\n\n\tshowTooltip = (tags, e) =>{\n\t\tvar bbox = e.target.getBBox();\n\t\tif ((bbox.x + bbox.width/2) >= (this.props.width/2)){\n\t\t\tthis.setState({left: true})\n\t\t} else {\n\t\t\tthis.setState({left: false})\n\t\t}\n\t\tthis.setState({\n\t\t\ttooltip: true,\n\t\t\tinfo: tags,\n\t\t})\n\n\t}\n\n\thideTooltip = () =>{\n\n\t\tthis.setState({\n\t\t\ttooltip: false,\n\t\t\tinfo: {}\n\t\t})\n\n\t}\n\n\tgetWayCat = (tag) => {\n\t\tconst keys = [\n\t\t\t[\"motorway\",\"trunk\", \"motorway_link\", \"trunk_link\"],\n\t\t\t[\"primary\", \"primary_link\"],\n\t\t\t[\"secondary\", \"tertiary\", \"secondary_link\", \"tertiary_link\", \"raceway\"],\n\t\t\t[\"unclassified\", \"residential\", \"living_street\", \"road\", \"escape\"],\n\t\t\t[\"service\",\"pedestrian\", \"track\", \"bus_guideway\", \"footway\", \"bridleway\", \"steps\", \"path\", \"cycleway\"]\n\t\t]\n\n\t\tvar cat = 5;\n\n\t\tkeys.forEach((group, index) => {\n\t\t\tif(group.indexOf(tag) !== -1){\n\t\t\t\tcat = index;\n\t\t\t}\n\t\t});\n\n\t\treturn cat;\n\t}\n\n\trender() {\n\t\tlet content = [[], [], [], [], [], []];\n\t\tvar {width, height, nodes, ways, relations} = this.props;\n\t\tvar ratio = this.props.lengthratio;\n\t\tvar info = this.state.info;\n\n\t\tconst styles = [\n\t\t\t{\n\t\t\t\tcolor: \"#b5451a\",\n\t\t\t\tstrokeWidth: \"16\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolor: \"#f15c22\",\n\t\t\t\tstrokeWidth: \"10\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolor: \"#f47d4e\",\n\t\t\t\tstrokeWidth: \"10\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolor: \"#f79d7a\",\n\t\t\t\tstrokeWidth: \"5\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolor: \"#f9bea7\",\n\t\t\t\tstrokeWidth: \"2\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolor: \"#fcded3\",\n\t\t\t\tstrokeWidth:\"4\"\n\t\t\t}\n\t\t];\n\n\t\tvar cat = -1;\n\t\tvar style = {};\n\n\t    for (var id in ways) {\n\n\t    \tif (ways[id].tag.highway && (this.props.option === \"Roads\" || this.props.option === \"Both\")){\n\t    \t\tvar pts = ways[id].points.map(e => e.join(',')).join(' ');\n\t    \t\tcat = this.getWayCat(ways[id].tag.highway);\n\t    \t\tstyle = styles[cat];\n\t\t    \tcontent[5-cat].push(\n\t\t\t    \t<path d={`M ${pts}`} fill=\"none\" stroke={style.color} strokeWidth={style.strokeWidth * ratio} strokeLinecap=\"round\" strokeLinejoin=\"round\" key={id+\"w\"} onMouseEnter={this.showTooltip.bind(this, ways[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t\t\t    <title>{id}</title>\n\t\t\t\t\t</path>\n\t\t    \t)\n\t\t\t}\n\t    };\n\n\t    for (id in relations) {\n\t    \tif (relations[id].tag.route && (this.props.option === \"Public Transport\" || this.props.option === \"Both\")){\n\t    \t\trelations[id].members.forEach((element, index)=>{\n\t    \t\t\tif (element.type === 'way' && element.value) {\n\t\t    \t\t\tvar pts = element.value.map(e => e.join(',')).join(' ');\n\t\t    \t\t\tif (element.role === 'platform'){\n\t\t\t\t\t    \tcontent.push(\n\t\t\t\t\t    \t\t<path d={`M ${pts}`} fill=\"red\" stroke=\"red\" strokeWidth=\"1\" key={index.toString()+id} onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t\t\t    \t\t\t<title>{id}</title>\n\t\t\t\t\t    \t\t</path>\n\t\t\t\t\t    \t)\n\n\t\t    \t\t\t}else{\n\t\t\t\t\t    \tcontent.push(\n\t\t\t\t\t    \t\t<path d={`M ${pts}`} fill=\"none\" stroke=\"red\" strokeWidth=\"1\" key={index.toString()+id} onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t\t\t    \t\t\t<title>{id}</title>\n\t\t\t\t\t    \t\t</path>\n\t\t\t\t\t    \t)\n\t\t\t\t\t    }\n\t\t    \t\t}else if(element.type === 'node' && element.value){\n\t\t    \t\t\tvar radius = 50;\n\t\t    \t\t\tif (relations[id].tag.route === \"subway\" || relations[id].tag.route === \"train\"){radius = 100}\n\t\t\t\t    \tcontent.push(\n\t\t\t\t    \t\t<g key={index.toString()+id}>\n\t\t\t    \t\t\t\t<circle cx={element.value[0]} cy={element.value[1]} r={radius*ratio} fill=\"rgba(255,90,90,.1)\" onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t\t\t    \t\t\t<title>{id}</title>\n\t\t\t\t\t    \t\t</circle> \n\t\t\t    \t\t\t\t<circle cx={element.value[0]} cy={element.value[1]} r=\"2\" fill=\"#803535\" onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t\t\t    \t\t\t<title>{id}</title>\n\t\t\t\t\t    \t\t</circle> \n\t\t\t\t    \t\t</g>\n\t\t\t\t    \t)    \t\t\t\n\t\t    \t\t}\n\t    \t\t})\n\t\t\t}else if(relations[id].tag.highway && (this.props.option === \"Roads\" || this.props.option === \"Both\")){\n\t    \t\tvar shapes = '';\n\t    \t\trelations[id].members.forEach((element)=>{\n\t    \t\t\tif (element.type === 'way' && element.value) {\n\t\t    \t\t\tvar pts = element.value.map(e => e.join(',')).join(' ');\n\t\t    \t\t\tshapes += `M ${pts}`;\n\t\t    \t\t}\n\t    \t\t})\n\t    \t\tcat = this.getWayCat(relations[id].tag.highway);\n\t    \t\tstyle = styles[cat];\n\t\t    \tcontent[5-cat].push(\n\t\t    \t\t<path d={shapes} fillRule=\"evenodd\" fill={style.color} stroke=\"none\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t    \t\t\t<title>{id}</title>\n\t\t    \t\t</path>\n\t\t    \t)\n\n\t\t\t}\n\t    };\n\n\n{/*\t    for (id in nodes) {\n\t    \tif (nodes[id].tag.highway){\n\t\t\t\tcontent.push(\n\t\t\t\t\t<circle cx={nodes[id].x} cy={nodes[id].y} r=\"3\" fill=\"red\" stroke=\"white\" strokeWidth=\".5\" key={id} onMouseEnter={this.showTooltip.bind(this, nodes[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}/>\n\t\t\t\t)\n\t\t\t}\n\t    }; */}\n\n\t\tvar text = [];\n\t\tfor (var key in info){\n\t\t\tvar attr = key.charAt(0).toUpperCase() + key.substr(1).toLowerCase();\n\t\t\ttext.push(\n\t\t\t\t<div className=\"tooltip-info\" key={key}><span className=\"tooltip-key\">{attr}: </span>{info[key]} {attr === \"Footprint\"? decodeURI(\"m%C2%B2\"):\"\"}</div>\n\t\t\t)\n\t\t}\n\n\t\tvar tooltipstyle = {};\n\n\t\tif (this.state.left){\n\t\t\ttooltipstyle = {\n\t\t\t\ttop: \"0\",\n\t\t\t\tleft: \"0\"\n\t\t\t}\n\t\t}else{\n\t\t\ttooltipstyle = {\n\t\t\t\ttop: \"0\",\n\t\t\t\tright: \"0\"\n\t\t\t}\n\t\t}\n\n\t\treturn(\n\t\t\t<div className=\"nollimap\">\n\t\t\t\t<svg version=\"1.1\" viewBox={`0 0 ${width} ${height}`} style = {{width: this.state.width}}>\n\t\t\t\t\t{content}\n\t\t\t\t</svg>\n\t\t\t\t<div className={this.state.tooltip? \"tooltip\":\"hide\"} style={tooltipstyle}>\n\t\t\t\t\t<div className=\"tooltip-title\">Route Details</div>\n\t\t\t\t\t{text}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n\n}\n\nexport default TrafficMap","export function toRad(Value) {\n    /** Converts numeric degrees to radians */\n    return Value * Math.PI / 180;\n}\n\nexport function distSq(x1, y1, x2, y2){\n    return (x2-x1)*(x2-x1) + (y2-y1)*(y2-y1);\n}\n\nexport function\tgetArea(array) {\n\t    var x = array;\n\t    var a = 0;\n\t    if (x.length < 3) return 0;\n\t    for (var i = 0; i < (x.length-1); i += 1) {\n\t        a += x[i][0] * x[i+1][1] - x[i+1][0] * x[i][1];\n\t    }\n\t    return Math.abs(a * 1.0 / 2);\n\t}\n","import React from \"react\";\nimport ReactDOM from 'react-dom';\nimport { DraggableCore }from 'react-draggable';\nimport {toRad, distSq, getArea} from \"./helpers\";\n\nvar svgIntersections = require('svg-intersections');\nvar intersect = svgIntersections.intersect;\nvar svgShape = svgIntersections.shape;\n\nclass VisibilityMap extends React.Component {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t    this.angle = 2;\n\n\t\tvar buildings = \"\";\n\t\tvar {nodes, ways, relations} = this.props;\n\n\t    for (var id in relations) {\n\n\t    \tif (relations[id].tag.building || relations[id].tag[\"buidling:part\"]){\n\t    \t\tvar shapes = '';\n\t    \t\t\n\t    \t\trelations[id].members.forEach((element)=>{\n\t    \t\t\tif (element.type === 'way' && element.value) {\n\t\t    \t\t\tvar pts = element.value.map(e => e.join(',')).join(' ');\n\t\t    \t\t\tshapes += `M ${pts}`;\n\t\t    \t\t}\n\t    \t\t})\n\n\t\t\t    buildings += shapes;\n\t\t    }\n\t    };\n\n\n\t    for (id in ways) {\n\n\t    \tif (ways[id].tag.building){\n\n\t    \t\tvar pts = ways[id].points.map(e => e.join(',')).join(' ');\n\t\t\t    buildings += `M ${pts}`;\n\t\t\t}\n\t    };\n\n\t    buildings += `M 0,0 0,${this.props.height} ${this.props.width},${this.props.height} ${this.props.width},0 Z`\n\n\t    this.buildings = buildings;\n\t    for (var key in this.props.regions){\n\t    \tif(this.props.regions[key] === \"\"){this.props.setRegion(key, `M${this.props.humans[key][0]/this.props.ratio},${this.props.humans[key][1]/this.props.ratio} `)};\n\t    }\n\t    this.state = {\n\t\t\ttooltip: 0,\n\t\t\tshaded: \"\",\n\t\t\tinfo: \"\",\n\t\t\tleft: true,\n\t\t}\n\n\t}\n\n    componentDidMount() {\n        this.interval = setInterval(() => this.updateRegions(), 5);\n    }\n\n    componentWillUnmount() {\n        clearInterval(this.interval);\n    }\n\n    componentDidUpdate(prevProps) {\n    \tif (prevProps.ratio != this.props.ratio){\n    \t\tfor (var key in this.props.humans){\n    \t\t\tthis.props.setPos(key, [this.props.humans[key][0]*this.props.ratio/prevProps.ratio, this.props.humans[key][1]*this.props.ratio/prevProps.ratio])\n    \t\t}\n    \t}\n    }\n\n    updatePos = (key, e, { deltaX, deltaY }) => {\n\t\tvar newX = (this.props.humans[key][0] + deltaX)/this.props.ratio;\n\t\tvar newY = (this.props.humans[key][1] + deltaY)/this.props.ratio;\n\t\tif (newX > 5 && newX < (this.props.width-5) && newY > 5 && newY < (this.props.height-5)){\n\t\t\tthis.props.setPos(key, [this.props.humans[key][0] + deltaX, this.props.humans[key][1] + deltaY]);\n\t\t}\n\n    }\n\n\thandleStart = (key, e, { deltaX, deltaY }) => {\n\t\tthis.updatePos(key, e, { deltaX, deltaY });\n\t    this.props.setRegion(key, '');\n\t    this.props.setArc(key, -1)\n\t}\n\n\thandleDrag = (key, e, { deltaX, deltaY }) => {\n\t\tthis.updatePos(key, e, { deltaX, deltaY })\n\t}\n\n\thandleStop = (key, e, { deltaX, deltaY }) => {\n\t\tthis.updatePos(key, e, { deltaX, deltaY })\t    \n\t\tthis.props.setRegion(key, `M${this.props.humans[key][0]/this.props.ratio},${this.props.humans[key][1]/this.props.ratio} `);\n\t    this.props.setArc(key, 0)\n\t}\n\n\tshowTooltip = (region, index, e) =>{\n\t\tvar bbox = e.target.getBBox();\n\t\tif ((bbox.x + bbox.width/2) >= (this.props.width/2)){\n\t\t\tthis.setState({left: true})\n\t\t} else {\n\t\t\tthis.setState({left: false})\n\t\t}\n\t\tif (this.props.arcs[index]>=360){\n\t\t\tvar str = region.substring(1, region.length-2).split(\" \");\n\t\t\tvar pts = [];\n\t\t\tvar num = [];\n\t\t\tstr.forEach((substr) => {\n\t\t\t\tnum = substr.split(\",\");\n\t\t\t\tpts.push([parseFloat(num[0]), parseFloat(num[1])]);\n\t\t\t});\n\t\t\tvar area = getArea(pts) / this.props.lengthratio / this.props.lengthratio;\n\t\t\tthis.setState({\n\t\t\t\ttooltip: true,\n\t\t\t\tinfo: `Visible Area: ${area.toFixed(2)} ` + decodeURI(\"m%C2%B2\"),\n\t\t\t\tshaded: region,\n\t\t\t})\n\t\t}else{\t\t\tthis.setState({\n\t\t\t\ttooltip: true,\n\t\t\t\tinfo: \"Calculating area...\",\n\t\t\t})\n\t\t}\n\n\n\t}\n\n\thideTooltip = () =>{\n\n\t\tthis.setState({\n\t\t\ttooltip: false,\n\t\t\tinfo: \"\",\n\t\t\tshaded: \"\",\n\t\t})\n\n\t}\n\n\n\n\tupdateRegions = () => {\n\t\tvar regions = this.props.regions;\n\t\tvar arcs = this.props.arcs;\n\t\tvar changed = false;\n\t\tfor (var key in arcs){\n\t\t\tif (arcs[key]<360 && arcs[key] != -1){\n\t\t\t\tchanged = true;\n\t\t\t\tvar arc = arcs[key];\n\t\t\t\tvar region = regions[key];\n\t\t\t\tif (region === \"\"){region = `M${this.props.humans[key][0]/this.props.ratio},${this.props.humans[key][1]/this.props.ratio} `}\n\t\t\t\tif (arc + this.angle >=360){\n\t\t\t\t\tvar parts = region.split(\" \");\n\t\t\t\t\tparts.shift();\n\t\t\t\t\tregion = \"M\" + parts.join(\" \") + \"Z\";\n\t\t\t\t}else{\n\t\t\t\t\tvar width = this.props.width;\n\t\t\t\t\tvar height = this.props.height;\n\t\t\t\t\tvar radius = Math.max(width, height);\n\t\t\t\t\tvar x = this.props.humans[key][0]/this.props.ratio;\n\t\t\t\t\tvar y = this.props.humans[key][1]/this.props.ratio;\n\t\t\t\t\tvar intersections = intersect(  \n\t\t\t\t\t\tsvgShape(\"line\", { x1: x + radius * Math.sin(toRad(arc)), y1: y + radius * Math.cos(toRad(arc)), x2: x, y2: y }),\n\t\t\t\t\t\tsvgShape(\"path\", {d:this.buildings})  \n\t\t\t\t\t);\n\n\t\t\t\t\t//var closePt = {x: x + radius * Math.sin(toRad(arc)), y: y + radius * Math.cos(toRad(arc))};\n\t\t\t\t\tvar closePt = intersections.points[0];\n\t\t\t\t\tvar close = distSq(0, 0, width, height);\n\t\t\t\t\tif (closePt){close = distSq(x, y, closePt.x, closePt.y)}\n\n\t\t\t\t\tintersections.points.forEach((point) => {\n\t\t\t\t\t\tif (distSq(x, y, point.x, point.y) < close){\n\t\t\t\t\t\t\tclose = distSq(x, y, point.x, point.y);\n\t\t\t\t\t\t\tclosePt = point;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\tregion = region + `${closePt.x},${closePt.y} `\n\t\t\t\t}\n\t\t\t\tregions[key] = region;\n\t\t\t\tarcs[key] = arc + this.angle;\n\t\t\t}\n\t\t}\n\t\tif(changed){\n\t\t\tthis.props.setRegions(regions);\n\t\t\tthis.props.setArcs(arcs);\n\t\t}\n\t}\n\n\trender() {\n\t\tvar colors = [\"rgba(255, 139, 0, .4)\", \"rgba(0, 139, 255, .2)\", \"rgba(139, 255, 0, .2)\", \"rgba(255, 0, 139, .2)\", \"rgba(0, 255, 139, .2\"]\n\t\tvar regions = this.props.regions.map((region, index) => <path d={region} fill={colors[0]} stroke=\"red\" strokeWidth=\"1\" key={index} onMouseEnter={this.showTooltip.bind(this, region, index)} onMouseLeave={this.hideTooltip.bind(this)}/>);\n\t\tvar humans = this.props.humans.map((human, index) => <circle cx={human[0]/this.props.ratio} cy={human[1]/this.props.ratio} r=\"3\" fill = \"red\" key={index}/>)\n\t\tvar handles = this.props.humans.map((human, index) => \t\t\t\t\n\t\t\t<DraggableCore\n\t\t\t    onStart={this.handleStart.bind(this, index)}\n\t\t\t    onDrag={this.handleDrag.bind(this, index)}\n\t\t\t    onStop={this.handleStop.bind(this, index)}\n\t\t\t    key={index}>\n\t\t    \t<div className=\"human\" style={{top:human[1]-15, left:human[0]-15}}>\n\t\t    \t</div>\n\t\t    </DraggableCore>\n\t\t)\n\n\t\tvar tooltipstyle = {};\n\n\t\tif (this.state.left){\n\t\t\ttooltipstyle = {\n\t\t\t\ttop: \"0\",\n\t\t\t\tleft: \"0\"\n\t\t\t}\n\t\t}else{\n\t\t\ttooltipstyle = {\n\t\t\t\ttop: \"0\",\n\t\t\t\tright: \"0\"\n\t\t\t}\n\t\t}\n\n\t\treturn(\n\t\t\t<div className=\"visibilitymap\">\n\t\t\t\t<svg version=\"1.1\" viewBox={`0 0 ${this.props.width} ${this.props.height}`} ref={el => (this.container = el)}>\n\t\t\t\t\t<path d={this.state.shaded} fill=\"#f15c22\" stroke=\"none\"/>\n\t\t\t\t\t<path d={this.buildings} fillRule=\"evenodd\" fill=\"rgba(0, 0, 0, .05)\" stroke=\"rgba(60, 60, 60)\" strokeWidth=\".5\"/>\n\t\t\t\t\t<g>\n\t\t\t\t\t{regions}\n\t\t\t\t\t</g>\n\t\t\t\t\t{humans}\n\t\t\t\t</svg>\n\t\t\t\t{handles}\n\t\t\t\t<div className={this.state.tooltip? \"tooltip\":\"hide\"} style={tooltipstyle}>\n\t\t\t\t\t<div className=\"tooltip-title\">{this.state.info}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n\n};\n\nexport default VisibilityMap;","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nclass POIMap extends React.Component {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\ttooltip: false,\n\t\t\tinfo: {},\n\t\t\tleft: true,\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t}\n\n\n\tshowTooltip = (tags, e) =>{\n\t\tvar bbox = e.target.getBBox();\n\t\tif ((bbox.x + bbox.width/2) >= (this.props.width/2)){\n\t\t\tthis.setState({left: true})\n\t\t} else {\n\t\t\tthis.setState({left: false})\n\t\t}\n\t\tthis.setState({\n\t\t\ttooltip: true,\n\t\t\tinfo: tags,\n\t\t})\n\n\t}\n\n\thideTooltip = () =>{\n\n\t\tthis.setState({\n\t\t\ttooltip: false,\n\t\t\tinfo: {}\n\t\t})\n\n\t}\n\n\trender() {\n\t\tlet content = [];\n\t\tvar {nodes, ways, relations,width, height} = this.props;\n\t\tvar selected = this.props.selected;\n\t\tvar longLinks = this.props.longLinks;\n\t\tvar shortLinks = this.props.shortLinks;\n\t\tvar info = this.state.info;\n\t\t\n\t\tif(this.props.option === \"Short Links\"){\n\t\t\tcontent.push(shortLinks.map((link) => <line x1={link.x1} y1={link.y1} x2={link.x2} y2={link.y2} stroke=\"rgba(255, 0, 255, .3)\" strokeWidth=\".5\"key={`${link.x1} ${link.y1} ${link.x2} ${link.y2}`}/>));\n\t\t}\n\t\tif(this.props.option === \"Long Links\"){\n\t\t\tcontent.push(longLinks.map((link) => <line x1={link.x1} y1={link.y1} x2={link.x2} y2={link.y2} stroke=\"rgba(255, 0, 255, .3)\" strokeWidth=\".5\"key={`${link.x1} ${link.y1} ${link.x2} ${link.y2}`}/>));\n\t\t}\n\t\t\n\t\tcontent.push(selected.map((node) => <circle cx={node.x} cy={node.y} r={2+node.shortLink/8} fill=\"red\" key={`${node.x} ${node.y}`} onMouseEnter={this.showTooltip.bind(this, node.tag)} onMouseLeave={this.hideTooltip.bind(this)}/>));\n\t\t\n\t\tvar text = [];\n\t\tfor (var key in info){\n\t\t\tif(!(key === \"building\" && info[key] === \"yes\")){\n\t\t\t\tvar attr = key.charAt(0).toUpperCase() + key.substr(1).toLowerCase();\n\t\t\t\ttext.push(\n\t\t\t\t\t<div className=\"tooltip-info\" key={key}><span className=\"tooltip-key\">{attr}: </span>{info[key]} {attr === \"Footprint\"? decodeURI(\"m%C2%B2\"):\"\"}</div>\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\n\t\tvar tooltipstyle = {};\n\n\t\tif (this.state.left){\n\t\t\ttooltipstyle = {\n\t\t\t\ttop: \"0\",\n\t\t\t\tleft: \"0\"\n\t\t\t}\n\t\t}else{\n\t\t\ttooltipstyle = {\n\t\t\t\ttop: \"0\",\n\t\t\t\tright: \"0\"\n\t\t\t}\n\t\t}\n\t\treturn(\n\t\t\t<div className=\"nollimap\">\n\t\t\t\t<svg version=\"1.1\" viewBox={`0 0 ${width} ${height}`} style = {{width: this.state.width}}>\n\t\t\t\t\t{content}\n\t\t\t\t</svg>\n\t\t\t\t<div className={this.state.tooltip? \"tooltip\":\"hide\"} style={tooltipstyle}>\n\t\t\t\t\t<div className=\"tooltip-title\">Building Details</div>\n\t\t\t\t\t{text}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n\n}\n\nexport default POIMap","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nclass NaturalElements extends React.Component {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\ttooltip: false,\n\t\t\tinfo: {},\n\t\t\tleft: true,\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t}\n\n\tgetElementCat = (tag) => {\n\t\t\n\t\tconst water = {\n\t\t\t\"water\": [],\n\t\t\t\"waterway\":[\"riverbank\"],\n\t\t\t\"natural\": [\"water\", \"wetland\", \"glacier\", \"bay\", \"strait\"],\n\t\t\t\"landuse\": [\"basin\", \"reservoir\"],\n\t\t\t\"leisure\": [\"water_park\", \"swimming_pool\", \"swimming_area\", \"marina\", \"fishing\"]\n\t\t}\n\n\t\tconst green = {\n\t\t\t\"natural\":[\"wood\", \"tree_row\", \"scrub\", \"heath\", \"moor\", \"grassland\"],\n\t\t\t\"landuse\":[\"allotments\", \"farmland\", \"farmyard\", \"forest\", \"grass\", \"greenfield\", \"greenhouse_horticulture\", \"meadow\", \"orchard\", \"plant_nursery\", \"recreation_ground\", \"village_green\", \"vineyard\"],\n\t\t\t\"leisure\":[\"park\", \"garden\", \"golf_course\", \"dog_park\", \"pitch\", \"track\"]\n\t\t}\n\n\t\tfor (var key in water) {\n\t\t\tif(water[key].indexOf(tag[key]) != -1 || tag[key] != null && water[key].length === 0){\n\t\t\t\treturn \"water\";\n\t\t\t}\n\t\t};\n\n\t\tfor (key in green) {\n\t\t\tif(green[key].indexOf(tag[key]) != -1 || tag[key] && green[key].length === 0){\n\t\t\t\treturn \"green\";\n\t\t\t}\n\t\t};\n\n\t\treturn \"none\";\n\t}\n\n\n\tshowTooltip = (tags, e) =>{\n\t\tvar bbox = e.target.getBBox();\n\t\tif ((bbox.x + bbox.width/2) >= (this.props.width/2)){\n\t\t\tthis.setState({left: true})\n\t\t} else {\n\t\t\tthis.setState({left: false})\n\t\t}\n\t\tthis.setState({\n\t\t\ttooltip: true,\n\t\t\tinfo: tags,\n\t\t})\n\n\t}\n\n\thideTooltip = () =>{\n\n\t\tthis.setState({\n\t\t\ttooltip: false,\n\t\t\tinfo: {}\n\t\t})\n\n\t}\n\n\trender() {\n\t\tlet content = [];\n\t\tvar {width, height, nodes, ways, relations} = this.props;\n\t\tvar info = this.state.info;\n\t\tconst styles = [\n\t\t\t{\n\t\t\t\tfill: \"#7693d3\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfill: \"rgba(52, 168, 0, .4)\"\n\t\t\t}\n\t\t];\n\n\t\tvar cat = \"none\";\n\t\tvar style = -1;\n\n\t    for (var id in relations) {\n\t\t\tcat = this.getElementCat(relations[id].tag);\n\t\t\tstyle = -1;\n\t\t\tif (cat === \"water\"){style = 0}else if (cat === \"green\"){style = 1}\n\t\t\tif (style != -1){\n\t    \t\tvar shapes = '';\n\t    \t\trelations[id].members.forEach((element)=>{\n\t    \t\t\tif (element.type === 'way' && element.value) {\n\t\t    \t\t\tvar pts = element.value.map(e => e.join(',')).join(' ');\n\t\t    \t\t\tshapes += `M ${pts}`;\n\t\t    \t\t}\n\t    \t\t})\n\t    \t\tif (cat === \"water\"){\n\t\t\t    \tcontent.push(\n\t\t\t    \t\t<path d={shapes} fillRule=\"evenodd\" fill={styles[style].fill} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t    \t\t\t<title>{id}</title>\n\t\t\t    \t\t</path>\n\t\t\t    \t);\n\t\t\t    }else{\n\t\t\t    \tcontent.unshift(\n\t\t\t    \t\t<path d={shapes} fillRule=\"evenodd\" fill={styles[style].fill} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t    \t\t\t<title>{id}</title>\n\t\t\t    \t\t</path>\n\t\t\t    \t);\n\t\t\t    }\n\t\t\t}\n\t    };\n\n\n\t    for (id in ways) {\n\t\t\tcat = this.getElementCat(ways[id].tag);\n\t\t\tstyle = -1;\n\t\t\tif (cat === \"water\"){style = 0}else if (cat === \"green\"){style = 1}\n\t\t\tif (style != -1){\n\t\t\t\tvar pts = ways[id].points.map(e => e.join(',')).join(' ');\n\t\t\t\tif (cat === \"water\"){\n\t\t\t    \tcontent.push(\n\t\t\t    \t\t<polygon points={pts} fill={styles[style].fill} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, ways[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}/>\n\t\t\t    \t)\n\t\t\t    }else{\n\t\t\t    \tcontent.unshift(\n\t\t\t    \t\t<polygon points={pts} fill={styles[style].fill} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, ways[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}/>\n\t\t\t    \t)\t\t\t    \t\n\t\t\t    }\n\t\t\t}\n\t    };\n\n\t\tvar text = [];\n\t\tfor (var key in info){\n\t\t\tif(!(key === \"building\" && info[key] === \"yes\")){\n\t\t\t\tvar attr = key.charAt(0).toUpperCase() + key.substr(1).toLowerCase();\n\t\t\t\ttext.push(\n\t\t\t\t\t<div className=\"tooltip-info\" key={key}><span className=\"tooltip-key\">{attr}: </span>{info[key]} {attr === \"Footprint\"? decodeURI(\"m%C2%B2\"):\"\"}</div>\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\n\t\tvar tooltipstyle = {};\n\n\t\tif (this.state.left){\n\t\t\ttooltipstyle = {\n\t\t\t\ttop: \"0\",\n\t\t\t\tleft: \"0\"\n\t\t\t}\n\t\t}else{\n\t\t\ttooltipstyle = {\n\t\t\t\ttop: \"0\",\n\t\t\t\tright: \"0\"\n\t\t\t}\n\t\t}\n\t\treturn(\n\t\t\t<div className=\"nollimap\">\n\t\t\t\t<svg version=\"1.1\" viewBox={`0 0 ${width} ${height}`} style = {{width: this.state.width}}>\n\t\t\t\t\t{content}\n\t\t\t\t</svg>\n\t\t\t\t<div className={this.state.tooltip? \"tooltip\":\"hide\"} style={tooltipstyle}>\n\t\t\t\t\t<div className=\"tooltip-title\">Details</div>\n\t\t\t\t\t{text}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n\n}\n\nexport default NaturalElements;","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport '../scss/analysis.scss';\nimport NolliMap from \"./NolliMap\";\nimport TrafficMap from \"./TrafficMap\";\nimport VisibilityMap from \"./VisibilityMap2\";\nimport POIMap from \"./POIMap\";\nimport NaturalElements from \"./NaturalElements\";\nimport {distSq} from \"./helpers\";\n\nclass D3Layers extends React.Component {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tloading: 0,\n\t\t\twidth: 1000,\n\t\t\theight: 0,\n\t\t\tnodes: {},\n\t\t\tways: {},\n\t\t\trelations: {},\n\t\t\thumans: [[500,250]],\n\t\t\tarcs:[0],\n\t\t\tregions:[\"\"],\n\t\t\toptions : {\n\t\t\t\t\"POI Map\": \"Short Links\",\n\t\t\t\t\"Nolli Map\": \"None\",\n\t\t\t\t\"Visibility\": \"Both\",\n\t\t\t\t\"Traffic\": \"Both\",\n\t\t\t\t\"Natural Elements\": \"\",\n\t\t\t},\n\t\t\tpixratio: 1,\n\t\t}\n\t}\n\t\n\tcomponentDidMount() {\n\t\tthis.updateStates();\n    \twindow.addEventListener(\"resize\", this.resize);\n\t}\n\n  \tcomponentWillUnmount() {\n    \twindow.removeEventListener(\"resize\", this.resize);\n  \t}\n\n\tcomponentDidUpdate(prevProps) {\n\t\tif(this.props.rawdata !== prevProps.rawdata){\n\t\t\tthis.resetLoading();\n\t\t\tthis.updateStates();\n\t\t}\n\t}\n\n\tresize = () => {\n\t\tthis.setState({\n\t\t\tpixratio: this.container.offsetWidth/this.state.width\n\t\t});\n\t}\n\n\tgetDistance = (lat1, lon1, lat2, lon2) => {\n\t  \tvar R = 6371e3; // metres\n\t\tvar φ1 = lat1* Math.PI / 180;\n\t\tvar φ2 = lat2* Math.PI / 180;\n\t\tvar Δφ = (lat2-lat1)* Math.PI / 180;\n\t\tvar Δλ = (lon2-lon1)* Math.PI / 180;\n\n\t\tvar a = Math.sin(Δφ/2) * Math.sin(Δφ/2) +\n\t\t        Math.cos(φ1) * Math.cos(φ2) *\n\t\t        Math.sin(Δλ/2) * Math.sin(Δλ/2);\n\t\tvar c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n\n\t\treturn R * c;\n\t}\n\n\tgetDirDistance = (lat1, lon1, lat2, lon2) => {\n\t\tif (lat2 <= lat1 && lon2 >= lon1) {\n\t\t\treturn this.getDistance(lat1, lon1, lat2, lon2);\n\t\t}else{\n\t\t\treturn -this.getDistance(lat1, lon1, lat2, lon2);\n\t\t}\n\t}\n\t\n\tgetBoundArea = (lat1, lat2, lon1, lon2) => {\n\t\treturn this.getDistance(lat1, lon1, lat1, lon2) * this.getDistance(lat1, lon1, lat2, lon1)\n\t}\n\n\tcheckSingle = (data) => {\n\t\tif (Array.isArray(data)){\n\t\t\treturn data;\n\t\t}else if(data){\n\t\t\treturn [data];\n\t\t}else{\n\t\t\treturn [];\n\t\t}\n\t}\n\n\tgetWayPoints = (data) => {\n\t\tvar pts = '';\n\t\tdata.forEach((node) =>{\n\t\t\tpts += `${node.x},${node.y} `\n\t    })\n\t    return pts;\n\t}\n\n\tmapPix = (x, a, b, c, d) => {\n\t\treturn c + (x-a) * (d-c) / (b-a)\n\t}\n\n\tgetArea(array) {\n\t    var x = array;\n\t    var a = 0;\n\t    if (x.length < 3) return 0;\n\t    for (var i = 0; i < (x.length-1); i += 1) {\n\t        a += x[i][0] * x[i+1][1] - x[i+1][0] * x[i][1];\n\t    }\n\t    return Math.abs(a * 1.0 / 2);\n\t}\n\n\taddLoading = (value) => {\n\t\tthis.setState({\n\t\t\tloading: this.state.loading + value\n\t\t})\n\t}\n\n\tresetLoading = () => {\n\t\tthis.setState({\n\t\t\tloading: 0\n\t\t})\n\t}\n\n\tupdateStates = () => {\n\t\t\tconst {nlat, slat, wlng, elng, rawdata} = this.props;\n\t\t\tconst width = this.state.width\n\t\t\tconst ratio = width/this.getDistance(nlat, wlng, nlat, elng);\n\t\t\tconst height = this.getDistance(nlat, wlng, slat, wlng)*ratio;\n\t\t\tvar nodes = {};\n\t\t\tvar ways = {};\n\t\t\tvar relations = {};\n\n\t\t\tif (rawdata){\n\t\t\t\tvar convert = require('xml-js');\n\t\t\t\tvar result = convert.xml2js(rawdata, {compact: true, spaces: 4});\n\n\t\t\t\tvar osmNode = this.checkSingle(result.osm.node);\n\t\t\t\tvar osmWay = this.checkSingle(result.osm.way);\n\t\t\t\tvar osmRelation = this.checkSingle(result.osm.relation);\n\t\t\t\t\n\t\t\t\tosmNode.forEach((element) => {\n\t\t\t\t\tvar id = element._attributes.id;\n\t\t\t\t\tvar nodeTag = this.checkSingle(element.tag);\n\n\t\t\t\t\tnodes[id] = {element: element};\n\t\t\t\t\tnodes[id].x = this.mapPix(element._attributes.lon, wlng, elng, 0, width);\n\t\t\t\t\tnodes[id].y = this.mapPix(element._attributes.lat, nlat, slat, 0, height);\n\t\t\t\t\tnodes[id].tag = {};\n\t\t\t\t\tnodeTag.forEach((tag) => {\n\t\t\t\t\t\tnodes[id].tag[tag._attributes.k] = tag._attributes.v\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tosmWay.forEach((element) => {\n\t\t\t\t\tvar id = element._attributes.id;\n\t\t\t\t\tvar wayNd = this.checkSingle(element.nd);\n\t\t\t\t\tvar wayTag = this.checkSingle(element.tag);\n\n\t\t\t\t\tways[id] = {element: element};\n\t\t\t\t\tways[id].children = [];\n\t\t\t\t\tways[id].points = []\n\t\t\t\t\tways[id].tag = {};\n\t\t\t\t\twayNd.forEach((nd) => {\n\t\t\t\t\t\tways[id].children.push(nodes[nd._attributes.ref]);\n\t\t\t\t\t\tways[id].points.push([nodes[nd._attributes.ref].x, nodes[nd._attributes.ref].y]);\n\t\t\t\t\t});\n\t\t\t\t\twayTag.forEach((tag) => {\n\t\t\t\t\t\tways[id].tag[tag._attributes.k] = tag._attributes.v;\n\t\t\t\t\t});\n\n\t\t\t\t\tif (ways[id].tag.building){\n\t\t\t\t\t\tvar area = \tthis.getArea(ways[id].points) / ratio / ratio;\n\t\t\t\t\t\tways[id].footprint = area;\n\t\t\t\t\t\tways[id].tag.footprint = area.toFixed(2)\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tosmRelation.forEach((element) => {\n\t\t\t\t\tvar id = element._attributes.id;\n\t\t\t\t\tvar relationMember = this.checkSingle(element.member);\n\t\t\t\t\tvar relationTag = this.checkSingle(element.tag);\n\n\t\t\t\t\trelations[id] = {element: element};\n\t\t\t\t\trelations[id].members = []\n\t\t\t\t\trelations[id].tag = {};\n\t\t\t\t\trelationMember.forEach((member) => {\n\t\t\t\t\t\tif (member._attributes.type === 'way' && ways[member._attributes.ref]){\n\t\t\t\t\t\t\trelations[id].members.push({type: 'way', value: ways[member._attributes.ref].points, role: member._attributes.role});\n\t\t\t\t\t\t}else if (member._attributes.type === 'node' && nodes[member._attributes.ref]){\n\t\t\t\t\t\t\trelations[id].members.push({type: 'node', value: [nodes[member._attributes.ref].x, nodes[member._attributes.ref].y], role: member._attributes.role});\n\t\t\t\t\t\t}else if (member._attributes.type === 'relation' && relations[member._attributes.ref]){\n\t\t\t\t\t\t\trelations[id].members.push({type:'relation', value: relations[member._attributes.ref].members, role: member._attributes.role});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\trelationTag.forEach((tag) => {\n\t\t\t\t\t\trelations[id].tag[tag._attributes.k] = tag._attributes.v;\n\t\t\t\t\t});\n\t    \t\t\tif (relations[id].tag.building || relations[id].tag[\"buidling:part\"]){\n\t    \t\t\t\tvar area = 0;\n\t\t\t\t\t\trelations[id].members.forEach((member) => {\n\t\t\t\t\t\t\tif (member.role === \"outer\"){\n\t\t\t\t\t\t\t\tarea += this.getArea(member.value);\n\t\t\t\t\t\t\t}else if (member.role === \"outer\"){\n\t\t\t\t\t\t\t\tarea -= this.getArea(member.value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tarea = area / ratio / ratio;\n\t\t\t\t\t\trelations[id].footprint = area;\t\t\t\t\t\t\n\t\t\t\t\t\trelations[id].tag.footprint = area.toFixed(2);\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tvar selected = [];\n\t\t\tvar shortLinks = [];\n\t\t\tvar longLinks = []\n\t\t\tvar except = [\"waste_basket\", \"waste_disposal\", \"waste_transfer_station\", \"recycling\"]\n\n\t    \tfor (var id in nodes) {\n\t    \t\tif (nodes[id].tag[\"amenity\"] != null && except.indexOf(nodes[id].tag[\"amenity\"]) === -1){\n\t    \t\t\tnodes[id].longLink = 0;\n\t    \t\t\tnodes[id].shortLink = 0;\n\t\t\t\t\tselected.push(nodes[id]);\n\t\t\t\t}\n\t    \t};\n\n\t    \tfor (var i=0; i<selected.length; i++) {\n\t    \t\tfor (var j = i+1; j<selected.length; j++){\n\t    \t\t\tvar linkLengh = Math.sqrt(distSq(selected[i].x, selected[i].y, selected[j].x, selected[j].y))/ratio;\n\t\t\t\t\tif( linkLengh <= 150){\n\t\t\t\t\t\tselected[i].longLink ++;\n\t\t\t\t\t\tselected[j].longLink ++;\n\t\t\t\t\t\tlongLinks.push({\n\t\t\t\t\t\t\tx1:selected[i].x, \n\t\t\t\t\t\t\ty1:selected[i].y, \n\t\t\t\t\t\t\tx2:selected[j].x, \n\t\t\t\t\t\t\ty2:selected[j].y\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif(linkLengh <= 100){\n\t\t\t\t\t\t\tselected[i].shortLink ++;\n\t\t\t\t\t\t\tselected[j].shortLink ++;\n\t\t\t\t\t\t\tshortLinks.push({\n\t\t\t\t\t\t\t\tx1:selected[i].x, \n\t\t\t\t\t\t\t\ty1:selected[i].y, \n\t\t\t\t\t\t\t\tx2:selected[j].x, \n\t\t\t\t\t\t\t\ty2:selected[j].y\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t    \t\t}\n\t    \t}\n\n\t\n\t\t\tthis.ratio = ratio;\n\t\t\tthis.selected = selected;\n\t\t\tthis.longLinks = longLinks;\n\t\t\tthis.shortLinks = shortLinks;\n\n\t\t\tthis.setState({\n\t\t\t\theight: height,\n\t\t\t\tnodes: nodes,\n\t\t\t\tways: ways,\n\t\t\t\trelations: relations,\n\t\t\t\thumans: [[Math.random() * width * this.container.offsetWidth/width, Math.random() * height * this.container.offsetWidth/width]],\n\t\t\t\tpixratio:this.container.offsetWidth/width,\n\t\t\t});\n\t\t\t\n\t\t\tthis.addLoading(50);\n\n\t}\n\n\tgetOptions = () => {\n\t\tvar data = require(\"./map-options.json\")[this.props.selected];\n\t\tvar selectedOption = this.state.options[this.props.selected];\n\t\tvar content = [];\n\t\tif (data) {\n\t\t\tcontent.push(\n\t\t\t\t<div className=\"options-title\" key=\"title\">\n\t\t\t\t\t{data.title}\n\t\t\t\t</div>\n\t\t\t)\n\t\t\tdata.options.forEach((option) => {\n\t\t\t\tcontent.push(\n\t\t\t\t\t<div className={option === selectedOption? \"options-item selected\" : \"options-item\"} onClick={()=>{this.setOption(option)}} key={option}>\n\t\t\t\t\t\t{option}\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t})\n\t\t}\n\t\tif (this.props.selected === \"Visibility\"){\n\t\t\tcontent.push(\n\t\t\t\t<div className=\"options-title\" key=\"title\">\n\t\t\t\t\tYou can add up to 5 viewing points:\n\t\t\t\t</div>\n\t\t\t)\n\t\t\tcontent.push(\n\t\t\t\t<button className=\"options-button\" onClick={this.addHuman} key=\"add\" disabled={this.state.arcs.length >= 5}>\n\t\t\t\t\tAdd a Point\n\t\t\t\t</button>\n\t\t\t)\n\t\t\tcontent.push(\n\t\t\t\t<button className=\"options-button\" onClick={this.deleteHuman} key=\"delete\" disabled={this.state.arcs.length <= 1}>\n\t\t\t\t\tDelete a Point\n\t\t\t\t</button>\n\t\t\t)\n\t\t}\n\t\treturn content;\n\t}\n\n\tsetOption = (option) => {\n\t\tvar newoptions = this.state.options;\n\t\tnewoptions[this.props.selected] = option;\n\t\tthis.setState({options:newoptions});\n\t}\n\n\tsetPos = (num, position) => {\n\t\tvar newhumans = this.state.humans;\n\t\tnewhumans[num] = position\n\t\tthis.setState({humans: newhumans});\n\t}\n\n\tsetArc = (num, value) => {\n\t\tvar newarcs = this.state.arcs;\n\t\tnewarcs[num] = value\n\t\tthis.setState({arc: newarcs});\n\t}\n\n\tsetRegion = (num, value) => {\n\t\tvar newregions = this.state.regions\n\t\tnewregions[num] = value\n\t\tthis.setState({regions: newregions});\n\t}\n\n\tsetArcs = (value) => {\n\t\tthis.setState({arc: value});\n\t}\n\n\tsetRegions = (value) => {\n\t\tthis.setState({regions: value});\n\t}\n\n\taddHuman = () => {\n\t\tvar newhumans = this.state.humans;\n\t\tvar newarcs = this.state.arcs;\n\t\tvar newregions = this.state.regions;\n\t\tnewhumans.push([Math.random() * this.state.width * this.state.pixratio, Math.random() * this.state.height * this.state.pixratio]);\n\t\tnewarcs.push(0);\n\t\tnewregions.push(\"\");\n\t\tthis.setState({\n\t\t\thumans: newhumans,\n\t\t\tarcs: newarcs,\n\t\t\tregions: newregions,\n\t\t});\n\t}\n\n\tdeleteHuman = () => {\n\t\tvar newhumans = this.state.humans;\n\t\tvar newarcs = this.state.arcs;\n\t\tvar newregions = this.state.regions;\n\t\tnewhumans.pop();\n\t\tnewarcs.pop();\n\t\tnewregions.pop();\n\t\tthis.setState({\n\t\t\thumans: newhumans,\n\t\t\tarcs: newarcs,\n\t\t\tregions: newregions,\n\t\t});\n\t}\n\n\trender() {\n\t\tvar optionbar = this.getOptions();\n\t\tvar {ways, nodes, relations, width, height} = this.state;\n\t\tvar maps = {};\n\t\tvar ovl = [];\n\n\t\tmaps[\"POI Map\"] = \n\t\t\t<POIMap\n\t\t\t\tnodes = {nodes}\n\t\t\t\tways = {ways}\n\t\t\t\trelations = {relations}\n\t\t\t\twidth = {width}\n\t\t\t\theight = {height}\n\t\t\t\tgetWayPoints = {this.getWayPoints}\n\t\t\t\taddLoading = {this.addLoading}\n\t\t\t\tnlat = {this.props.nlat}\n\t\t\t\tslat = {this.props.slat}\n\t\t\t\twlng = {this.props.wlng}\n\t\t\t\telng = {this.props.elng}\n\t\t\t\toption = {this.state.options[\"POI Map\"]}\n\t\t\t\tkey = \"POI Map\"\n\t\t\t\tlengthratio = {this.ratio}\n\t\t\t\tselected = {this.selected}\n\t\t\t\tlongLinks = {this.longLinks}\n\t\t\t\tshortLinks = {this.shortLinks}\n\t\t\t/>;\n\n\t\tmaps[\"Nolli Map\"] = \n\t\t\t<NolliMap\n\t\t\t\tnodes = {nodes}\n\t\t\t\tways = {ways}\n\t\t\t\trelations = {relations}\n\t\t\t\twidth = {width}\n\t\t\t\theight = {height}\n\t\t\t\tgetWayPoints = {this.getWayPoints}\n\t\t\t\taddLoading = {this.addLoading}\n\t\t\t\tnlat = {this.props.nlat}\n\t\t\t\tslat = {this.props.slat}\n\t\t\t\twlng = {this.props.wlng}\n\t\t\t\telng = {this.props.elng}\n\t\t\t\toption = {this.state.options[\"Nolli Map\"]}\n\t\t\t\tkey = \"Nolli Map\"\n\t\t\t/>;\n\n\t\tmaps[\"Visibility\"] = \n\t\t\t<VisibilityMap\n\t\t\t\tnodes = {nodes}\n\t\t\t\tways = {ways}\n\t\t\t\trelations = {relations}\n\t\t\t\twidth = {width}\n\t\t\t\theight = {height}\n\t\t\t\thumans = {this.state.humans}\n\t\t\t\tarcs = {this.state.arcs}\n\t\t\t\tregions = {this.state.regions}\n\t\t\t\tsetPos = {this.setPos}\n\t\t\t\tsetArc = {this.setArc}\n\t\t\t\tsetRegion = {this.setRegion}\n\t\t\t\tsetArcs = {this.setArcs}\n\t\t\t\tsetRegions = {this.setRegions}\n\t\t\t\taddLoading = {this.addLoading}\n\t\t\t\tnlat = {this.props.nlat}\n\t\t\t\tslat = {this.props.slat}\n\t\t\t\twlng = {this.props.wlng}\n\t\t\t\telng = {this.props.elng}\n\t\t\t\tkey = \"Visibility\"\n\t\t\t\toption = {this.state.options[\"Traffic\"]}\n\t\t\t\tratio = {this.state.pixratio}\n\t\t\t\tlengthratio = {this.ratio}\n\t\t\t/>;\n\n\t\tmaps[\"Traffic\"] = \n\t\t\t<TrafficMap\n\t\t\t\tnodes = {nodes}\n\t\t\t\tways = {ways}\n\t\t\t\trelations = {relations}\n\t\t\t\twidth = {width}\n\t\t\t\theight = {height}\n\t\t\t\tgetWayPoints = {this.getWayPoints}\n\t\t\t\taddLoading = {this.addLoading}\n\t\t\t\tnlat = {this.props.nlat}\n\t\t\t\tslat = {this.props.slat}\n\t\t\t\twlng = {this.props.wlng}\n\t\t\t\telng = {this.props.elng}\n\t\t\t\tkey = \"Traffic\"\n\t\t\t\toption = {this.state.options[\"Traffic\"]}\n\t\t\t\tlengthratio = {this.ratio}\n\t\t\t/>;\n\n\t\tmaps[\"Natural Elements\"] = \n\t\t\t<NaturalElements\n\t\t\t\tnodes = {nodes}\n\t\t\t\tways = {ways}\n\t\t\t\trelations = {relations}\n\t\t\t\twidth = {width}\n\t\t\t\theight = {height}\n\t\t\t\tgetWayPoints = {this.getWayPoints}\n\t\t\t\taddLoading = {this.addLoading}\n\t\t\t\tnlat = {this.props.nlat}\n\t\t\t\tslat = {this.props.slat}\n\t\t\t\twlng = {this.props.wlng}\n\t\t\t\telng = {this.props.elng}\n\t\t\t\toption = {this.state.options[\"Natural Elements\"]}\n\t\t\t\tkey = \"Natural Elements\"\n\t\t\t/>;\n\n\t\tfor (var key in this.props.added){\n\t\t\tif (this.props.added[key]){\n\t\t\t\tovl.unshift(maps[key]);\n\t\t\t}\n\t\t}\n\n\n\t\treturn(\n\t\t\t<div className=\"maps-wrapper\" ref={el => (this.container = el)}>\n\t\t\t\t<div className=\"options\">\n\t\t\t\t\t{optionbar}\n\t\t\t\t</div>\n\t\t\t\t<svg version=\"1.1\" viewBox={`0 0 ${this.state.width} ${this.state.height}`} style = {{width: \"100%\"}}/>\n\n\t\t\t\t<div className={this.state.loading === 100?\"hide\":\"loading\"}>\n\t\t\t\t\t<svg version=\"1.1\" x=\"0px\" y=\"0px\"viewBox=\"0 0 110 110\">\n\t\t\t\t\t\t<path id=\"r5\" d=\"M37.2,39.9l5,8.7l19.1-11c1-0.6,1.3-1.8,0.7-2.7l-5-8.7l-19.1,11\n\t\t\t\t\t\t\tC37,37.8,36.6,39,37.2,39.9z\"/>\n\t\t\t\t\t\t<path id=\"r3\" d=\"M108,70.6c1-0.6,1.3-1.8,0.7-2.7l-31-53.7l-17.3,10l5,8.7c1.7,2.9,0.7,6.5-2.2,8.2\n\t\t\t\t\t\t\tl-19.1,11l4,6.9l12.1-7c2.9-1.7,6.5-0.7,8.2,2.2l17,29.4L108,70.6z\"/>\n\t\t\t\t\t\t<path id=\"r7\" d=\"M62.3,55.5l-12.1,7l18,31.2l13.9-8L65,56.2C64.5,55.2,63.3,54.9,62.3,55.5z\"/>\n\t\t\t\t\t\t<rect id=\"r6\" x=\"16.6\" y=\"60.5\" transform=\"matrix(0.866 -0.5 0.5 0.866 -28.17 23.9398)\" width=\"28\" height=\"8\"/>\n\t\t\t\t\t\t<path id=\"r1\" d=\"M58.4,20.8l17.3-10l-5-8.7c-0.6-1-1.8-1.3-2.7-0.7l-15.6,9L58.4,20.8z\"/>\n\t\t\t\t\t\t<path id=\"r2\" d=\"M42.2,108.6l22.5-13l-18-31.2l-24.2,14l17,29.4C40,108.9,41.2,109.2,42.2,108.6z\"/>\n\t\t\t\t\t\t<path id=\"r4\" d=\"M2.2,39.4c-1,0.6-1.3,1.8-0.7,2.7l13,22.5l24.2-14l-5-8.7c-1.7-2.9-0.7-6.5,2.2-8.2\n\t\t\t\t\t\t\tl19.1-11l-6-10.4L2.2,39.4z\"/>\n\t\t\t\t\t</svg>\n\t\t\t\t\tLoading\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t{this.props.selected === \"Overlay\"?\n\t\t\t\t\tovl\n\t\t\t\t\t:\n\t\t\t\t\tmaps[this.props.selected]\n\t\t\t\t}\n\t\t\t</div>\n\t\t)\n\t}\n\n}\n\nexport default D3Layers;","import React from \"react\";\nimport {withRouter} from \"react-router\";\nimport { Link } from \"react-router-dom\";\nimport ReactDragList from 'react-drag-list';\nimport '../scss/sidebar.scss'\n\nclass Sidebar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    \tmenu: this.props.layers,\n    \tadded: this.props.added,\n    \tselected: this.props.selected,\n    }\n  };\n\n  changeMap = (key) => {\n    this.props.foldSidebar();\n  \tthis.props.changeMap(key);\n  }\n\n  addOverlay = (e, title) => {\n  \te.stopPropagation();\n  \tthis.props.addOverlay(title);\n  }\n\n  removeOverlay = (e, title) => {\n  \te.stopPropagation();\n  \tthis.props.removeOverlay(title);\n  }\n\n  handleUpdate = (evt, updated) => {\n    console.log(evt); // tslint:disable-line\n    console.log(updated);\n  } // tslint:disable-line\n\n  renderMenu = () => {\n    const {layers, added, selected} = this.props;\n\n    let content = [];\n    layers.forEach((record, index) => {\n      content.push(\n\t\t      <div className={record === selected?\"menu-item selected\":\"menu-item\"} key={`${record}`} onClick={() => this.changeMap(record)}>\n            <img className = \"menu-icon\" src={`${process.env.PUBLIC_URL}/image/icon/${record}.svg`}/>\n\t\t      \t<div className = \"menu-title\">\n\t\t        \t{record}\n\t\t        </div>\n\t\t        {added[record]?\n              <img className = \"check-box\" src={`${process.env.PUBLIC_URL}/image/icon/check.svg`} onClick={(e) => this.removeOverlay(e, record)}/>\n    \t\t\t\t:\n              <img className = \"check-box\" src={`${process.env.PUBLIC_URL}/image/icon/uncheck.svg`} onClick={(e) => this.addOverlay(e, record)}/>\n    \t\t\t\t}\n\t\t      </div>\n      );\n    });\n    return content;\n  }\n\n  render() {\n\tvar content = this.renderMenu();\n    var count = 0;\n    for (var key in this.props.added){\n      if (this.props.added[key]){count ++};\n    }\n    return (\n      <div className=\"menu\" style={this.props.style}>\n        <div className=\"footer-wrapper\">\n          <img className = \"logo\" src={process.env.PUBLIC_URL + '/image/infomap-logo.svg'}/>\n      \t\t<Link to={`${process.env.PUBLIC_URL}/${this.props.longitude}/${this.props.latitude}`}>\n      \t\t\t<div className = \"back\">\n              <img className = \"back-icon\" src={process.env.PUBLIC_URL + '/image/icon/back.svg'}/>\n              Change Location\n            </div>\n      \t\t</Link>\n      \t\t{content}\n          <div className='divider'/>\n          <div className={this.props.selected === \"Overlay\"?\"menu-item selected\":\"menu-item\"} onClick={() => this.changeMap(\"Overlay\")}>\n            <img className = \"menu-icon\" src={`${process.env.PUBLIC_URL}/image/icon/Overlay.svg`}/>\n  \t      \t<div className = \"menu-title\">\n  \t        \tOverlay\n  \t        </div>\n            <div className = \"number\">{count}</div>\n          </div>\n          <div className=\"push\"/>\n        </div>\n        <div className='sidebar-footer'>\n          <div className='footer-tab'>About</div>\n          <div className='footer-tab'>Help</div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Sidebar);","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport axios from 'axios';\nimport D3Layers from \"./D3Layers\";\nimport Sidebar from \"./Sidebar\";\nimport '../scss/maps.scss';\n\nclass Maps extends React.Component {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\traw: null,\n\t\t\tlayers:[\"POI Map\", \"Nolli Map\", \"Visibility\", \"Traffic\", \"Natural Elements\"],\n\t\t\tadded:{\n\t\t\t\t\"POI Map\": true,\n\t\t\t\t\"Nolli Map\": true,\n\t\t\t\t\"Visibility\": false,\n\t\t\t\t\"Traffic\": false,\n\t\t\t\t\"Natural Elements\":false\n\t\t\t},\n\t\t\tselected:\"Nolli Map\",\n\t\t\tsidebar:false,\n\t\t\twidth: window.innerWidth\n\t\t}\n\t\tthis.bounds = this.props.match.params;\n\t}\n\n\tcomponentDidMount() { \n\t    axios.get(`https://api.openstreetmap.org/api/0.6/map?bbox=${this.bounds.wlng},${this.bounds.slat},${this.bounds.elng},${this.bounds.nlat}`)\n\t      \t.then(res => {\n\t        \tif(res.data){\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\traw: res.data,\n\t\t\t\t\t})\n\t        \t};\n\t      \t});\n    \twindow.addEventListener(\"resize\", this.resize);\n\t}\n\n  \tcomponentWillUnmount() {\n    \twindow.removeEventListener(\"resize\", this.resize);\n  \t}\n\n  \tresize = () => {\n  \t\tthis.setState({width:window.innerWidth});\n\t\tif (window.innerWidth>768){\n\t\t\tthis.setState({sidebar:false});\n\t\t}\n  \t}\n\n\tchangeMap = (key) => {\n\t\tthis.setState({\n\t\t\tselected: key\n\t\t})\n\t}\n\n\taddOverlay = (title) => {\n\t\tconst newlist = this.state.added;\n\t\tnewlist[title] = true;\n\t\tthis.setState({\n\t\t  added: newlist,\n\t\t})\t\n\t}\n\n\tremoveOverlay = (title) => {\n\t\tconst newlist = this.state.added;\n\t\tnewlist[title] = false;\n\t\tthis.setState({\n\t\t  added: newlist,\n\t\t})\t\n\t}\t\n\n\texpandSidebar = () => {\n\t\tthis.setState({sidebar: true})\n\t}\n\n\tfoldSidebar = () => {\n\t\tthis.setState({sidebar: false})\n\t}\n\n\t\n\trender() {\t\n\t\tvar longitude = (parseFloat(this.bounds.wlng) + parseFloat(this.bounds.elng))/2;\n\t\tvar latitude = (parseFloat(this.bounds.nlat) + parseFloat(this.bounds.slat))/2;\n\t    var sidebarStyle = {left: 0}\n\t    if (window.innerWidth<768 && !this.state.sidebar){sidebarStyle={left:-250}};\n\t    console.log(window.innerWidth);\n\t    console.log(this.state.sidebar);\n\t    console.log(sidebarStyle);\n\t\treturn (\n\t\t\t<div className=\"maps\">\n\t\t\t\t<Sidebar\n\t\t\t\t\tstyle={sidebarStyle}\n\t\t\t\t\tlayers = {this.state.layers}\n\t\t\t\t\tadded = {this.state.added}\n\t\t\t\t\tselected = {this.state.selected}\n\t\t\t\t\tchangeMap = {this.changeMap}\n\t\t\t\t\taddOverlay = {this.addOverlay}\n\t\t\t\t\tremoveOverlay = {this.removeOverlay}\n\t\t\t\t\tfoldSidebar = {this.foldSidebar}\n\t\t\t\t\tlongitude = {longitude}\n\t\t\t\t\tlatitude = {latitude}\n\t\t\t\t/>\n\t\t\t\t<div className=\"map-display\">\n\t\t\t\t\t<D3Layers\n\t\t\t\t\t\tlayers = {this.state.layers}\n\t\t\t\t\t\tadded = {this.state.added}\n\t\t\t\t\t\tselected = {this.state.selected}\n\t\t\t\t\t\t{...this.props.match.params}\n\t\t\t\t\t\trawdata = {this.state.raw}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className ='navbar'>\n\t\t\t\t\t<img className = \"icon\" src={process.env.PUBLIC_URL + '/image/icon/menu.svg'} onClick={this.expandSidebar}/>\n\t\t\t\t\t<img className = \"logo\" src={process.env.PUBLIC_URL + '/image/infomap-logo.svg'}/>\n\t\t    \t</div>\n\t\t    \t<div className={this.state.sidebar?'mask':'hide'} onClick={this.foldSidebar}/>\n\n\t\t\t\t<div className=\"raw hide\">\n\t\t\t\t\t<div>{`n: ${this.bounds.nlat} s: ${this.bounds.slat} w: ${this.bounds.wlng} e: ${this.bounds.elng}`}</div>\n\t\t\t\t\t<div>API address: {`https://api.openstreetmap.org/api/0.6/map?bbox=${this.bounds.wlng},${this.bounds.slat},${this.bounds.elng},${this.bounds.nlat}`}</div>\n\t\t\t\t</div>\n\t\t    </div>\n\t\t);\n\t}\n}\n\nexport default Maps;\n","import React from 'react';\nimport { withRouter } from \"react-router\";\n\nclass ScrollToTop extends React.Component {\n  componentDidUpdate(prevProps) {\n    if (this.props.location !== prevProps.location) {\n      window.scrollTo(0, 0);\n    }\n  }\n\n  render() {\n    return this.props.children;\n  }\n}\n\nexport default withRouter(ScrollToTop);","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Sidebar from \"./Sidebar\";\nimport '../scss/maps.scss'\n\nclass MapsDemo extends React.Component {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tsidebar:[\"Original\", \"Nolli Map\", \"Program\", \"Traffic\", \"POI Clustering\", \"Overlay\"],\n\t\t\toverlay:[\n\t\t\t\t{\n\t\t\t\t\tname: \"Nolli Map\",\n\t\t\t\t\topacity:100\n\t\t\t\t}\n\t\t\t],\n\t\t\tshuffled:[\n\t\t\t\t{\n\t\t\t\t\tname: \"Nolli Map\",\n\t\t\t\t\topacity:100\n\t\t\t\t}\n\t\t\t],\n\t\t\tselected:1\n\t\t}\n\t}\n\n\tcomponentDidMount() { \n\t}\n\n\tchangeMap = (key) => {\n\t\tthis.setState({\n\t\t\tselected: key\n\t\t})\n\t}\n\n\taddOverlay = (title) => {\n\t\tthis.setState({\n\t\t  overlay: [{name:title, opacity:100},...this.state.overlay],\n\t\t})\t\n\t}\n\n\tremoveOverlay = (title) => {\n\t\tconst index = this.state.overlay.indexOf(title);\n\t\tconst newlayers = this.state.overlay;\n\t\tnewlayers.splice(index, 1);\n\t\tthis.setState({\n\t\t  overlay: newlayers,\n\t\t})\t\n\t}\n\n\tsetOverlay = (data) => {\n\t\tconsole.log(data);\n\t\tthis.setState({\n\t\t\toverlay:data\n\t\t})\n\t}\n\n\tgetShuffled = (data) => {\n\t\tconsole.log(data);\n\t\tthis.setState({\n\t\t\tshuffled:data\n\t\t})\n\t}\n\n\tsetOpacity = (record, value) => {\n\t\tconst index = this.state.overlay.indexOf(record);\n\t\tconsole.log(index, value);\n\t\tconst newopacity = this.state.overlay;\n\t\tnewopacity[index] = {name: record.name, opacity:parseInt(value)};\n\t\tthis.setState({\n\t\t\toverlay: newopacity\n\t\t})\n\t}\n\t\n\trenderLayers = () => {\n\t\tconst layers = this.state.overlay;\n\t\tlet content = [];\n\t\tfor (let key in layers){\n\t\t\tcontent.push(\n\t\t\t\t<img key={layers[key].name} style={{position:\"absolute\", maxWidth: \"100%\", opacity:layers[key].opacity/100}} src={`${process.env.PUBLIC_URL}/image/demo/${layers[key].name}.png`} alt={`${layers[key].name}`} />\n\t\t\t);\n\t\t}\n\t\tconsole.log(content);\n\t\treturn content.reverse();\n\t}\n\n\trender() {\n\t\tconst selected = this.state.sidebar[this.state.selected];\n\t\treturn (\n\t\t\t<div className=\"maps\">\n\t\t\t\t<div className=\"functions\">\n\t\t\t\t\t<Link to={`${process.env.PUBLIC_URL}/demo`} className=\"back\">\n\t\t\t\t        <svg version=\"1.1\" viewBox=\"0 0 80 80\" className=\"back-icon\">\n\t\t\t\t\t\t\t<path id=\"XMLID_7_\" d=\"M74,35H18.1l23.5-23.5c2-2,2-5.1,0-7.1c-2-2-5.1-2-7.1,0l-32,32c0,0,0,0,0,0C2.2,36.7,2,37,1.8,37.2\n\t\t\t\tc-0.1,0.1-0.1,0.3-0.2,0.4c-0.1,0.2-0.2,0.3-0.2,0.5c-0.1,0.2-0.1,0.3-0.2,0.5c0,0.1-0.1,0.3-0.1,0.4c-0.1,0.6-0.1,1.3,0,2\n\t\t\t\tc0,0.1,0.1,0.3,0.1,0.4c0.1,0.2,0.1,0.3,0.2,0.5c0.1,0.2,0.2,0.3,0.2,0.5c0.1,0.1,0.1,0.3,0.2,0.4C2,43,2.2,43.3,2.5,43.5l32,32\n\t\t\t\tc1,1,2.3,1.5,3.5,1.5s2.6-0.5,3.5-1.5c2-2,2-5.1,0-7.1L18.1,45H74c2.8,0,5-2.2,5-5S76.8,35,74,35z\"/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t<div className=\"title\">Change Location</div>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<div className=\"button export-button\">Export This Mapping</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"clearfix\"/>\n\t\t\t\t<Sidebar\n\t\t\t\t\t{...this.state}\n\t\t\t\t\tchangeMap = {this.changeMap}\n\t\t\t\t\taddOverlay = {this.addOverlay}\n\t\t\t\t\tremoveOverlay = {this.removeOverlay}\n\t\t\t\t\tsetOverlay = {this.setOverlay}\n\t\t\t\t\tsetOpacity = {this.setOpacity}\n\t\t\t\t\tgetShuffled = {this.getShuffled}\n\t\t\t\t/>\n\t\t\t\t<div className=\"map-display\">\n\t\t\t\t\t{selected != \"Overlay\"?\n\t\t\t\t\t\t<img style={{position:\"absolute\", maxWidth: \"100%\"}}src={`${process.env.PUBLIC_URL}/image/demo/${selected}.png`} alt=\"selected\" />\n\t\t\t\t\t:\n\t\t\t\t\t\tthis.renderLayers()\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"clearfix\"/>\n\t\t    </div>\n\t\t);\n\t}\n}\n\nexport default MapsDemo;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nclass Footer extends React.Component {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t}\n\t}\n\n\tcomponentDidMount() { \n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"footer\">\n\t\t\t\t<div>Infomap v0.1.0 beta &copy; 2018 Wu Chenmu</div>\n\t\t    </div>\n\t\t);\n\t}\n}\n\nexport default Footer;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router, Route, Switch, Redirect } from 'react-router-dom';\nimport * as serviceWorker from './serviceWorker';\nimport Header from './modules/Header';\nimport SelectArea from './modules/SelectArea';\nimport Help from './modules/Help';\nimport About from './modules/About';\nimport Maps from './modules/Maps';\nimport MapsDemo from './modules/MapsDemo';\nimport ScrollToTop from './modules/ScrollToTop';\nimport Footer from './modules/Footer';\nimport './scss/base.scss';\nimport 'mapbox-gl/dist/mapbox-gl.css'\n\n\nReactDOM.render((\n<Router>\n\t<ScrollToTop>\n\t\t\t<Route exact path = {process.env.PUBLIC_URL + '/'} component = {SelectArea} />\n\t\t\t<Route exact path = {process.env.PUBLIC_URL + '/:lng/:lat'} component = {SelectArea} />\n\t\t\t<Route exact path = {process.env.PUBLIC_URL + '/help'} component = {Help} />\n\t\t\t<Route exact path = {process.env.PUBLIC_URL + '/about'} component = {About} />\n\t\t\t<Route exact path = {process.env.PUBLIC_URL + '/selected/:wlng/:slat/:elng/:nlat'} component = {Maps}/>\n\t</ScrollToTop>\n</Router>\n), document.getElementById('root'));\n\nserviceWorker.unregister();\n"],"sourceRoot":""}