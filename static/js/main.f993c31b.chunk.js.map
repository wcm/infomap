{"version":3,"sources":["serviceWorker.js","modules/Header.js","modules/Selector.js","modules/MapSelection.js","modules/SelectArea.js","modules/Help.js","modules/About.js","modules/NolliMap.js","modules/TrafficMap.js","modules/helpers.js","modules/VisibilityMap2.js","modules/D3Layers.js","modules/Sidebar.js","modules/Maps.js","modules/ScrollToTop.js","modules/MapsDemo.js","modules/Footer.js","index.js"],"names":["Boolean","window","location","hostname","match","Header","react_default","a","createElement","className","Link","to","process","style","height","src","alt","NavLink","activeClassName","React","Component","Selector","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","updateWindowDimensions","setState","width","innerWidth","updateXY","handlerID","e","_ref","deltaX","deltaY","x","state","y","setXY","handleStart","_ref2","setDragging","handleStop","_ref3","handleDrag","_ref4","dragging","addEventListener","removeEventListener","divWidth","divHeight","position","left","top","concat","react_draggable","onStart","bind","onDrag","onStop","MAPBOX_TOKEN","MapSelection","resize","handleViewportChange","viewport","isdragging","objectSpread","mapRef","current","bounds","getMap","getBounds","selBounds","n","_ne","lat","s","_sw","w","lng","handleOnResult","event","console","log","result","handleGeocoderViewportChange","transitionDuration","value","selector","getDistance","lat1","lon1","lat2","lon2","φ1","Math","PI","φ2","Δφ","Δλ","sin","cos","atan2","sqrt","getBoundArea","latitude","longitude","zoom","createRef","_this$state","nlat","slat","wlng","elng","area","toFixed","esm","assign","ref","onViewportChange","mapboxApiAccessToken","mapStyle","dist_default","onResult","showCompass","modules_Selector","withRouter","SelectArea","modules_MapSelection","Help","About","NolliMap","getBuildingCat","tag","cat","forEach","group","index","indexOf","showTooltip","tags","bbox","target","getBBox","tooltip","info","hideTooltip","content","_this$props","ways","nodes","relations","styles","fill","levels","color","id","building","shapes","members","element","type","pts","map","join","option","push","d","fillRule","stroke","strokeWidth","key","onMouseEnter","onMouseLeave","unshift","leisure","landuse","points","text","attr","charAt","toUpperCase","substr","toLowerCase","decodeURI","tooltipstyle","right","version","viewBox","TrafficMap","getWayCat","_this2","highway","strokeLinecap","strokeLinejoin","route","toString","radius","cx","cy","r","toRad","Value","distSq","x1","y1","x2","y2","svgIntersections","require","intersect","svgShape","shape","VisibilityMap","setPos","humans","setRegion","ratio","setArc","region","arcs","str","substring","length","split","num","parseFloat","array","i","abs","getArea","lengthratio","shaded","updateRegions","regions","changed","arc","angle","parts","shift","max","intersections","buildings","close","closePt","point","setRegions","setArcs","interval","setInterval","clearInterval","_this3","colors","human","handles","el","container","D3Layers","getDirDistance","checkSingle","data","Array","isArray","getWayPoints","node","mapPix","b","c","addLoading","loading","resetLoading","updateStates","rawdata","xml2js","compact","spaces","osmNode","osm","osmWay","way","osmRelation","relation","_attributes","nodeTag","lon","k","v","wayNd","nd","wayTag","children","footprint","relationMember","member","relationTag","role","pixratio","offsetWidth","random","getOptions","selected","selectedOption","options","title","onClick","setOption","addHuman","disabled","deleteHuman","newoptions","newhumans","newarcs","newregions","pop","Nolli Map","Traffic","Visibility","prevProps","optionbar","maps","ovl","modules_NolliMap","modules_TrafficMap","VisibilityMap2","added","Sidebar","changeMap","addOverlay","stopPropagation","removeOverlay","handleUpdate","evt","updated","renderMenu","layers","record","menu","Maps","newlist","raw","params","axios","get","then","res","modules_Sidebar","modules_D3Layers","ScrollToTop","scrollTo","Footer","ReactDOM","render","BrowserRouter","modules_ScrollToTop","modules_Header","Route","exact","path","component","modules_Footer","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.f993c31b.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport { NavLink, Link } from \"react-router-dom\";\nimport \"../scss/navbar.scss\";\n\nclass Header extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<div className = 'navbar-wrapper'>\n\t\t\t\t<div className = 'navbar-logo'><Link to = {process.env.PUBLIC_URL + '/'}><img style={{height: 40}} src={process.env.PUBLIC_URL + '/image/logo.svg'} alt='Infomap Logo' /></Link></div>\n\t\t\t\t<div className = 'navbar-tabs'>\n\t\t\t\t\t<NavLink className = 'navbar-tabitem' activeClassName = 'navbar-tabitem-active' to = {process.env.PUBLIC_URL + '/about'}>About</NavLink>\n\t\t\t\t\t<NavLink className = 'navbar-tabitem'activeClassName = 'navbar-tabitem-active' to = {process.env.PUBLIC_URL + '/help'}>Help</NavLink>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Header;\n","import React, { Component } from \"react\";\nimport { render } from \"react-dom\";\nimport Draggable, { DraggableCore }from 'react-draggable';\n\nclass Selector extends Component {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\twidth: 0,\n\t\t\theight: 600,\n\t\t\tdragging: false,\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t  this.updateWindowDimensions();\n\t  window.addEventListener('resize', this.updateWindowDimensions);\n\t}\n\n\tcomponentWillUnmount() {\n\t  window.removeEventListener('resize', this.updateWindowDimensions);\n\t}\n\n\tupdateWindowDimensions = () => {\n\t  this.setState({ width: window.innerWidth*0.9 });\n\t}\n\t\n\tupdateXY = (handlerID, e, { deltaX, deltaY }) => {\n\t\tif (handlerID === '1') {\n\t\t\tif (this.props.x+deltaX >= 40 && this.props.x+deltaX <= this.state.width/2-40 && this.props.y+deltaY >= 60 && this.props.y+deltaY <= this.state.height/2-40){\n\t\t\t\tthis.props.setXY({x: this.props.x+deltaX, y: this.props.y+deltaY});\n\t\t\t}\n\t\t}else if (handlerID === '2') {\n\t\t\tif (this.props.x-deltaX >= 40 && this.props.x-deltaX <= this.state.width/2-40 && this.props.y+deltaY >= 60 && this.props.y+deltaY <= this.state.height/2-40){\n\t\t\t\tthis.props.setXY({x: this.props.x-deltaX, y: this.props.y+deltaY});\n\t\t\t}\n\t\t}else if (handlerID === '3') {\n\t\t\tif (this.props.x+deltaX >= 40 && this.props.x+deltaX <= this.state.width/2-40 && this.props.y-deltaY >= 60 && this.props.y-deltaY <= this.state.height/2-40){\n\t\t\t\tthis.props.setXY({x: this.props.x+deltaX, y: this.props.y-deltaY});\n\t\t\t}\n\t\t}else if (handlerID === '4') {\n\t\t\tif (this.props.x-deltaX >= 40 && this.props.x-deltaX <= this.state.width/2-40 && this.props.y-deltaY >= 60 && this.props.y-deltaY <= this.state.height/2-40){\n\t\t\t\tthis.props.setXY({x: this.props.x-deltaX, y: this.props.y-deltaY});\n\t\t\t}\n\t\t}\n\t}\n\n\thandleStart = (handlerID, e, { deltaX, deltaY }) => {\n\t\tthis.props.setDragging(true);\n\t\tthis.updateXY(handlerID, e, { deltaX, deltaY });\n\t}\n\n\thandleStop = (handlerID, e, { deltaX, deltaY }) => {\n\t\tthis.props.setDragging(false);\n\t\tthis.updateXY(handlerID, e, { deltaX, deltaY });\n\t}\n\n\thandleDrag = (handlerID, e, { deltaX, deltaY }) => {\n\t\tthis.updateXY(handlerID, e, { deltaX, deltaY });\n\t}\n\n\trender() {\n\t\tconst divWidth = this.state.width;\n\t\tconst divHeight = this.state.height;\n\t\treturn (\n\t\t\t<div className='selector'>\n\t\t\t\t<div className='shader'\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\tleft:0,\n\t\t\t\t\t\ttop:0,\n\t\t\t\t\t\theight: `${ divHeight }px`,\n\t\t\t\t\t\twidth: `${ this.props.x }px`\n\t\t\t\t\t}}\t\t\t\t\t\n\t\t\t\t/>\n\t\t\t\t<div className='shader'\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\tleft:`${ divWidth-this.props.x }px`,\n\t\t\t\t\t\ttop:0,\n\t\t\t\t\t\theight: `${ divHeight }px`,\n\t\t\t\t\t\twidth: `${ this.props.x }px`\n\t\t\t\t\t}}\t\t\t\t\t\n\t\t\t\t/>\n\t\t\t\t<div className='shader'\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\tleft:`${ this.props.x }px`,\n\t\t\t\t\t\ttop:0,\n\t\t\t\t\t\theight: `${ this.props.y }px`,\n\t\t\t\t\t\twidth: `${ divWidth-this.props.x*2 }px`\n\t\t\t\t\t}}\t\t\t\t\t\n\t\t\t\t/>\n\t\t\t\t<div className='shader'\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\tleft:`${ this.props.x }px`,\n\t\t\t\t\t\ttop:`${ divHeight-this.props.y }px`,\n\t\t\t\t\t\theight: `${ this.props.y }px`,\n\t\t\t\t\t\twidth: `${ divWidth-this.props.x*2 }px`\n\t\t\t\t\t}}\t\t\t\t\t\n\t\t\t\t/>\n\t\t      <DraggableCore\n\t\t        onStart={this.handleStart.bind(this, '1')}\n\t\t        onDrag={this.handleDrag.bind(this, '1')}\n\t\t        onStop={this.handleStop.bind(this, '1')}>\n\t\t        <div className=\"handler\" style={{top:this.props.y-6, left:this.props.x-6}}/>\n\t\t      </DraggableCore>\n\t\t      <DraggableCore\n\t\t        onStart={this.handleStart.bind(this, '2')}\n\t\t        onDrag={this.handleDrag.bind(this, '2')}\n\t\t        onStop={this.handleStop.bind(this, '2')}>\n\t\t        <div className=\"handler\" style={{top:this.props.y-6, left:divWidth-this.props.x-6}}/>\n\t\t      </DraggableCore>\n\t\t      <DraggableCore\n\t\t        onStart={this.handleStart.bind(this, '3')}\n\t\t        onDrag={this.handleDrag.bind(this, '3')}\n\t\t        onStop={this.handleStop.bind(this, '3')}>\n\t\t        <div className=\"handler\" style={{top:divHeight-this.props.y-6, left:this.props.x-6}}/>\n\t\t      </DraggableCore>\n\t\t      <DraggableCore\n\t\t        onStart={this.handleStart.bind(this, '4')}\n\t\t        onDrag={this.handleDrag.bind(this, '4')}\n\t\t        onStop={this.handleStop.bind(this, '4')}>\n\t\t        <div className=\"handler\" style={{top:divHeight-this.props.y-6, left:divWidth-this.props.x-6}}/>\n\t\t      </DraggableCore>\n\t\t\t</div>\n\t\t)\n\t}\n};\n\nexport default Selector;","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport MapGL, {NavigationControl} from \"react-map-gl\";\nimport Geocoder from \"react-map-gl-geocoder\";\nimport {withRouter} from \"react-router\";\nimport Selector from './Selector';\n\nconst MAPBOX_TOKEN =\"pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4M29iazA2Z2gycXA4N2pmbDZmangifQ.-g_vE53SD2WrJ6tFX7QHmA\";\n\nclass MapSelection extends Component {\n  \tconstructor(props: Props) {\n\t    super(props);\n\t    this.state = {\n\t    \tviewport: {\n\t\t    \twidth: '100%',\n\t\t      \theight: '600px',\n\t\t      \tlatitude: 48.1358,\n\t\t      \tlongitude: 11.5611,\n\t\t      \tzoom: 15\n\t    \t},\t\n\t    \tselector:{\n\t    \t\tx: 0,\n\t    \t\ty: 0\n\t    \t},\n\t    \tisdragging: false,\n\t    \tselBounds:{\n\t    \t\tn: 0,\n\t    \t\ts: 0,\n\t    \t\tw: 0,\n\t    \t\te: 0\n\t    \t},\n\t    \twidth: 0\n\t  \t};\n\t  \tthis.mapRef = React.createRef();\n\t};\n\n  \t\n\n  \tcomponentDidMount() {\n    \twindow.addEventListener(\"resize\", this.resize);\n    \tthis.resize();\n    \tconst myMap = this.mapRef.current.getMap();\n    \tconst bounds = myMap.getBounds();\n    \tthis.setState({\n\t    \tselBounds:{\n\t    \t\tn: bounds._ne.lat,\n\t    \t\ts: bounds._sw.lat,\n\t\t\t\tw: bounds._sw.lng,\n\t    \t\te: bounds._ne.lng\n\t    \t},\n\t    \tselector:{\n\t    \t\tx: window.innerWidth*0.9/4,\n\t    \t\ty: 600/4\n\t    \t}\n\t    })\n  \t}\n\n  \tcomponentWillUnmount() {\n    \twindow.removeEventListener(\"resize\", this.resize);\n  \t}\n\n  \tresize = () => {\n  \t\tthis.setState({width: window.innerWidth*0.9})\n    \tthis.handleViewportChange({\n      \twidth: '100%',\n    \t});\n  \t}\n\n  \thandleViewportChange = (viewport) => {\n  \t\tif (this.state.isdragging === false){\n\t    \tthis.setState({\n\t    \t\tviewport: { ...this.state.viewport, ...viewport },\n\t    \t});\n\t    \tif (this.mapRef.current) {\n\t    \t\tconst myMap = this.mapRef.current.getMap();\n\t\t    \tconst bounds = myMap.getBounds();\n\t\t    \tthis.setState({selBounds:{\n\t\t    \t\tn: bounds._ne.lat,\n\t\t    \t\ts: bounds._sw.lat,\n\t\t\t\t\tw: bounds._sw.lng,\n\t\t    \t\te: bounds._ne.lng\n\t\t    \t}})\n\n\t    \t}\n    \t}\n  \t}\n\n  \thandleOnResult = (event) => {\n    \tconsole.log(event.result);\n  \t}\n\n  \thandleGeocoderViewportChange = (viewport) => {\n    \tconst geocoderDefaultOverrides = { transitionDuration: 100 };\n\t\tconsole.log(viewport);\n\t    this.handleViewportChange({\n\t      \t...viewport,\n\t      \t...geocoderDefaultOverrides,\n\t    });\n\n  \t}\n\n  \tsetDragging = (value) => {\n  \t\tthis.setState({isdragging: value});\n  \t}\n\n  \tsetXY = (value) => {\n  \t\tthis.setState({selector: value});  \t\t\n  \t}\n\t\n\tgetDistance = (lat1, lon1, lat2, lon2) => {\n\t  \tvar R = 6371e3; // metres\n\t\tvar φ1 = lat1* Math.PI / 180;\n\t\tvar φ2 = lat2* Math.PI / 180;\n\t\tvar Δφ = (lat2-lat1)* Math.PI / 180;\n\t\tvar Δλ = (lon2-lon1)* Math.PI / 180;\n\n\t\tvar a = Math.sin(Δφ/2) * Math.sin(Δφ/2) +\n\t\t        Math.cos(φ1) * Math.cos(φ2) *\n\t\t        Math.sin(Δλ/2) * Math.sin(Δλ/2);\n\t\tvar c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n\n\t\treturn R * c;\n\t}\n\t\n\tgetBoundArea = (lat1, lat2, lon1, lon2) => {\n\t\treturn this.getDistance(lat1, lon1, lat1, lon2) * this.getDistance(lat1, lon1, lat2, lon1)\n\t}\n\n  \trender() {\n    \tconst { viewport, selector, selBounds } = this.state;\n\t    const nlat = selBounds.n - selector.y/600*(selBounds.n-selBounds.s);\n\t    const slat = selBounds.s + selector.y/600*(selBounds.n-selBounds.s);\n\t    const wlng = selBounds.w + selector.x/this.state.width*(selBounds.e-selBounds.w);\n\t    const elng = selBounds.e - selector.x/this.state.width*(selBounds.e-selBounds.w);\n\t    const area = this.getBoundArea(nlat, slat, wlng, elng).toFixed(2);\n\t    return (\n\t    \t<div>\n\t\t\t\t<MapGL\n\t\t\t\t\tclassName='map'\n\t\t\t\t    ref={this.mapRef}\n\t\t\t\t    {...viewport}\n\t\t\t\t    onViewportChange={this.handleViewportChange}\n\t\t\t\t    mapboxApiAccessToken={MAPBOX_TOKEN}\n\t\t\t\t    mapStyle='mapbox://styles/mapbox/streets-v9'\n\t\t\t\t>\n\t\t\t\t\t<Geocoder\n\t\t\t\t\t    mapRef={this.mapRef}\n\t\t\t\t\t    onResult={this.handleOnResult}\n\t\t\t\t        onViewportChange={this.handleGeocoderViewportChange}\n\t\t\t\t        mapboxApiAccessToken={MAPBOX_TOKEN}\n\t\t\t\t        position=\"top-left\"\n\t\t\t\t    />\n\t\t\t        <div className='control'>\n\t\t\t        <NavigationControl \n\t\t\t        \tshowCompass={false}\n\t\t\t          \tonViewportChange={this.handleViewportChange} \n\t\t\t        />\n\t\t\t        </div>\n\t\t\t\t\t<Selector\n\t\t\t\t    \t{...selector}\n\t\t\t\t    \tsetDragging = {this.setDragging}\n\t\t\t\t    \tsetXY = {this.setXY}\n\t\t\t\t    />\n\n\t\t\t\t</MapGL>\n\t\t\t\t{area <= 4000000? \n\t\t\t\t\t<div className='row'>\n\t\t\t\t\t\t<div className=\"area-indicator\">\n\t\t\t\t\t\t\t<div className=\"area-indicator-fill\" style={{width: area/4000000*200}}></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"area-number\">Area: {area} m &#178;</div>\n\t\t\t\t\t    <Link to={`${process.env.PUBLIC_URL}/selected/${wlng}/${slat}/${elng}/${nlat}`}> \n\t\t\t\t\t\t\t<div className='button proceed-button'>Proceed to Analysis </div>\n\t\t\t\t    \t</Link>\n\t\t\t\t\t\t<div className='proceed-alert green'> You can use this selected region. </div>\n\t\t\t\t    </div>\n\t\t\t    :\n\t\t\t\t\t<div className='row'>\n\t\t\t\t\t\t<div className=\"area-indicator\">\n\t\t\t\t\t\t\t<div className=\"area-indicator-fill area-exceed\" style={{width: 200}}></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"area-number\">Area: &#62;5 km &#178;</div>\n\t\t\t\t\t\t<div className='button button-disabled proceed-button'>Proceed to Analysis </div>\n\t\t\t\t\t\t<div className='proceed-alert red'> Area of the selected region is too big. </div>\n\t\t\t\t\t</div>\n\t\t    \t}\n\t\t\t    <div className='clearfix'/>\n\t\t\t\t<div className='raw'>\n\t\t\t\t    <div>\n\t\t\t\t    \t<p>Viewport Coordinates:</p>\n\t\t\t\t    \t<p> {`n: ${selBounds.n} s: ${selBounds.s} w: ${selBounds.w} e: ${selBounds.e}`}</p>\n\t\t\t\t    </div>\n\t\t\t    \t<div>\n\t\t\t    \t\t<p>Selected Region Coordinates:</p>\n\t\t\t    \t\t<p> {`n: ${nlat} s: ${slat} w: ${wlng} e: ${elng}`}</p>\n\t\t\t    \t</div>\n\t\t\t    \t<div>\n\t\t\t    \t\t<p>Selected Region Area:</p>\n\t\t\t    \t\t<p> {area}</p>\n\t\t\t    \t</div>\n\t\t    \t</div>\n\t\t    \t}\n\t\t    </div>\n\t    );\n  \t}\n};\n\nexport default withRouter(MapSelection);","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport '../scss/selectarea.scss'\nimport MapSelection from './MapSelection'\n\nclass SelectArea extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<div className = 'content-wrapper'>\n\t\t\t\t<div className = 'title'>Select an Area</div>\n\t\t\t\t<MapSelection/>\n\t\t\t\t{/*TODO*/}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default SelectArea;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nclass Help extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div>Help</div>\n\t\t\t\t{/*TODO*/}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Help;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nclass About extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div>About</div>\n\t\t\t\t{/*TODO*/}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default About;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nclass NolliMap extends React.Component {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\ttooltip: false,\n\t\t\tinfo: {},\n\t\t\tleft: true,\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t}\n\n\tgetBuildingCat = (tag) => {\n\t\tconst keys = [\n\t\t\t[\"apartments\",\"farm\", \"hotel\", \"house\", \"detached\", \"residential\", \"dormitory\", \"terrace\", \"houseboat\", \"bungalow\", \"static_caravan\", \"cabin\"],\n\t\t\t[\"commercial\", \"office\", \"industrial\", \"retail\", \"supermarket\", \"warehouse\", \"kiosk\"],\n\t\t\t[\"religious\", \"cathedral\", \"chapel\", \"church\", \"mosque\", \"temple\", \"synagogue\", \"shrine\"],\n\t\t\t[\"bakehouse\", \"kindergarten\", \"civic\", \"government\", \"hospital\", \"school\", \"stadium\", \"train_station\", \"transportation\", \"university\", \"grandstand\", \"public\", \"toilets\", \"service\", \"parking\", \"garages\", \"garage\", \"sports_hall\", \"bridge\", \"\tcarport\", \"hangar\"],\n\t\t\t[\"greenhouse\",\"pavilion\", \"farm_auxiliary\", \"barn\"]\n\t\t]\n\n\t\tvar cat = 5;\n\n\t\tkeys.forEach((group, index) => {\n\t\t\tif(group.indexOf(tag) !== -1){\n\t\t\t\tcat = index;\n\t\t\t}\n\t\t});\n\n\t\treturn cat;\n\t}\n\n\n\tshowTooltip = (tags, e) =>{\n\t\tvar bbox = e.target.getBBox();\n\t\tif ((bbox.x + bbox.width/2) >= (this.props.width/2)){\n\t\t\tthis.setState({left: true})\n\t\t} else {\n\t\t\tthis.setState({left: false})\n\t\t}\n\t\tthis.setState({\n\t\t\ttooltip: true,\n\t\t\tinfo: tags,\n\t\t})\n\n\t}\n\n\thideTooltip = () =>{\n\n\t\tthis.setState({\n\t\t\ttooltip: false,\n\t\t\tinfo: {}\n\t\t})\n\n\t}\n\n\trender() {\n\t\tlet content = [];\n\t\tvar {width, height, nodes, ways, relations} = this.props;\n\t\tvar info = this.state.info;\n\t\tconst styles = [\n\t\t\t{\n\t\t\t\tfill: \"#ad4a00\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfill: \"#7693d3\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfill: \"#0053cc\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfill: \"#cb00d1\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfill: \"#b6ff97\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfill: \"rgba(60, 60, 60)\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfill: \"rgba(52, 168, 0, .4)\"\n\t\t\t}\n\t\t];\n\n\t\tvar cat = -1\n\n\t    var levels = null;\n\t    var color = \"rgba(60, 60, 60)\";\n\n\t    for (var id in relations) {\n\n\t    \tif (relations[id].tag.building || relations[id].tag[\"buidling:part\"]){\n\t    \t\tvar shapes = '';\n\t    \t\tcolor = \"rgba(60,60,60)\";\n\t    \t\t\n\t    \t\trelations[id].members.forEach((element)=>{\n\t    \t\t\tif (element.type === 'way' && element.value) {\n\t\t    \t\t\tvar pts = element.value.map(e => e.join(',')).join(' ');\n\t\t    \t\t\tshapes += `M ${pts}`;\n\t\t    \t\t}\n\t    \t\t})\n\n\t    \t\tif (this.props.option === \"Height\"){\n\t    \t\t\tlevels = relations[id].tag[\"building:levels\"];\n\t    \t\t\tif (levels){\n\t\t    \t\t\tcolor = `rgba(0,0,255,${levels/10})`;\n\t\t\t    \t\tcontent.push(\n\t\t\t    \t\t\t<path d={shapes} fillRule=\"evenodd\" fill={color} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t    \t\t\t\t<title>{id}</title>\n\t\t\t    \t\t\t</path>\n\t\t\t    \t\t);\n\t\t    \t\t}else{\n\t\t\t    \t\tcontent.unshift(\n\t\t\t    \t\t\t<path d={shapes} fillRule=\"evenodd\" fill={color} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t    \t\t\t\t<title>{id}</title>\n\t\t\t    \t\t\t</path>\n\t\t\t    \t\t);\n\t\t    \t\t}\n\t\t    \t}else if (this.props.option === \"Program\"){\n\t\t    \t\tcat = this.getBuildingCat(relations[id].tag.building);\n\t\t\t    \tcontent.push(\n\t\t\t    \t\t<path d={shapes} fillRule=\"evenodd\" fill={styles[cat].fill} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t    \t\t\t<title>{id}</title>\n\t\t\t    \t\t</path>\n\t\t\t    \t);\n\t\t    \t}else if (this.props.option === \"None\"){\n\t\t\t    \tcontent.push(\n\t\t\t    \t\t<path d={shapes} fillRule=\"evenodd\" fill={color} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t    \t\t\t<title>{id}</title>\n\t\t\t    \t\t</path>\n\t\t\t    \t);\n\t\t    \t}\n\n\t\t\t}else if ((relations[id].tag.leisure || relations[id].tag.landuse === \"grass\") && this.props.option === \"Program\"){\n\t    \t\tvar shapes = '';\n\t    \t\trelations[id].members.forEach((element)=>{\n\t    \t\t\tif (element.type === 'way' && element.value) {\n\t\t    \t\t\tvar pts = element.value.map(e => e.join(',')).join(' ');\n\t\t    \t\t\tshapes += `M ${pts}`;\n\t\t    \t\t}\n\t    \t\t})\n\t\t    \tcontent.push(\n\t\t    \t\t<path d={shapes} fillRule=\"evenodd\" fill={styles[6].fill} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t    \t\t\t<title>{id}</title>\n\t\t    \t\t</path>\n\t\t    \t);\n\t\t\t}\n\n\t    };\n\n\n\t    for (id in ways) {\n\n\t    \tif (ways[id].tag.building){\n\n\t    \t\tvar pts = ways[id].points.map(e => e.join(',')).join(' ');\n\t\t    \tcolor = \"rgba(60,60,60)\";\n\t    \t\tif (this.props.option === \"Height\"){\n\t\t    \t\tlevels = ways[id].tag[\"building:levels\"];\n\t    \t\t\tif (levels) {\n\t\t    \t\t\tcolor = `rgba(0,0,255,${levels/10})`;\n\t\t\t    \t\tcontent.push(\n\t\t\t    \t\t\t<polygon points={pts} fill={color} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, ways[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}/>\n\t\t\t    \t\t)\n\t\t    \t\t}else{\n\t\t\t    \t\tcontent.unshift(\n\t\t\t    \t\t\t<polygon points={pts} fill={color} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, ways[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}/>\n\t\t\t    \t\t)\t    \t\t\t\n\t\t    \t\t}\n\t\t    \t}else if (this.props.option === \"Program\"){\n\t\t\t\t\tcat = this.getBuildingCat(ways[id].tag.building);\n\t\t    \t\tcontent.push(\n\t\t\t    \t\t<polygon points={pts} fill={styles[cat].fill} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, ways[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}/>\n\t\t\t    \t)\n\n\t\t    \t}else if (this.props.option === \"None\"){\n\t\t\t    \tcontent.push(\n\t\t\t    \t\t<polygon points={pts} fill={color} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, ways[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}/>\n\t\t\t    \t)\n\t\t    \t}\n\n\t\t\t}else if ((ways[id].tag.leisure || ways[id].tag.landuse === \"grass\") && this.props.option === \"Program\"){\n\t\t\t\tvar pts = ways[id].points.map(e => e.join(',')).join(' ');\n\t\t    \tcontent.push(\n\t\t    \t\t<polygon points={pts} fill={styles[6].fill} stroke=\"white\" strokeWidth=\".5\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, ways[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}/>\n\t\t    \t)\n\t\t\t}\n\t    };\n\n/*\t    for (var id in nodes) {\n\t    \tif (nodes[id].tag != {}){\n\t\t\t\tcontent.push(\n\t\t\t\t\t<circle cx={nodes[id].x} cy={nodes[id].y} r=\"2\" fill=\"red\" key={id}/>\n\t\t\t\t)\n\t\t\t}\n\t    };\n*/\n\t\tvar text = [];\n\t\tfor (var key in info){\n\t\t\tif(!(key === \"building\" && info[key] === \"yes\")){\n\t\t\t\tvar attr = key.charAt(0).toUpperCase() + key.substr(1).toLowerCase();\n\t\t\t\ttext.push(\n\t\t\t\t\t<div className=\"tooltip-info\" key={key}><span className=\"tooltip-key\">{attr}: </span>{info[key]} {attr === \"Footprint\"? decodeURI(\"m%C2%B2\"):\"\"}</div>\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\n\t\tvar tooltipstyle = {};\n\n\t\tif (this.state.left){\n\t\t\ttooltipstyle = {\n\t\t\t\ttop: \"0\",\n\t\t\t\tleft: \"0\"\n\t\t\t}\n\t\t}else{\n\t\t\ttooltipstyle = {\n\t\t\t\ttop: \"0\",\n\t\t\t\tright: \"0\"\n\t\t\t}\n\t\t}\n\t\treturn(\n\t\t\t<div className=\"nollimap\">\n\t\t\t\t<svg version=\"1.1\" viewBox={`0 0 ${width} ${height}`} style = {{width: this.state.width}}>\n\t\t\t\t\t{content}\n\t\t\t\t</svg>\n\t\t\t\t<div className={this.state.tooltip? \"tooltip\":\"hide\"} style={tooltipstyle}>\n\t\t\t\t\t<div className=\"tooltip-title\">Building Details</div>\n\t\t\t\t\t{text}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n\n}\n\nexport default NolliMap","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nclass TrafficMap extends React.Component {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\ttooltip: false,\n\t\t\tinfo: {},\n\t\t\tleft: true,\n\t\t}\n\t}\n\n\tshowTooltip = (tags, e) =>{\n\t\tvar bbox = e.target.getBBox();\n\t\tif ((bbox.x + bbox.width/2) >= (this.props.width/2)){\n\t\t\tthis.setState({left: true})\n\t\t} else {\n\t\t\tthis.setState({left: false})\n\t\t}\n\t\tthis.setState({\n\t\t\ttooltip: true,\n\t\t\tinfo: tags,\n\t\t})\n\n\t}\n\n\thideTooltip = () =>{\n\n\t\tthis.setState({\n\t\t\ttooltip: false,\n\t\t\tinfo: {}\n\t\t})\n\n\t}\n\n\tgetWayCat = (tag) => {\n\t\tconst keys = [\n\t\t\t[\"motorway\",\"trunk\", \"motorway_link\", \"trunk_link\"],\n\t\t\t[\"primary\", \"primary_link\"],\n\t\t\t[\"secondary\", \"tertiary\", \"secondary_link\", \"tertiary_link\", \"raceway\"],\n\t\t\t[\"unclassified\", \"residential\", \"living_street\", \"road\", \"escape\"],\n\t\t\t[\"service\",\"pedestrian\", \"track\", \"bus_guideway\", \"footway\", \"bridleway\", \"steps\", \"path\", \"cycleway\"]\n\t\t]\n\n\t\tvar cat = 5;\n\n\t\tkeys.forEach((group, index) => {\n\t\t\tif(group.indexOf(tag) !== -1){\n\t\t\t\tcat = index;\n\t\t\t}\n\t\t});\n\n\t\treturn cat;\n\t}\n\n\trender() {\n\t\tlet content = [[], [], [], [], [], []];\n\t\tvar {width, height, nodes, ways, relations} = this.props;\n\t\tvar info = this.state.info;\n\n\t\tconst styles = [\n\t\t\t{\n\t\t\t\tcolor: \"#b5451a\",\n\t\t\t\tstrokeWidth: \"8\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolor: \"#f15c22\",\n\t\t\t\tstrokeWidth: \"6\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolor: \"#f47d4e\",\n\t\t\t\tstrokeWidth: \"6\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolor: \"#f79d7a\",\n\t\t\t\tstrokeWidth: \"4\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolor: \"#f9bea7\",\n\t\t\t\tstrokeWidth: \"3\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tcolor: \"#fcded3\",\n\t\t\t\tstrokeWidth:\"4\"\n\t\t\t}\n\t\t];\n\n\t\tvar cat = -1;\n\t\tvar style = {};\n\n\t    for (var id in ways) {\n\n\t    \tif (ways[id].tag.highway && (this.props.option === \"Roads\" || this.props.option === \"Both\")){\n\t    \t\tvar pts = ways[id].points.map(e => e.join(',')).join(' ');\n\t    \t\tcat = this.getWayCat(ways[id].tag.highway);\n\t    \t\tstyle = styles[cat];\n\t\t    \tcontent[5-cat].push(\n\t\t\t    \t<path d={`M ${pts}`} fill=\"none\" stroke={style.color} strokeWidth={style.strokeWidth} strokeLinecap=\"round\" strokeLinejoin=\"round\" key={id+\"w\"} onMouseEnter={this.showTooltip.bind(this, ways[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t\t\t    <title>{id}</title>\n\t\t\t\t\t</path>\n\t\t    \t)\n\t\t\t}\n\t    };\n\n\t    for (id in relations) {\n\t    \tif (relations[id].tag.route && (this.props.option === \"Public Transport\" || this.props.option === \"Both\")){\n\t    \t\trelations[id].members.forEach((element, index)=>{\n\t    \t\t\tif (element.type === 'way' && element.value) {\n\t\t    \t\t\tvar pts = element.value.map(e => e.join(',')).join(' ');\n\t\t\t\t    \tcontent.push(\n\t\t\t\t    \t\t<path d={`M ${pts}`} fill=\"none\" stroke=\"red\" strokeWidth=\"1\" key={index.toString()+id} onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t\t    \t\t\t<title>{id}</title>\n\t\t\t\t    \t\t</path>\n\t\t\t\t    \t)\n\t\t    \t\t}else if(element.type === 'node' && element.value){\n\t\t    \t\t\tvar radius = 20;\n\t\t    \t\t\tif (relations[id].tag.route === \"subway\" || relations[id].tag.route === \"train\"){radius = 40}\n\t\t\t\t    \tcontent.push(\n\t\t\t\t    \t\t<g key={index.toString()+id}>\n\t\t\t    \t\t\t\t<circle cx={element.value[0]} cy={element.value[1]} r={radius} fill=\"rgba(255,90,90,.2)\" onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t\t\t    \t\t\t<title>{id}</title>\n\t\t\t\t\t    \t\t</circle> \n\t\t\t    \t\t\t\t<circle cx={element.value[0]} cy={element.value[1]} r=\"2\" fill=\"#803535\" onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t\t\t\t    \t\t\t<title>{id}</title>\n\t\t\t\t\t    \t\t</circle> \n\t\t\t\t    \t\t</g>\n\t\t\t\t    \t)    \t\t\t\n\t\t    \t\t}\n\t    \t\t})\n\t\t\t}else if(relations[id].tag.highway && (this.props.option === \"Roads\" || this.props.option === \"Both\")){\n\t    \t\tvar shapes = '';\n\t    \t\trelations[id].members.forEach((element)=>{\n\t    \t\t\tif (element.type === 'way' && element.value) {\n\t\t    \t\t\tvar pts = element.value.map(e => e.join(',')).join(' ');\n\t\t    \t\t\tshapes += `M ${pts}`;\n\t\t    \t\t}\n\t    \t\t})\n\t    \t\tcat = this.getWayCat(relations[id].tag.highway);\n\t    \t\tstyle = styles[cat];\n\t\t    \tcontent[5-cat].push(\n\t\t    \t\t<path d={shapes} fillRule=\"evenodd\" fill={style.color} stroke=\"none\" key={id} className=\"nolli-building\" onMouseEnter={this.showTooltip.bind(this, relations[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}>\n\t\t    \t\t\t<title>{id}</title>\n\t\t    \t\t</path>\n\t\t    \t)\n\n\t\t\t}\n\t    };\n\n\n{/*\t    for (id in nodes) {\n\t    \tif (nodes[id].tag.highway){\n\t\t\t\tcontent.push(\n\t\t\t\t\t<circle cx={nodes[id].x} cy={nodes[id].y} r=\"3\" fill=\"red\" stroke=\"white\" strokeWidth=\".5\" key={id} onMouseEnter={this.showTooltip.bind(this, nodes[id].tag)} onMouseLeave={this.hideTooltip.bind(this)}/>\n\t\t\t\t)\n\t\t\t}\n\t    }; */}\n\n\t\tvar text = [];\n\t\tfor (var key in info){\n\t\t\tvar attr = key.charAt(0).toUpperCase() + key.substr(1).toLowerCase();\n\t\t\ttext.push(\n\t\t\t\t<div className=\"tooltip-info\" key={key}><span className=\"tooltip-key\">{attr}: </span>{info[key]} {attr === \"Footprint\"? decodeURI(\"m%C2%B2\"):\"\"}</div>\n\t\t\t)\n\t\t}\n\n\t\tvar tooltipstyle = {};\n\n\t\tif (this.state.left){\n\t\t\ttooltipstyle = {\n\t\t\t\ttop: \"0\",\n\t\t\t\tleft: \"0\"\n\t\t\t}\n\t\t}else{\n\t\t\ttooltipstyle = {\n\t\t\t\ttop: \"0\",\n\t\t\t\tright: \"0\"\n\t\t\t}\n\t\t}\n\n\t\treturn(\n\t\t\t<div className=\"nollimap\">\n\t\t\t\t<svg version=\"1.1\" viewBox={`0 0 ${width} ${height}`} style = {{width: this.state.width}}>\n\t\t\t\t\t{content}\n\t\t\t\t</svg>\n\t\t\t\t<div className={this.state.tooltip? \"tooltip\":\"hide\"} style={tooltipstyle}>\n\t\t\t\t\t<div className=\"tooltip-title\">Route Details</div>\n\t\t\t\t\t{text}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n\n}\n\nexport default TrafficMap","export function toRad(Value) {\n    /** Converts numeric degrees to radians */\n    return Value * Math.PI / 180;\n}\n\nexport function distSq(x1, y1, x2, y2){\n    return (x2-x1)*(x2-x1) + (y2-y1)*(y2-y1);\n}\n\nexport function\tgetArea(array) {\n\t    var x = array;\n\t    var a = 0;\n\t    if (x.length < 3) return 0;\n\t    for (var i = 0; i < (x.length-1); i += 1) {\n\t        a += x[i][0] * x[i+1][1] - x[i+1][0] * x[i][1];\n\t    }\n\t    return Math.abs(a * 1.0 / 2);\n\t}\n","import React from \"react\";\nimport ReactDOM from 'react-dom';\nimport { DraggableCore }from 'react-draggable';\nimport {toRad, distSq, getArea} from \"./helpers\";\n\nvar svgIntersections = require('svg-intersections');\nvar intersect = svgIntersections.intersect;\nvar svgShape = svgIntersections.shape;\n\nclass VisibilityMap extends React.Component {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.ratio = this.props.ratio;\n\t    this.angle = 2;\n\n\t\tvar buildings = \"\";\n\t\tvar {nodes, ways, relations} = this.props;\n\n\t    for (var id in relations) {\n\n\t    \tif (relations[id].tag.building || relations[id].tag[\"buidling:part\"]){\n\t    \t\tvar shapes = '';\n\t    \t\t\n\t    \t\trelations[id].members.forEach((element)=>{\n\t    \t\t\tif (element.type === 'way' && element.value) {\n\t\t    \t\t\tvar pts = element.value.map(e => e.join(',')).join(' ');\n\t\t    \t\t\tshapes += `M ${pts}`;\n\t\t    \t\t}\n\t    \t\t})\n\n\t\t\t    buildings += shapes;\n\t\t    }\n\t    };\n\n\n\t    for (id in ways) {\n\n\t    \tif (ways[id].tag.building){\n\n\t    \t\tvar pts = ways[id].points.map(e => e.join(',')).join(' ');\n\t\t\t    buildings += `M ${pts}`;\n\t\t\t}\n\t    };\n\n\t    this.buildings = buildings;\n\t    for (var key in this.props.regions){\n\t    \tif(this.props.regions[key] === \"\"){this.props.setRegion(key, `M${this.props.humans[key][0]/this.props.ratio},${this.props.humans[key][1]/this.props.ratio} `)};\n\t    }\n\t    this.state = {\n\t\t\ttooltip: 0,\n\t\t\tshaded: \"\",\n\t\t\tinfo: \"\",\n\t\t\tleft: true,\n\t\t}\n\n\t}\n\n\n    componentDidMount() {\n        this.interval = setInterval(() => this.updateRegions(), 50);\n    }\n\n    componentWillUnmount() {\n        clearInterval(this.interval);\n    }\n\n\thandleStart = (key, e, { deltaX, deltaY }) => {\n\t\tthis.props.setPos(key, [this.props.humans[key][0] + deltaX, this.props.humans[key][1] + deltaY]);\n\t    this.props.setRegion(key, `M${this.props.humans[key][0]/this.props.ratio},${this.props.humans[key][1]/this.props.ratio} `);\n\t    this.props.setArc(key, 0)\n\t}\n\n\thandleStop = (key, e, { deltaX, deltaY }) => {\n\t\tthis.props.setPos(key, [this.props.humans[key][0] + deltaX, this.props.humans[key][1] + deltaY]);\n\t    this.props.setRegion(key, `M${this.props.humans[key][0]/this.props.ratio},${this.props.humans[key][1]/this.props.ratio} `);\n\t    this.props.setArc(key, 0)\n\t}\n\n\thandleDrag = (key, e, { deltaX, deltaY }) => {\n\t\tthis.props.setPos(key, [this.props.humans[key][0] + deltaX, this.props.humans[key][1] + deltaY]);\n\t    this.props.setRegion(key, `M${this.props.humans[key][0]/this.props.ratio},${this.props.humans[key][1]/this.props.ratio} `);\n\t    this.props.setArc(key, 0)\n\t}\n\n\tshowTooltip = (region, index, e) =>{\n\t\tvar bbox = e.target.getBBox();\n\t\tif ((bbox.x + bbox.width/2) >= (this.props.width/2)){\n\t\t\tthis.setState({left: true})\n\t\t} else {\n\t\t\tthis.setState({left: false})\n\t\t}\n\t\tif (this.props.arcs[index]>=360){\n\t\t\tvar str = region.substring(1, region.length-2).split(\" \");\n\t\t\tvar pts = [];\n\t\t\tvar num = [];\n\t\t\tstr.forEach((substr) => {\n\t\t\t\tnum = substr.split(\",\");\n\t\t\t\tpts.push([parseFloat(num[0]), parseFloat(num[1])]);\n\t\t\t});\n\t\t\tvar area = getArea(pts) / this.props.lengthratio / this.props.lengthratio;\n\t\t\tthis.setState({\n\t\t\t\ttooltip: true,\n\t\t\t\tinfo: `Visible Area: ${area.toFixed(2)}`,\n\t\t\t\tshaded: region,\n\t\t\t})\n\t\t}else{\t\t\tthis.setState({\n\t\t\t\ttooltip: true,\n\t\t\t\tinfo: \"Calculating area...\",\n\t\t\t})\n\t\t}\n\n\n\t}\n\n\thideTooltip = () =>{\n\n\t\tthis.setState({\n\t\t\ttooltip: false,\n\t\t\tinfo: \"\",\n\t\t\tshaded: \"\",\n\t\t})\n\n\t}\n\n\n\n\tupdateRegions = () => {\n\t\tvar regions = this.props.regions;\n\t\tvar arcs = this.props.arcs;\n\t\tvar changed = false;\n\t\tfor (var key in arcs){\n\t\t\tif (arcs[key]<360){\n\t\t\t\tchanged = true;\n\t\t\t\tvar arc = arcs[key];\n\t\t\t\tvar region = regions[key];\n\t\t\t\tif (region === \"\"){region = `M${this.props.humans[key][0]/this.props.ratio},${this.props.humans[key][1]/this.props.ratio} `}\n\t\t\t\tif (arc + this.angle >=360){\n\t\t\t\t\tvar parts = region.split(\" \");\n\t\t\t\t\tparts.shift();\n\t\t\t\t\tregion = \"M\" + parts.join(\" \") + \"Z\";\n\t\t\t\t}else{\n\t\t\t\t\tvar width = this.props.width;\n\t\t\t\t\tvar height = this.props.height;\n\t\t\t\t\tvar radius = Math.max(width, height);\n\t\t\t\t\tvar x = this.props.humans[key][0]/this.ratio;\n\t\t\t\t\tvar y = this.props.humans[key][1]/this.ratio;\n\t\t\t\t\tvar intersections = intersect(  \n\t\t\t\t\t\tsvgShape(\"line\", { x1: x + radius * Math.sin(toRad(arc)), y1: y + radius * Math.cos(toRad(arc)), x2: x, y2: y }),\n\t\t\t\t\t\tsvgShape(\"path\", {d:this.buildings})  \n\t\t\t\t\t);\n\n\t\t\t\t\tvar close = width * width + height * height;\n\t\t\t\t\t//var closePt = {x: x + radius * Math.sin(toRad(arc)), y: y + radius * Math.cos(toRad(arc))};\n\t\t\t\t\tvar closePt = intersect(  \n\t\t\t\t\t\tsvgShape(\"line\", { x1: x + radius * Math.sin(toRad(arc)), y1: y + radius * Math.cos(toRad(arc)), x2: x, y2: y }),\n\t\t\t\t\t\tsvgShape(\"rect\", {x:0, y:0, width:this.props.width, height:this.props.height})  \n\t\t\t\t\t).points[0];\n\n\t\t\t\t\tintersections.points.forEach((point) => {\n\t\t\t\t\t\tif (distSq(x, y, point.x, point.y) < close){\n\t\t\t\t\t\t\tclose = distSq(x, y, point.x, point.y);\n\t\t\t\t\t\t\tclosePt = point;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\tregion = region + `${closePt.x},${closePt.y} `\n\t\t\t\t}\n\t\t\t\tregions[key] = region;\n\t\t\t\tarcs[key] = arc + this.angle;\n\t\t\t}\n\t\t}\n\t\tif(changed){\n\t\t\tthis.props.setRegions(regions);\n\t\t\tthis.props.setArcs(arcs);\n\t\t}\n\t}\n\n\trender() {\n\t\tvar colors = [\"rgba(255, 139, 0, .4)\", \"rgba(0, 139, 255, .2)\", \"rgba(139, 255, 0, .2)\", \"rgba(255, 0, 139, .2)\", \"rgba(0, 255, 139, .2\"]\n\t\tvar regions = this.props.regions.map((region, index) => <path d={region} fill={colors[0]} stroke=\"red\" strokeWidth=\"1\" key={index} onMouseEnter={this.showTooltip.bind(this, region, index)} onMouseLeave={this.hideTooltip.bind(this)}/>);\n\t\tvar humans = this.props.humans.map((human, index) => <circle cx={human[0]/this.ratio} cy={human[1]/this.ratio} r=\"3\" fill = \"red\" key={index}/>)\n\t\tvar handles = this.props.humans.map((human, index) => \t\t\t\t\n\t\t\t\t<DraggableCore\n\t\t\t        onStart={this.handleStart.bind(this, index)}\n\t\t\t        onDrag={this.handleDrag.bind(this, index)}\n\t\t\t        onStop={this.handleStop.bind(this, index)}\n\t\t\t        key={index}>\n\t\t        \t<div className=\"human\" style={{top:human[1]-15, left:human[0]-15}}>\n\t\t        \t</div>\n\t\t      \t</DraggableCore>\n\t\t)\n\n\t\tvar tooltipstyle = {};\n\n\t\tif (this.state.left){\n\t\t\ttooltipstyle = {\n\t\t\t\ttop: \"0\",\n\t\t\t\tleft: \"0\"\n\t\t\t}\n\t\t}else{\n\t\t\ttooltipstyle = {\n\t\t\t\ttop: \"0\",\n\t\t\t\tright: \"0\"\n\t\t\t}\n\t\t}\n\n\t\treturn(\n\t\t\t<div className=\"visibilitymap\">\n\t\t\t\t<svg version=\"1.1\" viewBox={`0 0 ${this.props.width} ${this.props.height}`} ref={el => (this.container = el)}>\n\t\t\t\t\t<path d={this.state.shaded} fill=\"#f15c22\" stroke=\"none\"/>\n\t\t\t\t\t<path d={this.buildings} fill=\"rgba(0, 0, 0, .1)\" stroke=\"rgba(60, 60, 60)\" strokeWidth=\".5\"/>\n\t\t\t\t\t{regions}\n\t\t\t\t\t{humans}\n\t\t\t\t</svg>\n\t\t\t\t{handles}\n\t\t\t\t<div className={this.state.tooltip? \"tooltip\":\"hide\"} style={tooltipstyle}>\n\t\t\t\t\t<div className=\"tooltip-title\">{this.state.info}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n\n};\n\nexport default VisibilityMap;","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport '../scss/analysis.scss';\nimport NolliMap from \"./NolliMap\"\nimport TrafficMap from \"./TrafficMap\"\nimport VisibilityMap from \"./VisibilityMap2\"\nclass D3Layers extends React.Component {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tloading: 0,\n\t\t\twidth: 1000,\n\t\t\theight: 0,\n\t\t\tnodes: {},\n\t\t\tways: {},\n\t\t\trelations: {},\n\t\t\thumans: [[500,250]],\n\t\t\tarcs:[0],\n\t\t\tregions:[\"\"],\n\t\t\toptions : {\n\t\t\t\"Nolli Map\": \"None\",\n\t\t\t\"Traffic\": \"Both\",\n\t\t\t\"Visibility\": \"Both\",\n\t\t\t},\n\t\t}\n\t}\n\t\n\tcomponentDidMount() {\n\t\tthis.updateStates();\n\t}\n\tcomponentDidUpdate(prevProps) {\n\t\tif(this.props.rawdata !== prevProps.rawdata){\n\t\t\tthis.resetLoading();\n\t\t\tthis.updateStates();\n\t\t}\n\t}\n\n\tgetDistance = (lat1, lon1, lat2, lon2) => {\n\t  \tvar R = 6371e3; // metres\n\t\tvar φ1 = lat1* Math.PI / 180;\n\t\tvar φ2 = lat2* Math.PI / 180;\n\t\tvar Δφ = (lat2-lat1)* Math.PI / 180;\n\t\tvar Δλ = (lon2-lon1)* Math.PI / 180;\n\n\t\tvar a = Math.sin(Δφ/2) * Math.sin(Δφ/2) +\n\t\t        Math.cos(φ1) * Math.cos(φ2) *\n\t\t        Math.sin(Δλ/2) * Math.sin(Δλ/2);\n\t\tvar c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n\n\t\treturn R * c;\n\t}\n\n\tgetDirDistance = (lat1, lon1, lat2, lon2) => {\n\t\tif (lat2 <= lat1 && lon2 >= lon1) {\n\t\t\treturn this.getDistance(lat1, lon1, lat2, lon2);\n\t\t}else{\n\t\t\treturn -this.getDistance(lat1, lon1, lat2, lon2);\n\t\t}\n\t}\n\t\n\tgetBoundArea = (lat1, lat2, lon1, lon2) => {\n\t\treturn this.getDistance(lat1, lon1, lat1, lon2) * this.getDistance(lat1, lon1, lat2, lon1)\n\t}\n\n\tcheckSingle = (data) => {\n\t\tif (Array.isArray(data)){\n\t\t\treturn data;\n\t\t}else if(data){\n\t\t\treturn [data];\n\t\t}else{\n\t\t\treturn [];\n\t\t}\n\t}\n\n\tgetWayPoints = (data) => {\n\t\tvar pts = '';\n\t\tdata.forEach((node) =>{\n\t\t\tpts += `${node.x},${node.y} `\n\t    })\n\t    return pts;\n\t}\n\n\tmapPix = (x, a, b, c, d) => {\n\t\treturn c + (x-a) * (d-c) / (b-a)\n\t}\n\n\tgetArea(array) {\n\t    var x = array;\n\t    var a = 0;\n\t    if (x.length < 3) return 0;\n\t    for (var i = 0; i < (x.length-1); i += 1) {\n\t        a += x[i][0] * x[i+1][1] - x[i+1][0] * x[i][1];\n\t    }\n\t    return Math.abs(a * 1.0 / 2);\n\t}\n\n\taddLoading = (value) => {\n\t\tthis.setState({\n\t\t\tloading: this.state.loading + value\n\t\t})\n\t}\n\n\tresetLoading = () => {\n\t\tthis.setState({\n\t\t\tloading: 0\n\t\t})\n\t}\n\n\tupdateStates = () => {\n\t\t\tconst {nlat, slat, wlng, elng, rawdata} = this.props;\n\t\t\tconst width = this.state.width\n\t\t\tconst ratio = width/this.getDistance(nlat, wlng, nlat, elng);\n\t\t\tconst height = this.getDistance(nlat, wlng, slat, wlng)*ratio;\n\t\t\tvar nodes = {};\n\t\t\tvar ways = {};\n\t\t\tvar relations = {};\n\n\t\t\tif (rawdata){\n\t\t\t\tvar convert = require('xml-js');\n\t\t\t\tvar result = convert.xml2js(rawdata, {compact: true, spaces: 4});\n\n\t\t\t\tvar osmNode = this.checkSingle(result.osm.node);\n\t\t\t\tvar osmWay = this.checkSingle(result.osm.way);\n\t\t\t\tvar osmRelation = this.checkSingle(result.osm.relation);\n\t\t\t\t\n\t\t\t\tosmNode.forEach((element) => {\n\t\t\t\t\tvar id = element._attributes.id;\n\t\t\t\t\tvar nodeTag = this.checkSingle(element.tag);\n\n\t\t\t\t\tnodes[id] = {element: element};\n\t\t\t\t\tnodes[id].x = this.mapPix(element._attributes.lon, wlng, elng, 0, width);\n\t\t\t\t\tnodes[id].y = this.mapPix(element._attributes.lat, nlat, slat, 0, height);\n\t\t\t\t\tnodes[id].tag = {};\n\t\t\t\t\tnodeTag.forEach((tag) => {\n\t\t\t\t\t\tnodes[id].tag[tag._attributes.k] = tag._attributes.v\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tosmWay.forEach((element) => {\n\t\t\t\t\tvar id = element._attributes.id;\n\t\t\t\t\tvar wayNd = this.checkSingle(element.nd);\n\t\t\t\t\tvar wayTag = this.checkSingle(element.tag);\n\n\t\t\t\t\tways[id] = {element: element};\n\t\t\t\t\tways[id].children = [];\n\t\t\t\t\tways[id].points = []\n\t\t\t\t\tways[id].tag = {};\n\t\t\t\t\twayNd.forEach((nd) => {\n\t\t\t\t\t\tways[id].children.push(nodes[nd._attributes.ref]);\n\t\t\t\t\t\tways[id].points.push([nodes[nd._attributes.ref].x, nodes[nd._attributes.ref].y]);\n\t\t\t\t\t});\n\t\t\t\t\twayTag.forEach((tag) => {\n\t\t\t\t\t\tways[id].tag[tag._attributes.k] = tag._attributes.v;\n\t\t\t\t\t});\n\n\t\t\t\t\tif (ways[id].tag.building){\n\t\t\t\t\t\tvar area = \tthis.getArea(ways[id].points) / ratio / ratio;\n\t\t\t\t\t\tways[id].footprint = area;\n\t\t\t\t\t\tways[id].tag.footprint = area.toFixed(2)\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tosmRelation.forEach((element) => {\n\t\t\t\t\tvar id = element._attributes.id;\n\t\t\t\t\tvar relationMember = this.checkSingle(element.member);\n\t\t\t\t\tvar relationTag = this.checkSingle(element.tag);\n\n\t\t\t\t\trelations[id] = {element: element};\n\t\t\t\t\trelations[id].children = [];\n\t\t\t\t\trelations[id].members = []\n\t\t\t\t\trelations[id].tag = {};\n\t\t\t\t\trelationMember.forEach((member) => {\n\t\t\t\t\t\trelations[id].children.push(ways[member._attributes.ref]);\n\t\t\t\t\t\tif (member._attributes.type === 'way' && ways[member._attributes.ref]){\n\t\t\t\t\t\t\trelations[id].members.push({type: 'way', value: ways[member._attributes.ref].points, role: member._attributes.role});\n\t\t\t\t\t\t}else if (member._attributes.type === 'node' && nodes[member._attributes.ref]){\n\t\t\t\t\t\t\trelations[id].members.push({type: 'node', value: [nodes[member._attributes.ref].x, nodes[member._attributes.ref].y], role: member._attributes.role});\n\t\t\t\t\t\t}else if (member._attributes.type === 'relation' && relations[member._attributes.ref]){\n\t\t\t\t\t\t\trelations[id].members.push({type:'relation', value: relations[member._attributes.ref].members, role: member._attributes.role});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\trelationTag.forEach((tag) => {\n\t\t\t\t\t\trelations[id].tag[tag._attributes.k] = tag._attributes.v;\n\t\t\t\t\t});\n\t    \t\t\tif (relations[id].tag.building || relations[id].tag[\"buidling:part\"]){\n\t    \t\t\t\tvar area = 0;\n\t\t\t\t\t\trelations[id].members.forEach((member) => {\n\t\t\t\t\t\t\tif (member.role === \"outer\"){\n\t\t\t\t\t\t\t\tarea += this.getArea(member.value);\n\t\t\t\t\t\t\t}else if (member.role === \"outer\"){\n\t\t\t\t\t\t\t\tarea -= this.getArea(member.value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tarea = area / ratio / ratio;\n\t\t\t\t\t\trelations[id].footprint = area;\t\t\t\t\t\t\n\t\t\t\t\t\trelations[id].tag.footprint = area.toFixed(2);\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tthis.addLoading(100);\n\t\t\t}\n\t\n\t\t\tthis.pixratio = this.container.offsetWidth/1000;\n\t\t\tthis.ratio = ratio;\n\n\t\t\tthis.setState({\n\t\t\t\theight: height,\n\t\t\t\tnodes: nodes,\n\t\t\t\tways: ways,\n\t\t\t\trelations: relations,\n\t\t\t\thumans: [[Math.random() * width,Math.random() * height]],\n\t\t\t});\n\n\n\t\t\tconsole.log(nodes);\n\t\t\tconsole.log(ways);\n\t\t\tconsole.log(relations);\n\t\t\tconsole.log(ratio);\n\n\t}\n\n\tgetOptions = () => {\n\t\tvar data = require(\"./map-options.json\")[this.props.selected];\n\t\tvar selectedOption = this.state.options[this.props.selected];\n\t\tvar content = [];\n\t\tif (data) {\n\t\t\tcontent.push(\n\t\t\t\t<div className=\"options-title\" key=\"title\">\n\t\t\t\t\t{data.title}\n\t\t\t\t</div>\n\t\t\t)\n\t\t\tdata.options.forEach((option) => {\n\t\t\t\tcontent.push(\n\t\t\t\t\t<div className={option === selectedOption? \"options-item selected\" : \"options-item\"} onClick={()=>{this.setOption(option)}} key={option}>\n\t\t\t\t\t\t{option}\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t})\n\t\t}\n\t\tif (this.props.selected === \"Visibility\"){\n\t\t\tcontent.push(\n\t\t\t\t<div className=\"options-title\" key=\"title\">\n\t\t\t\t\tYou can add up to 5 viewing points:\n\t\t\t\t</div>\n\t\t\t)\n\t\t\tcontent.push(\n\t\t\t\t<button className=\"options-button\" onClick={this.addHuman} key=\"add\" disabled={this.state.arcs.length >= 5}>\n\t\t\t\t\tAdd a Point\n\t\t\t\t</button>\n\t\t\t)\n\t\t\tcontent.push(\n\t\t\t\t<button className=\"options-button\" onClick={this.deleteHuman} key=\"delete\" disabled={this.state.arcs.length <= 1}>\n\t\t\t\t\tDelete a Point\n\t\t\t\t</button>\n\t\t\t)\n\t\t}\n\t\treturn content;\n\t}\n\n\tsetOption = (option) => {\n\t\tvar newoptions = this.state.options;\n\t\tnewoptions[this.props.selected] = option;\n\t\tthis.setState({options:newoptions});\n\t\tconsole.log(\"reset!\");\n\t}\n\n\tsetPos = (num, position) => {\n\t\tvar newhumans = this.state.humans;\n\t\tnewhumans[num] = position\n\t\tthis.setState({humans: newhumans});\n\t}\n\n\tsetArc = (num, value) => {\n\t\tvar newarcs = this.state.arcs;\n\t\tnewarcs[num] = value\n\t\tthis.setState({arc: newarcs});\n\t}\n\n\tsetRegion = (num, value) => {\n\t\tvar newregions = this.state.regions\n\t\tnewregions[num] = value\n\t\tthis.setState({regions: newregions});\n\t}\n\n\tsetArcs = (value) => {\n\t\tthis.setState({arc: value});\n\t}\n\n\tsetRegions = (value) => {\n\t\tthis.setState({regions: value});\n\t}\n\n\taddHuman = () => {\n\t\tvar newhumans = this.state.humans;\n\t\tvar newarcs = this.state.arcs;\n\t\tvar newregions = this.state.regions;\n\t\tnewhumans.push([Math.random() * this.state.width, Math.random() * this.state.height]);\n\t\tnewarcs.push(0);\n\t\tnewregions.push(\"\");\n\t\tthis.setState({\n\t\t\thumans: newhumans,\n\t\t\tarcs: newarcs,\n\t\t\tregions: newregions,\n\t\t});\n\t}\n\n\tdeleteHuman = () => {\n\t\tvar newhumans = this.state.humans;\n\t\tvar newarcs = this.state.arcs;\n\t\tvar newregions = this.state.regions;\n\t\tnewhumans.pop();\n\t\tnewarcs.pop();\n\t\tnewregions.pop();\n\t\tthis.setState({\n\t\t\thumans: newhumans,\n\t\t\tarcs: newarcs,\n\t\t\tregions: newregions,\n\t\t});\n\t}\n\n\trender() {\n\t\tvar optionbar = this.getOptions();\n\t\tvar {ways, nodes, relations, width, height} = this.state;\n\t\tvar maps = {};\n\t\tvar ovl = [];\n\n\t\tmaps[\"Nolli Map\"] = \n\t\t\t<NolliMap\n\t\t\t\tnodes = {nodes}\n\t\t\t\tways = {ways}\n\t\t\t\trelations = {relations}\n\t\t\t\twidth = {width}\n\t\t\t\theight = {height}\n\t\t\t\tgetWayPoints = {this.getWayPoints}\n\t\t\t\taddLoading = {this.addLoading}\n\t\t\t\tnlat = {this.props.nlat}\n\t\t\t\tslat = {this.props.slat}\n\t\t\t\twlng = {this.props.wlng}\n\t\t\t\telng = {this.props.elng}\n\t\t\t\toption = {this.state.options[\"Nolli Map\"]}\n\t\t\t\tkey = \"Nolli Map\"\n\t\t\t/>;\n\n\t\tmaps[\"Traffic\"] = \n\t\t\t<TrafficMap\n\t\t\t\tnodes = {nodes}\n\t\t\t\tways = {ways}\n\t\t\t\trelations = {relations}\n\t\t\t\twidth = {width}\n\t\t\t\theight = {height}\n\t\t\t\tgetWayPoints = {this.getWayPoints}\n\t\t\t\taddLoading = {this.addLoading}\n\t\t\t\tnlat = {this.props.nlat}\n\t\t\t\tslat = {this.props.slat}\n\t\t\t\twlng = {this.props.wlng}\n\t\t\t\telng = {this.props.elng}\n\t\t\t\tkey = \"Traffic\"\n\t\t\t\toption = {this.state.options[\"Traffic\"]}\n\t\t\t/>;\n\n\t\tmaps[\"Visibility\"] = \n\t\t\t<VisibilityMap\n\t\t\t\tnodes = {nodes}\n\t\t\t\tways = {ways}\n\t\t\t\trelations = {relations}\n\t\t\t\twidth = {width}\n\t\t\t\theight = {height}\n\t\t\t\thumans = {this.state.humans}\n\t\t\t\tarcs = {this.state.arcs}\n\t\t\t\tregions = {this.state.regions}\n\t\t\t\tsetPos = {this.setPos}\n\t\t\t\tsetArc = {this.setArc}\n\t\t\t\tsetRegion = {this.setRegion}\n\t\t\t\tsetArcs = {this.setArcs}\n\t\t\t\tsetRegions = {this.setRegions}\n\t\t\t\taddLoading = {this.addLoading}\n\t\t\t\tnlat = {this.props.nlat}\n\t\t\t\tslat = {this.props.slat}\n\t\t\t\twlng = {this.props.wlng}\n\t\t\t\telng = {this.props.elng}\n\t\t\t\tkey = \"Visibility\"\n\t\t\t\toption = {this.state.options[\"Traffic\"]}\n\t\t\t\tratio = {this.pixratio}\n\t\t\t\tlengthratio = {this.ratio}\n\t\t\t/>;\n\n\t\tfor (var key in this.props.added){\n\t\t\tif (this.props.added[key]){\n\t\t\t\tovl.unshift(maps[key]);\n\t\t\t}\n\t\t}\n\n\t\treturn(\n\t\t\t<div className=\"maps-wrapper\" ref={el => (this.container = el)}>\n\t\t\t\t<div className=\"options\">\n\t\t\t\t\t{optionbar}\n\t\t\t\t</div>\n\t\t\t\t<svg version=\"1.1\" viewBox={`0 0 ${this.state.width} ${this.state.height}`} style = {{width: this.state.width}}/>\n\n\t\t\t\t<div className={this.state.loading === 100?\"hide\":\"loading\"}>Loading... </div>\n\t\t\t\t\n\t\t\t\t{this.props.selected === \"Overlay\"?\n\t\t\t\t\tovl\n\t\t\t\t\t:\n\t\t\t\t\tmaps[this.props.selected]\n\t\t\t\t}\n\t\t\t</div>\n\t\t)\n\t}\n\n}\n\nexport default D3Layers;","import React from \"react\";\nimport {withRouter} from \"react-router\";\nimport { Link } from \"react-router-dom\";\nimport ReactDragList from 'react-drag-list';\nimport '../scss/sidebar.scss'\n\nclass Sidebar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    \tmenu: this.props.layers,\n    \tadded: this.props.added,\n    \tselected: this.props.selected,\n    }\n  };\n\n  changeMap = (key) => {\n  \tthis.props.changeMap(key);\n  }\n\n  addOverlay = (e, title) => {\n  \te.stopPropagation();\n  \tthis.props.addOverlay(title);\n  }\n\n  removeOverlay = (e, title) => {\n  \te.stopPropagation();\n  \tthis.props.removeOverlay(title);\n  }\n\n  handleUpdate = (evt, updated) => {\n    console.log(evt); // tslint:disable-line\n    console.log(updated);\n  } // tslint:disable-line\n\n  renderMenu = () => {\n    const {layers, added, selected} = this.props;\n\n    let content = [];\n    layers.forEach((record, index) => {\n      content.push(\n\t\t      <div className={record === selected?\"menu-item selected\":\"menu-item\"} key={`${record}`} onClick={() => this.changeMap(record)}>\n\n\t\t      \t<div className = \"menu-subtitle\">\n\t\t        \t{record}\n\t\t        </div>\n\t\t        {added[record]?\n\t\t\t\t    <svg version=\"1.1\" viewBox=\"0 0 80 80\" className={record === selected?\"icon selected\":\"icon\"} onClick={(e) => this.removeOverlay(e, record)}>\n\t\t\t\t\t\t<path id=\"XMLID_6_\" d=\"M74,45H6c-2.8,0-5-2.2-5-5s2.2-5,5-5h68c2.8,0,5,2.2,5,5S76.8,45,74,45z\"/>\n\t\t\t\t\t</svg>\n\t\t\t\t:\n\t\t\t        <svg version=\"1.1\" viewBox=\"0 0 80 80\" className={record === selected?\"icon selected\":\"icon\"} onClick={(e) => this.addOverlay(e, record)}>\n\t\t\t\t\t\t<path d=\"M74,35H45V6c0-2.8-2.2-5-5-5s-5,2.2-5,5v29H6c-2.8,0-5,2.2-5,5c0,2.8,2.2,5,5,5h29v29c0,2.8,2.2,5,5,5s5-2.2,5-5V45h29\n\t\t\t\t\t\t\tc2.8,0,5-2.2,5-5C79,37.2,76.8,35,74,35z\"/>\n\t\t\t\t\t</svg>\n\t\t\t\t}\n\t\t\t\t<div className=\"clearfix\"/>\n\t\t      </div>\n      );\n    });\n    return content;\n  }\n\n  render() {\n\tvar content = this.renderMenu();\n\n    return (\n      <div className=\"menu\">\n\t\t<Link to={`${process.env.PUBLIC_URL}/`} className=\"back\">\n\t\t\t<svg version=\"1.1\" viewBox=\"0 0 80 80\" className=\"back-icon\">\n\t\t\t\t<path id=\"XMLID_7_\" d=\"M74,35H18.1l23.5-23.5c2-2,2-5.1,0-7.1c-2-2-5.1-2-7.1,0l-32,32c0,0,0,0,0,0C2.2,36.7,2,37,1.8,37.2\n\t\t\t\tc-0.1,0.1-0.1,0.3-0.2,0.4c-0.1,0.2-0.2,0.3-0.2,0.5c-0.1,0.2-0.1,0.3-0.2,0.5c0,0.1-0.1,0.3-0.1,0.4c-0.1,0.6-0.1,1.3,0,2\n\t\t\t\tc0,0.1,0.1,0.3,0.1,0.4c0.1,0.2,0.1,0.3,0.2,0.5c0.1,0.2,0.2,0.3,0.2,0.5c0.1,0.1,0.1,0.3,0.2,0.4C2,43,2.2,43.3,2.5,43.5l32,32\n\t\t\t\tc1,1,2.3,1.5,3.5,1.5s2.6-0.5,3.5-1.5c2-2,2-5.1,0-7.1L18.1,45H74c2.8,0,5-2.2,5-5S76.8,35,74,35z\"/>\n\t\t\t</svg>\n\t\t\t<div className = \"title\">Change Location</div>\n\t\t</Link>\n\t\t<div className=\"clearfix\"/>\n\t\t{content}\n        <div className={this.props.selected === \"Overlay\"?\"menu-item selected\":\"menu-item\"} onClick={() => this.changeMap(\"Overlay\")}>\n\t      \t<div className = \"menu-title\">\n\t        \tOverlay\n\t        </div>\n\t    </div>\n\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Sidebar);","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport axios from 'axios';\nimport D3Layers from \"./D3Layers\";\nimport Sidebar from \"./Sidebar\";\nimport '../scss/maps.scss';\n\nclass Maps extends React.Component {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\traw: null,\n\t\t\tlayers:[ \"Nolli Map\", \"Visibility\", \"Traffic\"],\n\t\t\tadded:{\n\t\t\t\t\"Nolli Map\": true,\n\t\t\t\t\"Visibility\": false,\n\t\t\t\t\"Traffic\": true,\n\t\t\t},\n\t\t\tselected:\"Nolli Map\",\n\t\t}\n\t\tthis.bounds = this.props.match.params;\n\t}\n\n\tcomponentDidMount() { \n\t    axios.get(`https://api.openstreetmap.org/api/0.6/map?bbox=${this.bounds.wlng},${this.bounds.slat},${this.bounds.elng},${this.bounds.nlat}`)\n\t      \t.then(res => {\n\t        \tif(res.data){\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\traw: res.data,\n\t\t\t\t\t})\n\t        \t};\n\t      \t});\n\n\t}\n\n\tchangeMap = (key) => {\n\t\tthis.setState({\n\t\t\tselected: key\n\t\t})\n\t}\n\n\taddOverlay = (title) => {\n\t\tconst newlist = this.state.added;\n\t\tnewlist[title] = true;\n\t\tthis.setState({\n\t\t  added: newlist,\n\t\t})\t\n\t}\n\n\tremoveOverlay = (title) => {\n\t\tconst newlist = this.state.added;\n\t\tnewlist[title] = false;\n\t\tthis.setState({\n\t\t  added: newlist,\n\t\t})\t\n\t}\t\n\t\n\trender() {\t\n\t\treturn (\n\t\t\t<div className=\"maps\">\n\t\t\t\t<Sidebar\n\t\t\t\t\tlayers = {this.state.layers}\n\t\t\t\t\tadded = {this.state.added}\n\t\t\t\t\tselected = {this.state.selected}\n\t\t\t\t\tchangeMap = {this.changeMap}\n\t\t\t\t\taddOverlay = {this.addOverlay}\n\t\t\t\t\tremoveOverlay = {this.removeOverlay}\n\t\t\t\t/>\n\t\t\t\t<div className=\"map-display\">\n\t\t\t\t\t<D3Layers\n\t\t\t\t\t\tlayers = {this.state.layers}\n\t\t\t\t\t\tadded = {this.state.added}\n\t\t\t\t\t\tselected = {this.state.selected}\n\t\t\t\t\t\t{...this.props.match.params}\n\t\t\t\t\t\trawdata = {this.state.raw}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"clearfix\"/>\n\t\t\t\t<div className=\"raw\">\n\t\t\t\t\t<div>{`n: ${this.bounds.nlat} s: ${this.bounds.slat} w: ${this.bounds.wlng} e: ${this.bounds.elng}`}</div>\n\t\t\t\t\t<div>API address: {`https://api.openstreetmap.org/api/0.6/map?bbox=${this.bounds.wlng},${this.bounds.slat},${this.bounds.elng},${this.bounds.nlat}`}</div>\n\t\t\t\t</div>\n\t\t    </div>\n\t\t);\n\t}\n}\n\nexport default Maps;\n","import React from 'react';\nimport { withRouter } from \"react-router\";\n\nclass ScrollToTop extends React.Component {\n  componentDidUpdate(prevProps) {\n    if (this.props.location !== prevProps.location) {\n      window.scrollTo(0, 0);\n    }\n  }\n\n  render() {\n    return this.props.children;\n  }\n}\n\nexport default withRouter(ScrollToTop);","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Sidebar from \"./Sidebar\";\nimport '../scss/maps.scss'\n\nclass MapsDemo extends React.Component {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tsidebar:[\"Original\", \"Nolli Map\", \"Program\", \"Traffic\", \"POI Clustering\", \"Overlay\"],\n\t\t\toverlay:[\n\t\t\t\t{\n\t\t\t\t\tname: \"Nolli Map\",\n\t\t\t\t\topacity:100\n\t\t\t\t}\n\t\t\t],\n\t\t\tshuffled:[\n\t\t\t\t{\n\t\t\t\t\tname: \"Nolli Map\",\n\t\t\t\t\topacity:100\n\t\t\t\t}\n\t\t\t],\n\t\t\tselected:1\n\t\t}\n\t}\n\n\tcomponentDidMount() { \n\t}\n\n\tchangeMap = (key) => {\n\t\tthis.setState({\n\t\t\tselected: key\n\t\t})\n\t}\n\n\taddOverlay = (title) => {\n\t\tthis.setState({\n\t\t  overlay: [{name:title, opacity:100},...this.state.overlay],\n\t\t})\t\n\t}\n\n\tremoveOverlay = (title) => {\n\t\tconst index = this.state.overlay.indexOf(title);\n\t\tconst newlayers = this.state.overlay;\n\t\tnewlayers.splice(index, 1);\n\t\tthis.setState({\n\t\t  overlay: newlayers,\n\t\t})\t\n\t}\n\n\tsetOverlay = (data) => {\n\t\tconsole.log(data);\n\t\tthis.setState({\n\t\t\toverlay:data\n\t\t})\n\t}\n\n\tgetShuffled = (data) => {\n\t\tconsole.log(data);\n\t\tthis.setState({\n\t\t\tshuffled:data\n\t\t})\n\t}\n\n\tsetOpacity = (record, value) => {\n\t\tconst index = this.state.overlay.indexOf(record);\n\t\tconsole.log(index, value);\n\t\tconst newopacity = this.state.overlay;\n\t\tnewopacity[index] = {name: record.name, opacity:parseInt(value)};\n\t\tthis.setState({\n\t\t\toverlay: newopacity\n\t\t})\n\t}\n\t\n\trenderLayers = () => {\n\t\tconst layers = this.state.overlay;\n\t\tlet content = [];\n\t\tfor (let key in layers){\n\t\t\tcontent.push(\n\t\t\t\t<img key={layers[key].name} style={{position:\"absolute\", maxWidth: \"100%\", opacity:layers[key].opacity/100}} src={`${process.env.PUBLIC_URL}/image/demo/${layers[key].name}.png`} alt={`${layers[key].name}`} />\n\t\t\t);\n\t\t}\n\t\tconsole.log(content);\n\t\treturn content.reverse();\n\t}\n\n\trender() {\n\t\tconst selected = this.state.sidebar[this.state.selected];\n\t\treturn (\n\t\t\t<div className=\"maps\">\n\t\t\t\t<div className=\"functions\">\n\t\t\t\t\t<Link to={`${process.env.PUBLIC_URL}/demo`} className=\"back\">\n\t\t\t\t        <svg version=\"1.1\" viewBox=\"0 0 80 80\" className=\"back-icon\">\n\t\t\t\t\t\t\t<path id=\"XMLID_7_\" d=\"M74,35H18.1l23.5-23.5c2-2,2-5.1,0-7.1c-2-2-5.1-2-7.1,0l-32,32c0,0,0,0,0,0C2.2,36.7,2,37,1.8,37.2\n\t\t\t\tc-0.1,0.1-0.1,0.3-0.2,0.4c-0.1,0.2-0.2,0.3-0.2,0.5c-0.1,0.2-0.1,0.3-0.2,0.5c0,0.1-0.1,0.3-0.1,0.4c-0.1,0.6-0.1,1.3,0,2\n\t\t\t\tc0,0.1,0.1,0.3,0.1,0.4c0.1,0.2,0.1,0.3,0.2,0.5c0.1,0.2,0.2,0.3,0.2,0.5c0.1,0.1,0.1,0.3,0.2,0.4C2,43,2.2,43.3,2.5,43.5l32,32\n\t\t\t\tc1,1,2.3,1.5,3.5,1.5s2.6-0.5,3.5-1.5c2-2,2-5.1,0-7.1L18.1,45H74c2.8,0,5-2.2,5-5S76.8,35,74,35z\"/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t<div className=\"title\">Change Location</div>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<div className=\"button export-button\">Export This Mapping</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"clearfix\"/>\n\t\t\t\t<Sidebar\n\t\t\t\t\t{...this.state}\n\t\t\t\t\tchangeMap = {this.changeMap}\n\t\t\t\t\taddOverlay = {this.addOverlay}\n\t\t\t\t\tremoveOverlay = {this.removeOverlay}\n\t\t\t\t\tsetOverlay = {this.setOverlay}\n\t\t\t\t\tsetOpacity = {this.setOpacity}\n\t\t\t\t\tgetShuffled = {this.getShuffled}\n\t\t\t\t/>\n\t\t\t\t<div className=\"map-display\">\n\t\t\t\t\t{selected != \"Overlay\"?\n\t\t\t\t\t\t<img style={{position:\"absolute\", maxWidth: \"100%\"}}src={`${process.env.PUBLIC_URL}/image/demo/${selected}.png`} alt=\"selected\" />\n\t\t\t\t\t:\n\t\t\t\t\t\tthis.renderLayers()\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"clearfix\"/>\n\t\t    </div>\n\t\t);\n\t}\n}\n\nexport default MapsDemo;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nclass Footer extends React.Component {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t}\n\t}\n\n\tcomponentDidMount() { \n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"footer\">\n\t\t\t\t<div>Infomap v0.1.0 prototype &copy; 2018 Wu Chenmu</div>\n\t\t    </div>\n\t\t);\n\t}\n}\n\nexport default Footer;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router, Route, Switch, Redirect } from 'react-router-dom';\nimport * as serviceWorker from './serviceWorker';\nimport Header from './modules/Header';\nimport SelectArea from './modules/SelectArea';\nimport Help from './modules/Help';\nimport About from './modules/About';\nimport Maps from './modules/Maps';\nimport MapsDemo from './modules/MapsDemo';\nimport ScrollToTop from './modules/ScrollToTop';\nimport Footer from './modules/Footer';\nimport './scss/base.scss';\n\n\nReactDOM.render((\n<Router>\n\t<ScrollToTop>\n\t\t<div className = 'content'>\n\t\t\t<Header/>\n\t\t\t<Route exact path = {process.env.PUBLIC_URL + '/'} component = {SelectArea} />\n\t\t\t<Route exact path = {process.env.PUBLIC_URL + '/help'} component = {Help} />\n\t\t\t<Route exact path = {process.env.PUBLIC_URL + '/about'} component = {About} />\n\t\t\t<Route exact path = {process.env.PUBLIC_URL + '/selected/:wlng/:slat/:elng/:nlat'} component = {Maps}/>\n\t\t\t<Footer/>\n\t\t</div>\n\t</ScrollToTop>\n</Router>\n), document.getElementById('root'));\n\nserviceWorker.unregister();\n"],"sourceRoot":""}